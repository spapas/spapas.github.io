<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta name="google-site-verification" content="5_8DTmIiEq4gFvNAfxAD6TsGOgrMAjp8lQFQvfA6zZc" />
    <title>A comprehensive react-redux tutorial &mdash; /var/</title>
    <meta name="author" content="Serafeim Papastefanos">


    
<style type="text/css">
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .pm { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation.Marker */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
</style>

<style type="text/css">
/* Overrides of notebook CSS for static HTML export */
div.entry-content {
  overflow: visible;
  padding: 8px;
}
.input_area {
  padding: 0.2em;
}

a.heading-anchor {
 white-space: normal;
}

.rendered_html
code {
 font-size: .8em;
}

pre.ipynb {
  color: black;
  background: #f7f7f7;
  border: none;
  box-shadow: none;
  margin-bottom: 0;
  padding: 0;
  margin: 0px;
  font-size: 13px;
}

/* remove the prompt div from text cells */
div.text_cell .prompt {
    display: none;
}

/* remove horizontal padding from text cells, */
/* so it aligns with outer body text */
div.text_cell_render {
    padding: 0.5em 0em;
}

img.anim_icon{padding:0; border:0; vertical-align:middle; -webkit-box-shadow:none; -box-shadow:none}

div.collapseheader {
    width=100%;
    background-color:#d3d3d3;
    padding: 2px;
    cursor: pointer;
    font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;
}
</style>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        displayMath: [['$$','$$'], ["\\[","\\]"]]
    }
});
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script type="text/javascript">
jQuery(document).ready(function($) {
    $("div.collapseheader").click(function () {
    $header = $(this).children("span").first();
    $codearea = $(this).children(".input_area");
    console.log($(this).children());
    $codearea.slideToggle(500, function () {
        $header.text(function () {
            return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
        });
    });
});
});
</script>






    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://www.spapas.net/favicon.png" rel="icon">

    <link href="https://www.spapas.net/theme/css/main.css" media="screen, projection" rel="stylesheet"
      type="text/css">

    <link href="https://www.spapas.net/theme/css/extra_style.css" media="screen, projection" rel="stylesheet"
      type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Fira+Mono|Fira+Sans:400,700&amp;subset=greek" rel="stylesheet">

<style>
#gHPzseYvFrhZ123 {
  padding: 5px !important;
  display: block;
  margin-bottom: 10px !important;
  background: #900;
  color: #fff;
  border-radius: 5px;
  font-size: 1.0rem !important;
}
</style>


  <script>
    
      
  </script>

    <script data-ad-client="ca-pub-7673322832689008" async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
      onerror="adBlockFunction();"></script>
  </head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="https://www.spapas.net/">/var/</a></h1>
    <h2>Various programming stuff</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
      <li >
        <a href="https://www.spapas.net/category/ai.html">Ai</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/android.html">Android</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/clojure.html">Clojure</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/css.html">Css</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/django.html">Django</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/elixir.html">Elixir</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/flask.html">Flask</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/gaming.html">Gaming</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/git.html">Git</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/html.html">Html</a>
      </li>
      <li class="active">
        <a href="https://www.spapas.net/category/javascript.html">Javascript</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/networking.html">Networking</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/pelican.html">Pelican</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/postgresql.html">Postgresql</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/python.html">Python</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/spring.html">Spring</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/unix.html">Unix</a>
      </li>
      <li >
        <a href="https://www.spapas.net/category/wagtail.html">Wagtail</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
    <div id="gHPzseYvFrhZ123">
      Hello! If you are using an ad blocker but find something useful here 
      and want to support me please consider disabling your ad blocker for this site. 
      <br />
      <br />
      Thank you,<br />
      Serafeim
      
    </div>
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">A comprehensive react-redux tutorial</h1>
    <p class="meta">
<time datetime="2016-03-02T11:20:00+02:00" pubdate>Wed 02 March 2016</time>    </p>
</header>

<div class="entry-content"><div class="contents topic" id="contents">
<p class="topic-title"><a class="reference internal" href="#top">Contents</a></p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="toc-entry-1">Introduction</a></li>
<li><a class="reference internal" href="#introduction-to-redux" id="toc-entry-2">Introduction to redux</a><ul>
<li><a class="reference internal" href="#a-simple-example" id="toc-entry-3">A simple&nbsp;example</a></li>
<li><a class="reference internal" href="#interlude-so-what-s-a-reducer" id="toc-entry-4">Interlude: So what&#8217;s a&nbsp;reducer?</a></li>
<li><a class="reference internal" href="#what-about-react-redux" id="toc-entry-5">What about&nbsp;react-redux?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#our-project" id="toc-entry-6">Our project</a><ul>
<li><a class="reference internal" href="#other-libraries-used" id="toc-entry-7">Other libraries&nbsp;used</a></li>
<li><a class="reference internal" href="#redux-thunk" id="toc-entry-8">redux-thunk?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#explaining-the-application" id="toc-entry-9">Explaining the application</a><ul>
<li><a class="reference internal" href="#main-js" id="toc-entry-10">main.js</a></li>
<li><a class="reference internal" href="#store-js" id="toc-entry-11">store.js</a><ul>
<li><a class="reference internal" href="#interlude-combining-reducers" id="toc-entry-12">Interlude: Combining&nbsp;reducers</a></li>
<li><a class="reference internal" href="#interlude-middlewares" id="toc-entry-13">Interlude:&nbsp;Middlewares</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reducers-js" id="toc-entry-14">reducers.js</a><ul>
<li><a class="reference internal" href="#the-global-state-tree" id="toc-entry-15">The global state&nbsp;tree</a></li>
</ul>
</li>
<li><a class="reference internal" href="#actions-js" id="toc-entry-16">actions.js</a></li>
<li><a class="reference internal" href="#components-app-js" id="toc-entry-17">components/app.js</a><ul>
<li><a class="reference internal" href="#components-notification-js" id="toc-entry-18">components/notification.js</a></li>
<li><a class="reference internal" href="#creating-a-re-usable-notification" id="toc-entry-19">Creating a re-usable&nbsp;notification</a></li>
<li><a class="reference internal" href="#components-loading-js" id="toc-entry-20">components/loading.js</a></li>
<li><a class="reference internal" href="#components-statpanel-js" id="toc-entry-21">components/StatPanel.js</a></li>
</ul>
</li>
<li><a class="reference internal" href="#components-bookpanel-js" id="toc-entry-22">components/BookPanel.js</a><ul>
<li><a class="reference internal" href="#components-booksearchpanel-js" id="toc-entry-23">components/BookSearchPanel.js</a></li>
<li><a class="reference internal" href="#components-table-js" id="toc-entry-24">components/Table.js</a></li>
<li><a class="reference internal" href="#components-pagingpanel-js" id="toc-entry-25">components/PagingPanel.js</a></li>
<li><a class="reference internal" href="#interlude-a-more-functional-component" id="toc-entry-26">Interlude: A more functional&nbsp;component</a></li>
</ul>
</li>
<li><a class="reference internal" href="#components-bookform" id="toc-entry-27">components/BookForm</a><ul>
<li><a class="reference internal" href="#components-input" id="toc-entry-28">components/Input</a></li>
<li><a class="reference internal" href="#components-select" id="toc-entry-29">components/Select</a></li>
<li><a class="reference internal" href="#components-datepicker" id="toc-entry-30">components/DatePicker</a></li>
<li><a class="reference internal" href="#should-i-create-my-own-input-components" id="toc-entry-31">Should I create my own input&nbsp;components?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#components-authorpanel" id="toc-entry-32">components/AuthorPanel</a></li>
<li><a class="reference internal" href="#components-authorform" id="toc-entry-33">components/AuthorForm</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changing-the-ui-when-the-data-is-changed" id="toc-entry-34">Changing the <span class="caps">UI</span> when the data is&nbsp;changed</a></li>
<li><a class="reference internal" href="#conclusion" id="toc-entry-35">Conclusion</a></li>
</ul>
</div>
<p><strong>Update 10/05/2016</strong>: Add a section on how to update the <span class="caps">UI</span> when the data in the database is changed without using the <span class="caps">UI</span>.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#toc-entry-1">Introduction</a></h2>
<p>Continuing the series of React-related articles, we&#8217;ll try to make a comprehensive
tutorial to the <a class="reference external" href="https://github.com/rackt/redux">redux</a> framework and its integrations with React, using the
<a class="reference external" href="https://github.com/rackt/react-redux">react-redux</a> library. Redux can be used as an alternative to Flux
(which we discussed in <a class="reference external" href="https://www.spapas.net/2015/07/02/comprehensive-react-flux-tutorial-2/">a previous article</a>)
to orchestrate the message passing between&nbsp;ui/components/data.</p>
<p>This tutorial will also produce as a result an opinionated (my opinion) boilerplate
project for creating react-redux Single Page Applications. I have used Django
as the back end however you could use any server-side framework you like,
Django is only used for implementing a bunch of <span class="caps">REST</span> APIs through django-rest-framework.
You may replace it with any other <span class="caps">REST</span> framework you&nbsp;like.</p>
<p>I have also used <tt class="docutils literal">browserify</tt> to pack the client-side code &#8212; I prefer it
from webpack as I find it much easier, clear and less-magical, and, since
it fills all my needs I don&#8217;t see any reason to take the webpack&nbsp;pill.</p>
<p>All client side code is written in <span class="caps">ES6</span> javascript using the latest trends &#8212; I will
try to explain anything I feel that is not very&nbsp;clear.</p>
<p>Before continuing, I have to mention that although I will provide an
(as comprehensive as possible) introduction to redux,
I will concentrate on the correct integration between redux, react-redux and
React in a complex, production level application. I&#8217;ll try to explain everything
I talk about, however, before reading the rest of
this article I recommend reading the introduction and basics sections
of <a class="reference external" href="http://rackt.org/redux/index.html">redux documentation</a> and watching the <a class="reference external" href="https://egghead.io/series/getting-started-with-redux">getting started with redux</a> from the
creator of redux &#8212; I can&#8217;t recommend the videos enough, they are really&nbsp;great!</p>
<p>One final thing: This is a <em>really long</em> article (more than 100 kb). It will
require a lot of time to read and understand it, especially if you are not
familiar with the concepts described here. Please take your time when reading
it and try verifying what I say here through the project that accompanies
this article &#64; <a class="reference external" href="https://github.com/spapas/react-tutorial/">https://github.com/spapas/react-tutorial/</a>, tag <tt class="docutils literal"><span class="pre">react-redux</span></tt>.</p>
</div>
<div class="section" id="introduction-to-redux">
<h2><a class="toc-backref" href="#toc-entry-2">Introduction to&nbsp;redux</a></h2>
<p>I have to say that I got interested in redux because of all that buzz this
framework generated. However, I got really interested in it when I
understood how close its philosophy was to functional programming -
this, when combined with the usage of react functional components will
enable you to write great code <em>and</em> (most important for me) really
enjoy coding with it (if you like functional programming of course :)&nbsp;)</p>
<p>Redux is simpler, having fewer and less complex concepts than the original Flux
implementation and more opinionated - this is a good&nbsp;thing!</p>
<p>Here are the basic building blocks of&nbsp;redux:</p>
<ul class="simple">
<li>One (and only one) <strong>state</strong>: It is an object that keeps the <em>global</em> state of your application. Everything has to be in that object, both data and&nbsp;ui.</li>
<li>A bunch of <strong>actions</strong>: These are simple objects that are created/dispatched when something happens (ui interaction, server response etc) with a mandatory property (their type) and a number of optional properties that define the data that accompanies each&nbsp;action.</li>
<li>A bunch of <strong>action creators</strong>: These are very simple functions that create action objects. Usually, there are as many action creators as actions (unless you use redux-thunk, we&#8217;ll talk about it&nbsp;later).</li>
<li>One (and only one) <strong>reducer</strong>: It is a function that retrieves the current state and an action and creates the resulting state. This is the central component of a redux application - every action along with the current state will be passed to the reducer and the state of the application will be the resulting, new&nbsp;state.</li>
<li>One (and only one) <strong>store</strong>: It is an object that is created by redux and is used as a glue between the state, the reducer and the&nbsp;components</li>
</ul>
<p>The general idea/flow&nbsp;is:</p>
<ul class="simple">
<li>Something (let&#8217;s call it event) happens (i.e a user clicks a button, a timeout is fired, an ajax request&nbsp;responds)</li>
<li>An action describing that event is created by its the corresponding action creator and dispatched (i.e passed to the reducer along with the current state) through the&nbsp;store</li>
<li>The dispach calls the reducer with the current state object and the action as&nbsp;parameters</li>
<li>The reducer checks the type of the action and, depending on the action type and any other properties this action has, creates a new state&nbsp;object</li>
<li>The store applies the new state to all&nbsp;components</li>
</ul>
<p>One thing we can see from the above is that redux is not react-only (although its general architecture is a perfect fit to react) but
could be also used with different view frameworks, or even with <em>no view framework</em>!</p>
<div class="section" id="a-simple-example">
<h3><a class="toc-backref" href="#toc-entry-3">A simple&nbsp;example</a></h3>
<p>I&#8217;ve implemented a very simple redux example &#64; jsfiddle that increases and decreases
a number using two buttons to support the&nbsp;above:</p>
<div class="jsfiddle"><iframe width="100%" height="300" src="http://jsfiddle.net/8aba3sp6/embedded/js,resources,html,css,result/light/" allowfullscreen="allowfullscreen" frameborder="0"></iframe></div><p>Its html&nbsp;is:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;state_container&#39;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&#39;increase()&#39;</span><span class="p">&gt;</span>+<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&#39;decrease()&#39;</span><span class="p">&gt;</span>-<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</pre></div>
<p>while its javascript (es6) code&nbsp;is:</p>
<div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">reducer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;INCREASE&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="o">+</span><span class="mf">1</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;DECREASE&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="o">-</span><span class="mf">1</span>
<span class="w">    </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Redux</span><span class="p">.</span><span class="nx">createStore</span><span class="p">(</span><span class="nx">reducer</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">unsubscribe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">store</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;state_container&#39;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="p">()</span>
<span class="p">)</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">increase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span>
<span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;INCREASE&#39;</span>
<span class="p">})</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">decrease</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">({</span>
<span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DECREASE&#39;</span>
<span class="p">})</span>
</pre></div>
<p>The <span class="caps">HTML</span> just displays a div which keeps the current number value
and two buttons that call the increase and decrease&nbsp;functions.</p>
<p>Now, for the javascript, we create a reducer function that
gets the previous state value (which initially is the number 0) and the
action that is dispatched. When the reducer is called it will check if the action type is &#8216;<span class="caps">INCREASE</span>&#8217;
or &#8216;<span class="caps">DECREASE</span>&#8217; and correspondigly increase or decreases the state,
which is just that number. Normally, the state will be a (rather fat)&nbsp;object.</p>
<p>We then create a store which gets the reducer as its only parameter
then and call its subscribe method passing a callback. This callback will be
called whenever the state is changed - in our case, the callback just updates
the div with the current number from the state. Finally, the increase
and decrease methods that are called when the butts are clicked
will just dispatch the corresponding&nbsp;action.</p>
<p>Please notice that in the above example I didn&#8217;t use action creators for
simplicity. For completeness, the action creator for increase would be something&nbsp;like</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">increaseCreator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;INCREASE&#39;</span>
<span class="p">}</span>
</pre></div>
<p>i.e it would just return an <tt class="docutils literal"><span class="caps">INCREASE</span></tt> action and <tt class="docutils literal">window.increase</tt>
would be <tt class="docutils literal">window.increase = e =&gt; <span class="pre">store.dispatch(increaseCreator())</span></tt>. Notice that
the <tt class="docutils literal">increaseCreator</tt> is called (has <tt class="docutils literal">()</tt>) so that <tt class="docutils literal">dispatch</tt> will receive the
resulting action object as a&nbsp;parameter.</p>
<p>The flow of the data when the increase button is clicked is the&nbsp;following:</p>
<ul class="simple">
<li><tt class="docutils literal">button.onClick</tt></li>
<li><tt class="docutils literal">increase()</tt></li>
<li><tt class="docutils literal">increaseCreator()</tt> (if we used action creators - this a param to <tt class="docutils literal">dispatch</tt> so it will be called&nbsp;first)</li>
<li><tt class="docutils literal"><span class="pre">store.dispatch({type:</span> '<span class="caps">INCREASE</span>' })</tt></li>
<li><tt class="docutils literal">reducer(current_state, {type: <span class="pre">'<span class="caps">INCREASE</span>'})</span></tt></li>
<li>Reducer returns the new state (<tt class="docutils literal">state+1</tt>)</li>
<li><tt class="docutils literal">callback()</tt></li>
<li>value is&nbsp;updated</li>
</ul>
<p>Having one and only one store/state makes the flow of the data crystal and
resolves some of the dillemas I had when using the original Flux architecture!
Some people may argue that although a single reducer function is nice for
the above simple demo, having a huge (spaghetti-like) switch statement in
your reducer is not a very good practice - thankfully redux has a bunch
of tools that will presented later and greatly help on this (seperating the
reducing logic, using different modules for each module&nbsp;etc).</p>
</div>
<div class="section" id="interlude-so-what-s-a-reducer">
<h3><a class="toc-backref" href="#toc-entry-4">Interlude: So what&#8217;s a&nbsp;reducer?</a></h3>
<p>I&#8217;d like to talk a bit about the &#8220;reducer&#8221;, mainly for people not familiar with
functional programming (although people writing Javascript <em>should</em> be familiar
with functional programming since Javascript has functional features) to clarify
my statement above that the redux philosophy is close to functional&nbsp;programming.</p>
<p>One basic concept of functional programming is the concept of
&#8220;map-reduce&#8221;. Mapping means calling a function (let&#8217;s call it mapper)
for all elements of a list and creating a new list with the output of each
individual call. So, a mapper gets only one parameter, the current value of
the list. For example the &#8220;double&#8221; mapper, defined like
<tt class="docutils literal">let double = x =&gt; x*2</tt> would &#8220;map&#8221; the list <tt class="docutils literal">[1,2,3]</tt> to <tt class="docutils literal">[2,4,6]</tt>.</p>
<p>Reducing means calling a function (let&#8217;s call it <em>reducer</em>) for all elements
of a list and creating a single value that accumulates the result of each
individual call. This can be done because the reducer gets <em>two</em> parameters,
the accumulated value of the list until this point and the current value of the list.
Also, when doing a reduce we need to define a starting value for the accumulator.
For example, the &#8220;sum&#8221; reducer, defined like <tt class="docutils literal">let sum = (s=0, x) =&gt; s+x</tt>,
(which has an initial value of 0), would &#8220;reduce&#8221; the list <tt class="docutils literal">[1,2,3]</tt> to <tt class="docutils literal">6</tt> by calling
the <tt class="docutils literal">sum</tt> reducer three&nbsp;times:</p>
<div class="highlight"><pre><span></span><span class="nx">tmp1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sum</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// tmp1 = 1</span>
<span class="nx">tmp2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sum</span><span class="p">(</span><span class="nx">tmp1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// tmp2 = 3</span>
<span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sum</span><span class="p">(</span><span class="nx">tmp2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span><span class="w"> </span><span class="c1">// result = 6</span>
</pre></div>
<p>So, a redux reducer is <em>actually</em> a (rather complex) functional reducer, getting the current
state (as the accumulated value) and each individual action as the value and
returning the new state which is the result of applying this action to the&nbsp;state!</p>
<p>Three extra things to make sure about your redux reducers are&nbsp;that:</p>
<ul class="simple">
<li>they should have an initial value (with the initial state of the application) or know how to handle an undefined initial&nbsp;state</li>
<li>they must not not mutate (change) the state object but instead create and return a new one (not allowing object mutations is a general practice in functional programming but in redux also helps to quickly apply the changes to the&nbsp;components)</li>
<li>always return a valid state as a result (or else the application will have invalid&nbsp;state)</li>
</ul>
</div>
<div class="section" id="what-about-react-redux">
<h3><a class="toc-backref" href="#toc-entry-5">What about&nbsp;react-redux?</a></h3>
<p>React-redux is a rather simple framework that offers two helpful utilities for integrating
redux with&nbsp;React:</p>
<ul class="simple">
<li>A <tt class="docutils literal">connect</tt> function that &#8220;connects&#8221; React components to the redux store. This function (among others) retrieves a callback parameter that defines properties that will be passed to that component and each one will be (magically) mapped to state&nbsp;properties.</li>
<li>A <tt class="docutils literal">Provider</tt> component. This is a parent component that can be used to (magically) pass the store properties to its children&nbsp;components.</li>
</ul>
<p>Please notice that nothing actually magical happens when the store properties are passed to the children
components through <tt class="docutils literal">connect</tt> and <tt class="docutils literal">Provider</tt>! this is accomplished through the <a class="reference external" href="https://facebook.github.io/react/docs/context.html">react context</a> feature
that allows you to &#8220;pass data through the component tree without having to pass the props down manually
at every level&#8221;. So <tt class="docutils literal"><span class="pre">connect``ed</span> components used context to retrieve the store properties that
have been passed to the context by the ``Provider</tt>.</p>
<p>How react-redux is used be made more clear with another jsfiddle that will convert the previous example to React and&nbsp;react-redux:</p>
<div class="jsfiddle"><iframe width="100%" height="300" src="http://jsfiddle.net/8aba3sp6/2/embedded/js,resources,html,css,result/light/" allowfullscreen="allowfullscreen" frameborder="0"></iframe></div><p>The html is just <tt class="docutils literal">&lt;div <span class="pre">id='container'&gt;&lt;/div&gt;</span></tt> since the components will
be rendered through react, while the es6/jsx code&nbsp;is:</p>
<div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">reducer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;INCREASE&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="o">+</span><span class="mf">1</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;DECREASE&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="o">-</span><span class="mf">1</span>
<span class="w">    </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Redux</span><span class="p">.</span><span class="nx">createStore</span><span class="p">(</span><span class="nx">reducer</span><span class="p">)</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">RootComponent</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="nx">number</span><span class="p">,</span><span class="w"> </span><span class="nx">increase</span><span class="p">,</span><span class="w"> </span><span class="nx">decrease</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">number</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="p">=&gt;</span><span class="nx">increase</span><span class="p">()}</span><span class="o">&gt;+&lt;</span><span class="err">/button&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="p">=&gt;</span><span class="nx">decrease</span><span class="p">()}</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">mapStateToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">  </span><span class="nx">number</span><span class="o">:</span><span class="w"> </span><span class="nx">state</span>
<span class="p">})</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">mapDispatchToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dispatch</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">  </span><span class="nx">increase</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">({</span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;INCREASE&#39;</span><span class="p">}),</span>
<span class="w">  </span><span class="nx">decrease</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">({</span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;DECREASE&#39;</span><span class="p">})</span>
<span class="p">})</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">ConnectedRootComponent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ReactRedux</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span>
<span class="w">    </span><span class="nx">mapStateToProps</span><span class="p">,</span><span class="w"> </span><span class="nx">mapDispatchToProps</span>
<span class="p">)(</span><span class="nx">RootComponent</span><span class="p">)</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
<span class="w">  </span><span class="o">&lt;</span><span class="nx">ReactRedux</span><span class="p">.</span><span class="nx">Provider</span><span class="w"> </span><span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">store</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">ConnectedRootComponent</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">  </span><span class="o">&lt;</span><span class="err">/ReactRedux.Provider&gt;,</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;container&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
<p>As we can see, the reducer and store are the same as the non-react version. What is new
here is that I&#8217;ve added a React <tt class="docutils literal">RootComponent</tt> that has two properties, one named <tt class="docutils literal">number</tt>
and one named <tt class="docutils literal">dispatch</tt> that can be used to dispatch an action through the&nbsp;store.</p>
<p>Using react-redux&#8217;s <tt class="docutils literal">connect</tt> function we create a new component, <tt class="docutils literal">ConnnectedRootComponent</tt>
which is a new component with the redux-enabled functionality (i.e it will have access to
store). The <tt class="docutils literal">connect()</tt> function takes
a bunch of optional arguments. I won&#8217;t go into much detail since its a little complex
(the <a class="reference external" href="https://github.com/rackt/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options">react-redux documentation</a> is clear enough), however in our example we have defined
two objects named <tt class="docutils literal">mapStateToProps</tt> and <tt class="docutils literal">mapDispatchToProps</tt>
which are passed to <tt class="docutils literal">connect</tt> and define how the state and the dispatch are mapped to
the properties the connected component will&nbsp;have.</p>
<p>The <tt class="docutils literal">mapStateToProps</tt> is a function that will be called whenever the store&#8217;s state
changes and should return an object whose attributes will be passed to the connected component
as properties. In our example,
we return an object with a number attribute having the current state
(which don&#8217;t forget that is just a number) as its value -
that&#8217;s why we can extract the <tt class="docutils literal">number</tt> attribute from <tt class="docutils literal">this.props</tt> when&nbsp;rendering.</p>
<p>The <tt class="docutils literal">mapDispatchToProps</tt> as we use it, once again returns an object
whose attributes will be passed to the connected component and will dispatch
actions when&nbsp;called.</p>
<p>Of course, in order for
the <tt class="docutils literal">ConnectedRootComponent</tt> to <em>actually</em> have these properties that we passed through <tt class="docutils literal">connect</tt>,
it must
be enclosed in a <tt class="docutils literal">&lt;Provider&gt;</tt> parent component (so that the correct react context will be initialized).
Notice that this is recursive so if we had&nbsp;something</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">Provider</span> <span class="na">store</span><span class="o">=</span><span class="s">{store}</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Component1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Component2</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ConnectedComponent</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">ConnectedComponent</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">Component2</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Component1</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">Provider</span><span class="p">&gt;</span>
</pre></div>
<p>the <tt class="docutils literal">&lt;ConnectedComponent&gt;</tt> would still get the props (dispatch + state slice) we mentioned above
even if its parent components were not&nbsp;connected.</p>
<p>Although we could have avoided using react-redux  by passing the store directly
to <tt class="docutils literal">&lt;RootComponent&gt;</tt> and subscibing to the store changes from the <tt class="docutils literal">RootComponent</tt>&#8216;s <tt class="docutils literal">componentWillMount</tt> method,
the added-value of react-redux is that using <tt class="docutils literal">connect</tt> and <tt class="docutils literal">Provider</tt> we could pass dispatch and
state slices deep inside our component hierarchy without the need to explicitly pass the store
to each individual component and also that react-redux will make optimizations so that the
each connected component will be re-rendered only when needed (depending on the state slice it uses)
and not for every state change. Please be warned that this does not mean that you should connect everything
so that everything will have access to the global state and be able to dispatch actions. You should be very
careful to connect only the components that really need to be connected (redux calls them container components)
and pass dispatch and state as
properties to their children (which are called presentational components). Also, each connected component should receive only
the part of the global state it
needs and not everything (so that each particular component will update only when needed and not for
every state update). The above is absolutely necessary if you want to crate re-usable (<span class="caps">DRY</span>) and
easily testable components. I&#8217;ll discuss this a little more when
describing the sample&nbsp;project.</p>
<p>Finally, notice how easy it is to create reusable container
components using <tt class="docutils literal">mapStateToProps</tt> and <tt class="docutils literal">mapDispatchToProps</tt>:
Both the way the component gets its state and calls its actions are
defined through these two objects so you can create
as many connected objects as you want by passing different
<tt class="docutils literal">mapStateToProps</tt> and <tt class="docutils literal">mapDispatchToProps</tt> - more on this&nbsp;later.</p>
</div>
</div>
<div class="section" id="our-project">
<h2><a class="toc-backref" href="#toc-entry-6">Our&nbsp;project</a></h2>
<p>After this rather lengthy introduction to redux and react-redux we may move on to our
project. First of all, let&#8217;s see an example of what we&#8217;ll actually build&nbsp;here:</p>
<img alt="Our project" src="/images/demo3.gif" style="width: 600px;" />
<p>This is a single-page application that supports client side routing and
has four different routes: A books list, an authors list, a book editing/create
form and an author editing/create form.
The books list supports searching (with the filter field),
pagination (with 5 books per page) and per-column sorting when
clicking the column name (ascending/descending). The book form
supports validation (on the book title), cascading drop downs
(changing category limits the subcategory choices) and a
jquery ui datepicker to select the book publish date. Also,
you can delete books or authors from their corresponding
form. Notice that there&#8217;s a statistics panel showing the current
number of authors and books. A nice loading spinner
will be displayed when asynchronous ajax actions are executed
and a snackbar notification will be shown when such an action
is executed. Finally, although you won&#8217;t be able to see it,
the url of the application is changed according to the choices
the user&nbsp;makes.</p>
<div class="section" id="other-libraries-used">
<h3><a class="toc-backref" href="#toc-entry-7">Other libraries&nbsp;used</a></h3>
<p>React (and redux) have a big ecosystem of great libraries. Some of these have been used
for this project and will also be discussed in this&nbsp;article:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/gaearon/redux-thunk">redux-thunk</a>: This is a nice add-on for redux that generalizes action&nbsp;creators.</li>
<li><a class="reference external" href="https://github.com/erikras/redux-form">redux-form</a>: A better way to use forms with react and redux. Always use it if you have non-trivial&nbsp;forms.</li>
<li><a class="reference external" href="https://github.com/rackt/react-router">react-router</a>: A library to create routes for single page applications with&nbsp;React.</li>
<li><a class="reference external" href="https://github.com/rackt/react-router-redux">react-router-redux</a> (ex redux-simple-router): This library will help integrating react-router with&nbsp;redux.</li>
<li><a class="reference external" href="https://github.com/rackt/history">history</a>: This is used bt react-router to crete the page history (so that back forward etc&nbsp;work).</li>
<li><a class="reference external" href="https://github.com/pburtchaell/react-notification">react-notification</a>: A simple react component to display&nbsp;notifications.</li>
</ul>
<p>The triplet react-router, react-router-redux and history needs to be used for projects that
enable client side routing. The redux-form is really useful if you have non-trivial forms
in your projects - you may skip it if you don&#8217;t use forms or for example you use a form for
searching/filtering with a single input. react-notification just displays notifications,
you can easily exchange it with other similar components or create your&nbsp;own.</p>
</div>
<div class="section" id="redux-thunk">
<h3><a class="toc-backref" href="#toc-entry-8">redux-thunk?</a></h3>
<p>Now, about redux-thunk. I won&#8217;t go into much detail here, you can read more about it in this <a class="reference external" href="http://stackoverflow.com/a/35415559/119071">great <span class="caps">SO</span> answer</a>,
however I&#8217;d like to point out here that <strong>everything that can be done with redux-thunk
can also be done without it</strong> so you may safely skip it if you feel that you don&#8217;t really
need it in your&nbsp;project.</p>
<p>But what does it do? Well, redux-thunk allows you to create action creators that don&#8217;t only return
action objects but can do various other things, like calling other actions or
dispatching actions conditionally. When using redux-thunk, an action returns a function
that can do any of the above mentioned things, something like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">thunkAction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// here you may</span>
<span class="w">    </span><span class="c1">// dispatch other actions (more than one) using the provided dispatch() parameter</span>
<span class="w">    </span><span class="c1">// or</span>
<span class="w">    </span><span class="c1">// check the current state using the getState() parameter and do conditional dispatches</span>
<span class="w">    </span><span class="c1">// or</span>
<span class="w">    </span><span class="c1">// call functions asynchronously so that these will use the provided</span>
<span class="w">    </span><span class="c1">// dispatch function when they return</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Let&#8217;s say that we wanted to implement an asynchronous, ajax call.
If we don&#8217;t want to use redux thunk,
then we need to create a normal function that gets <tt class="docutils literal">dispatch</tt> as an argument, something
like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">showLoadingAction</span><span class="p">,</span><span class="w"> </span><span class="nx">hideLoadingAction</span><span class="p">,</span><span class="w"> </span><span class="nx">showDataAction</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./actions&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">getData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">dispatch</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showLoadingAction</span><span class="p">())</span>
<span class="w">  </span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">data_url</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">hideLoadingAction</span><span class="p">())</span>
<span class="w">      </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showDataAction</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
<span class="w">  </span><span class="p">})</span>
<span class="p">}</span>
</pre></div>
<p>The main problem with this approach is that the getData functions <em>is not</em>
called like a normal
action creator (like <tt class="docutils literal">showLoadingAction</tt>, <tt class="docutils literal">hideLoadingAction</tt> and <tt class="docutils literal">showDataAction</tt>)
since it actually returns nothing (so nothing will be dispatched),
so you&#8217;ll need to remember to call it directly
and pass it the <tt class="docutils literal">dispatch</tt> <em>instead of</em> passing its return value to <tt class="docutils literal">dispatch</tt>!</p>
<p>If however we used thunk, then we&#8217;d have something like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">getDataThunk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showLoadingAction</span><span class="p">())</span>
<span class="w">    </span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">data_url</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">hideLoadingAction</span><span class="p">())</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showDataAction</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Now, the above can be used like a normal action (i.e it can be called using <tt class="docutils literal"><span class="pre">dispatch(getDataThunk())</span></tt>).
That&#8217;s more or less the main advantage of redux-thunk: You are able to create thunk action creators that
can be called like normal actions and can do more complex things than just returning action objects
so you don&#8217;t have to remember how to call each&nbsp;function.</p>
<p>I have to repeat
again that everything that you be done with thunk action creators, can also be done with normal functions
that get <tt class="docutils literal">dispatch</tt> as a paremeter - the advantage of thunk action creators is that you don&#8217;t need to
remember if an action creator needs to be called through <tt class="docutils literal"><span class="pre">disaptch(actionCreator())</span></tt>
or <tt class="docutils literal">actionCreator(dispatch)</tt>.</p>
<p>In this tutorial you&#8217;ll see heavy use of redux-thunk. This is just my personal preference - you may
use it less or not at all (however, if you&#8217;ve configured your project to use redux-thunk then I propose
to go all the way and use it all the time for those more complex action&nbsp;creators).</p>
</div>
</div>
<div class="section" id="explaining-the-application">
<h2><a class="toc-backref" href="#toc-entry-9">Explaining the&nbsp;application</a></h2>
<p>In the following paragraphs we&#8217;ll see together the structure and source code of
this application. I&#8217;ll try to go into as much detail as possible in order to solve
any questions you may have (I know I had many when I tried setting up everything for
the first time). I&#8217;ll skip imports and non-interesting components - after all the
complete source code can be found &#64; <a class="reference external" href="https://github.com/spapas/react-tutorial/">https://github.com/spapas/react-tutorial/</a>,
checkout the tag <tt class="docutils literal"><span class="pre">react-redux</span></tt>.
We&#8217;ll use a top down approach, starting from the main component where the
client side routing
is defined and the application is mounted to the <span class="caps">DOM</span>:</p>
<div class="section" id="main-js">
<h3><a class="toc-backref" href="#toc-entry-10">main.js</a></h3>
<p>This module is used as an entry point for browserify (i.e we call browserify with
<tt class="docutils literal">browserify main.js <span class="pre">-o</span> bundle.js</tt> ) and uses components defined elsewhere to
create the basic structure of our application. Let&#8217;s take a look at the important
part of&nbsp;it:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">About</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">About</span><span class="o">&lt;</span><span class="err">/h2&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Link</span><span class="w"> </span><span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="o">&gt;</span><span class="nx">Home</span><span class="o">&lt;</span><span class="err">/Link&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">}</span>

<span class="nx">render</span><span class="p">((</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Provider</span><span class="w"> </span><span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">store</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Router</span><span class="w"> </span><span class="nx">history</span><span class="o">=</span><span class="p">{</span><span class="nx">history</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Route</span><span class="w"> </span><span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="w"> </span><span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">App</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">IndexRoute</span><span class="w"> </span><span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">BookPanel</span><span class="p">}</span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Route</span><span class="w"> </span><span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/book_create/&quot;</span><span class="w"> </span><span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">BookForm</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Route</span><span class="w"> </span><span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/book_update/:id&quot;</span><span class="w"> </span><span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">BookForm</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>

<span class="w">                </span><span class="o">&lt;</span><span class="nx">Route</span><span class="w"> </span><span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/authors/&quot;</span><span class="w"> </span><span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">AuthorPanel</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Route</span><span class="w"> </span><span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/author_create/&quot;</span><span class="w"> </span><span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">AuthorForm</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Route</span><span class="w"> </span><span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/author_update/:id&quot;</span><span class="w"> </span><span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">AuthorForm</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>

<span class="w">                </span><span class="o">&lt;</span><span class="nx">Route</span><span class="w"> </span><span class="nx">path</span><span class="o">=</span><span class="s2">&quot;/about&quot;</span><span class="w"> </span><span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">About</span><span class="p">}</span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Route</span><span class="w"> </span><span class="nx">path</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="w"> </span><span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">NoMatch</span><span class="p">}</span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Route&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Router&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Provider&gt;</span>
<span class="w">  </span><span class="p">),</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
<p>We can see the well-known <tt class="docutils literal">render</tt> function from ReactDOM that gets a component
and a <span class="caps">DOM</span> element to mount it to. The domponent we provide to render is the <tt class="docutils literal">Provider</tt>
from react-redux we talked about before in order to enable all children components
to use <tt class="docutils literal">connect</tt> to have access to the store properties and dispatch. This is the usual
approact with react-redux: <em>The outer component will always be the&nbsp;&#8220;Provider&#8220;.</em></p>
<p>The <tt class="docutils literal">Provider</tt> component gets one parameter which is the store that redux will use. We
have initialized our store in a different module which I will present&nbsp;below.</p>
<p>Inside the <tt class="docutils literal">Provider</tt> we are defining a <tt class="docutils literal">Router</tt> from <tt class="docutils literal"><span class="pre">react-router</span></tt>. This should
be the parent component inside which all client-side routes of our appliccation are defined.
The <tt class="docutils literal">Router</tt> gets a <tt class="docutils literal">history</tt> parameter which is initialized elsewhere (stick with me
for now, I will talk about it&nbsp;later).</p>
<p>Now, inside <tt class="docutils literal">Router</tt> we are defining the actual routes of this application. As we
can see,
there&#8217;s a parent <tt class="docutils literal">Route</tt> that is connnected to the <tt class="docutils literal">App</tt> component which actually
contains everything else. The parent route contains an <tt class="docutils literal">IndexRoute</tt> whose corresponding
component (<tt class="docutils literal">BookPanel</tt>) is called
when no route is defined and a bunch of normal <tt class="docutils literal">Route</tt> components whose
components are called when the url matches their part. Notice how we pass parameters
to urls (e.g <tt class="docutils literal"><span class="pre">/book_update/:id</span></tt>) and the match-all route
(<tt class="docutils literal">&lt;Route <span class="pre">path=&quot;*&quot;</span> <span class="pre">component={NoMatch}/&gt;</span></tt>).</p>
<p>Finally as an example of a routed-to component, notice the <tt class="docutils literal">About</tt> component
which is rendered when the route is <tt class="docutils literal">/about</tt>. This is just a normal react component that-
will be rendered <em>inside</em> the <tt class="docutils literal">App</tt> component -
the <tt class="docutils literal">Link</tt> is a <tt class="docutils literal"><span class="pre">react-router</span></tt> component that renders a link to a defined&nbsp;route.</p>
</div>
<div class="section" id="store-js">
<h3><a class="toc-backref" href="#toc-entry-11">store.js</a></h3>
<p>The <tt class="docutils literal">store.js</tt> module contains the definition of the global store of our application
(which is passed to the <tt class="docutils literal">Provider</tt>).
Here, we also define the <tt class="docutils literal">history</tt> object we passed to the parent <tt class="docutils literal">Router</tt>.</p>
<div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">reducer</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">formReducer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;redux-form&#39;</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="nx">createHistory</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;history/lib/createHashHistory&#39;</span>

<span class="c1">// Opt-out of persistent state, not recommended.</span>
<span class="c1">// https://github.com/reactjs/history/blob/master/docs/HashHistoryCaveats.md</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">history</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createHistory</span><span class="p">({</span>
<span class="w">    </span><span class="nx">queryKey</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">});</span>
</pre></div>
<p>First of all, we see that our <tt class="docutils literal">history</tt> object is of type <tt class="docutils literal">HashHistory</tt>
(<a class="reference external" href="https://github.com/reactjs/react-router/blob/latest/docs/guides/Histories.md#hashhistory">more info about history types</a>) and I&#8217;ve also opted out of using
<tt class="docutils literal">queryKey</tt>. If I hadn&#8217;t used the <tt class="docutils literal">queryKey: false</tt> configuration
then there&#8217;d be a <tt class="docutils literal"><span class="pre">?_k=ckuvup</span></tt> query parameter in the <span class="caps">URL</span>. Now, this
parameter is actually useful (it stores location state <em>not</em> present
in the <span class="caps">URL</span> for example <span class="caps">POST</span> form data) but I don&#8217;t need it for this
example (and generally I prefer cleaner <span class="caps">URLS</span>) - but if you don&#8217;t like
the behavior of your history without it then go ahead and add&nbsp;it.</p>
<p>Also, notice that I&#8217;ve used <tt class="docutils literal">HashHistory</tt> which will append a <tt class="docutils literal">#</tt>
to the <span class="caps">URL</span> and the client-side <span class="caps">URL</span> will come after that, so all
URLs will be under (for example) <tt class="docutils literal">/index.html</tt> like <tt class="docutils literal"><span class="pre">/index.html#/authors</span></tt>.
The react-router
documentation recommends using <tt class="docutils literal">BrowserHistory</tt> which uses normal (clean)
urls &#8212; so instead of <tt class="docutils literal"><span class="pre">/index.html#/authors</span></tt> we&#8217;d see <tt class="docutils literal">/authors</tt> if we&#8217;d
used <tt class="docutils literal">BrowserHistory</tt>.</p>
<p>The problem with <tt class="docutils literal">BrowserHistory</tt> is that you&#8217;ll need to configure correctly
your <span class="caps">HTTP</span> server so that it will translate every <span class="caps">URL</span> (/foo) to the same
<span class="caps">URL</span> under <tt class="docutils literal">/index.html</tt> (<tt class="docutils literal"><span class="pre">/index.html#/foo</span></tt>) - as can be understood,
without that configuration the <span class="caps">HTTP</span> server doesn&#8217;t know anything about the
client side urls so when the webserver sees <tt class="docutils literal">/authors</tt> it will pass
<tt class="docutils literal">/authors</tt> to your server side framework (which will return a 404 error) - that&#8217;s
why this translation is&nbsp;needed.</p>
<p>However, in my case, I don&#8217;t think
that configuring your <span class="caps">HTTP</span> server to rewrite urls is worth the trouble and also I do really
prefer using <tt class="docutils literal">#</tt> for client-side urls! This is a common patter, recognised
by everybody and even without the <span class="caps">HTTP</span> server-configuration part I&#8217;d still
prefer <tt class="docutils literal">HashHistory</tt> over <tt class="docutils literal">BrowserHistory</tt> - of course this is just my opinion, feel free to use
<tt class="docutils literal">BrowserHistory</tt> if you don&#8217;t like the hash <tt class="docutils literal">#</tt>!</p>
<p>The next block of code from the <tt class="docutils literal">store</tt> module creates the
most important thing of a redux application, its reducer
along with the global&nbsp;store:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">reducer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">combineReducers</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">books</span><span class="p">,</span>
<span class="w">        </span><span class="nx">notification</span><span class="p">,</span>
<span class="w">        </span><span class="nx">ui</span><span class="p">,</span>
<span class="w">        </span><span class="nx">categories</span><span class="p">,</span>
<span class="w">        </span><span class="nx">authors</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">routing</span><span class="o">:</span><span class="w"> </span><span class="nx">routeReducer</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">form</span><span class="o">:</span><span class="w"> </span><span class="nx">formReducer</span>
<span class="w">    </span><span class="p">})</span>
<span class="p">)</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">reduxRouterMiddleware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">syncHistory</span><span class="p">(</span><span class="nx">history</span><span class="p">)</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createStore</span><span class="p">(</span><span class="nx">reducer</span><span class="p">,</span><span class="w"> </span><span class="nx">applyMiddleware</span><span class="p">(</span>
<span class="w">    </span><span class="nx">thunk</span><span class="p">,</span><span class="w"> </span><span class="nx">reduxRouterMiddleware</span>
<span class="p">));</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">store</span>
</pre></div>
<p>Please notice above that the <tt class="docutils literal">Object.assign</tt> method is used - I&#8217;ll talk about
it later &#8212;  however, another common <span class="caps">ES6</span> idiom that I&#8217;ve used here
is that when you define
an object you can change  <tt class="docutils literal">{ x: x }</tt> to <tt class="docutils literal">{ x }</tt> (so <tt class="docutils literal">{books}</tt>
means <tt class="docutils literal">{'books': books}</tt>).</p>
<p>The <tt class="docutils literal">combineReducers</tt> function is provided
by redux and is a helper function that helps you in &#8230; combining reducers!
As you see, I&#8217;ve combined the reducers defined in this application
<tt class="docutils literal">(books, notification, ui, categories, authors)</tt> with the reducers
of <tt class="docutils literal"><span class="pre">react-router-redux</span></tt> and <tt class="docutils literal"><span class="pre">redux-form</span></tt>
to create <em>the reducer</em>. We&#8217;ll talk a bit in the next
interlude on what does combining reducers&nbsp;is.</p>
<p>The <tt class="docutils literal">routeReducer</tt> and <tt class="docutils literal">formReducer</tt> reducers are provided by
react-router-redux and refux-form to properly handle the routing
and form-related&nbsp;actions.</p>
<p>The remaining of the code generates the <tt class="docutils literal">store</tt>: First of all, a middleware
(please see next-next interlude for more)
is created with <tt class="docutils literal">syncHistory</tt> that allows actions to call history methods
(so that when the <span class="caps">URL</span> is changed through actions they will be reflected to the
history). Then, the <tt class="docutils literal">createStoreWithMiddleware</tt> function is called to generate
the store that will be passed to the <tt class="docutils literal">Provider</tt>. This function takes the
reducer as a parameter along with any store enchancers that we&#8217;d like to
apply. A store enchancer is a function that modifies the store. The only
store enchanccer that we use now is the output of the
<tt class="docutils literal">applyMiddleware</tt> function that combines the two middlewares we&#8217;ve defined (one is for
redux thunk, the other is for <tt class="docutils literal">syncHistory</tt>). I know, your head hurts but
I&#8217;ll try to clear things out&nbsp;below.</p>
<div class="section" id="interlude-combining-reducers">
<h4><a class="toc-backref" href="#toc-entry-12">Interlude: Combining&nbsp;reducers</a></h4>
<p>So, what does the <tt class="docutils literal">combineReducers</tt> function do? As we&#8217;ve already seen,
the reducer is a simple function that gets the current state and an
action as parameters and returns the next state (which is the result of applying
the action to the state). The reducer will have a big switch statement that
checks the type of the action and returns the correct new state. Unfortunately,
this switch statement may get way too fat and unmaintainable for large&nbsp;projects.</p>
<p>That&#8217;s where combining reducers comes to the rescue: Instead of having one big,
monolithic reducer for all the parts of our application state tree, we can break it to individual
reducers depending only on specific slices of the state object. What this means is
that if we have for example a state tree like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="s1">&#39;data&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="s1">&#39;ui&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</pre></div>
<p>with actions that manipulate either data or ui, we could create two indivdual reducers,
one for the <tt class="docutils literal">data</tt> slice, and one for the <tt class="docutils literal">ui</tt> slice of the state tree. These reducers would get <em>only</em>
the slice of the state that they are interested in, so the <tt class="docutils literal">dataReducer</tt> will get
only the <tt class="docutils literal">data</tt> part of the state tree and the <tt class="docutils literal">uiReducer</tt> will get only the <tt class="docutils literal">ui</tt>
part of the state&nbsp;tree.</p>
<p>To <em>combine</em> these reducers the <tt class="docutils literal">combineReducers</tt> function is used. This function
gets an object with the name of the state part for each sub-reducer as attribute names
and that sub-reducer
as values and returns a reducer function that passes the action along with
the correct state slice to each of the sub-reducers and creates the global state object by
combining the output of each&nbsp;sub-reducer.</p>
<p>This may be clarified more with our own version of a combine reducers&nbsp;function:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">combineReducers2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="p">{},</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">mapped</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">o</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">k</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">              </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="nx">k</span><span class="p">,</span>
<span class="w">              </span><span class="nx">slice</span><span class="o">:</span><span class="w"> </span><span class="nx">o</span><span class="p">[</span><span class="nx">k</span><span class="p">](</span><span class="nx">state</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="c1">// call k sub-reducer and get result</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">      </span><span class="p">))</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">reduced</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">mapped</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">s</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)=&gt;{</span>
<span class="w">          </span><span class="nx">s</span><span class="p">[</span><span class="nx">x</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]]</span><span class="o">=</span><span class="nx">x</span><span class="p">[</span><span class="s1">&#39;slice&#39;</span><span class="p">]</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="nx">s</span>
<span class="w">      </span><span class="p">},</span><span class="w"> </span><span class="p">{})</span>

<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">reduced</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>The above function gets an object (<tt class="docutils literal">o</tt>) with state slices and sub-reducers
as input and returns a function (that function is the resulting reducer)&nbsp;that:</p>
<ul class="simple">
<li>Creates an array (named <tt class="docutils literal">mapped</tt>) of objects with two attributes: <tt class="docutils literal">key</tt> for each attribute of <tt class="docutils literal">o</tt> and <tt class="docutils literal">slice</tt> after applying the sub-reducer to the corresponding state&nbsp;slice</li>
<li>Reduces and returns the above array (<tt class="docutils literal">reduced</tt>) to a single object that has attributes for each state slice and the resulting state slice as values (this is actually the global&nbsp;state)</li>
</ul>
<p>To show-off the <span class="caps">ES6</span> code (and my most sadistic tendencies),
the above code could be also writen like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">combineReducers3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">o</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="p">{},</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">o</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">k</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="nx">k</span><span class="p">,</span><span class="w"> </span><span class="nx">o</span><span class="p">[</span><span class="nx">k</span><span class="p">](</span><span class="nx">state</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span>
<span class="p">]).</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">s</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nx">x</span><span class="p">[</span><span class="mf">0</span><span class="p">]]</span><span class="o">:</span><span class="w"> </span><span class="nx">x</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span>
<span class="p">}),</span><span class="w"> </span><span class="p">{})</span>
</pre></div>
<p>I wouldn&#8217;t like to explain this - its more or less a more functional version of <tt class="docutils literal">combineReducers2</tt>.</p>
</div>
<div class="section" id="interlude-middlewares">
<h4><a class="toc-backref" href="#toc-entry-13">Interlude:&nbsp;Middlewares</a></h4>
<p>A redux middleware is <a class="reference external" href="http://redux.js.org/docs/advanced/Middleware.html">rather difficult to explain</a> technically but easier to explain
conceptually: What it does it that it can be used to extend the store&#8217;s dispatch by providing
extra functionality. We&#8217;ve already seen such functionality, the ability to use
thunk action creators (for action creators that don&#8217;t return the next state&nbsp;object).</p>
<p>If you take a look at the <tt class="docutils literal">createStore</tt> function, you&#8217;ll see that
its second parameter is called <tt class="docutils literal">enhancer</tt>. When <tt class="docutils literal">enhancer</tt>
is a function (like in our case where it is the
result of <tt class="docutils literal">applyMiddleware</tt>) the return value of <tt class="docutils literal">createStore</tt>
is <tt class="docutils literal"><span class="pre">enhancer(createStore(...))</span></tt> so it will call the result of <tt class="docutils literal">applyMiddleware</tt>
with the store as&nbsp;parameter.</p>
<p>Now, what does <tt class="docutils literal">applyMiddleware</tt>? It gets a variable
number of functions (using the spread <tt class="docutils literal">...</tt> operator) as input arguments (let&#8217;s call
them middlewares) and returns
<em>another</em> function (this is the <tt class="docutils literal">enhancer</tt> we mentioned in the previous paragraph)
that gets a store as an input and
returns the same store with its <tt class="docutils literal">dispatch</tt> method modified so that it will
call each middleware and pass the result to the next. So, in our case the
resulting store&#8217;s dispatch function would be something&nbsp;like:</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">reduxRouterMiddleware</span><span class="p">(</span><span class="nx">thunk</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">action</span><span class="p">)))</span>
</pre></div>
<p>Now, a middleware function looks like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">middleware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">store</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">next</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">//</span>
<span class="p">}</span>
</pre></div>
<p>it returns a function that gets the <tt class="docutils literal">store</tt> as input
and returns another function. This returned function
gets <tt class="docutils literal">next</tt> as an input. What is next? It&#8217;s just the
next <tt class="docutils literal">dispatch</tt> function to be called. So the first middleware will have the original
store&#8217;s <tt class="docutils literal">dispatch</tt> as its <tt class="docutils literal">next</tt> parameter, the second middleware will have the
result of passing the store&#8217;s <tt class="docutils literal">dispatch</tt> from the first middleware, etc. Something like
this: <tt class="docutils literal">middleware2Dispatch(next=middleware1Dispatch(next=storeDispatch))</tt>.</p>
<p>Another
explanation of the above is that a&nbsp;middleware:</p>
<ul class="simple">
<li>is a function (that gets a store to enhance as input) that&nbsp;returns</li>
<li>another function (that gets the next dispatcher to be called as input) that&nbsp;returns</li>
<li>another function (that gets an action as input) which&nbsp;is</li>
<li>the dispatcher modified by this&nbsp;middleware</li>
</ul>
<p>Let&#8217;s take a look at the thunk middleware to actually see what it looks&nbsp;like:</p>
<div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">thunkMiddleware</span><span class="p">({</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">next</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="p">=&gt;</span>
<span class="w">    </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;function&#39;</span><span class="w"> </span><span class="o">?</span>
<span class="w">      </span><span class="nx">action</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">      </span><span class="nx">next</span><span class="p">(</span><span class="nx">action</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>So, it gets the store (<tt class="docutils literal">dispatch</tt> and <tt class="docutils literal">getState</tt> are store attributes)
as an input and returns a function that gets <tt class="docutils literal">next</tt> (i.e
the next dispatcher to be called) as input. This function returns <em>another function</em>
(the modified <tt class="docutils literal">dispatch</tt>). Since this function is a dispatcher, it will get
an <tt class="docutils literal">action</tt> as an input and if that action
is a function it calls this function passing it dispatch (remember how we
said if we didn&#8217;t want to use thunk then we&#8217;d just create normal functions
to which we&#8217;d pass the dispatch as a parameter - that&#8217;s what it does here!).
If this action is not a function
(so it is a normal object) it just returns <tt class="docutils literal">dispatch(action)</tt> to dispatch&nbsp;it.</p>
<p>Finally, we&#8217;ll create a simple middleware that will output the action type and the
state for every&nbsp;dispatch:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">logStateMiddleware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">next</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// log the action type</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">())</span>
<span class="w">  </span><span class="c1">// now we must call next(action) to propagate and finally dispatch the action object</span>
<span class="w">  </span><span class="nx">next</span><span class="p">(</span><span class="nx">action</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
<p>just put it in the applyMiddleware parameter list and observe all state&nbsp;changes!</p>
</div>
</div>
<div class="section" id="reducers-js">
<h3><a class="toc-backref" href="#toc-entry-14">reducers.js</a></h3>
<p>This module contains the definition for our own defined sub-reducers that we combined
in the previous paragraph (<tt class="docutils literal">books, notification, ui, categories, authors</tt>) to create
the global reducer of the application. I&#8217;ve put everything in a single file, however
it is more common to create a <tt class="docutils literal">reducers</tt> directory and put every sub-reducer inside it
as a different module. Let&#8217;s start reviewing the code of the <tt class="docutils literal">reducers.js</tt> module:</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">notification</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="p">{},</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;SHOW_NOTIFICATION&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">notification_type</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">action</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">message</span><span class="p">,</span>
<span class="w">                </span><span class="nx">notification_type</span><span class="p">,</span>
<span class="w">            </span><span class="p">})</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;CLEAR_NOTIFICATION&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="p">{},</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;IS_LOADING&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">isLoading</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">isLoading</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;IS_SUBMITTING&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">isSubmitting</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">isSubmitting</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>The <tt class="docutils literal">notification</tt> and <cite>ui</cite> are two sub-reducers that control the state of the notification popup and if
the application is loading / is submitting. I won&#8217;t go into much detail about
them, they are really simple. However, notice that they both create a new state object
for each of their actions. To achieve this, the <tt class="docutils literal">Object.assign()</tt> method is used.
This method is defined like this:
<tt class="docutils literal">Object.assign(target, <span class="pre">...sources)</span></tt>. Its first parameter is an object (a new, empty object) while the rest
parameters (<tt class="docutils literal">sources</tt>) are other objects whose properties will be assigned <tt class="docutils literal">target</tt>. The rightmost members of
<tt class="docutils literal">sources</tt> overwrite the previous ones if they have the same names. So, for example the&nbsp;code</p>
<div class="highlight"><pre><span></span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">rows</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">results</span><span class="p">,</span>
<span class="w">    </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">count</span><span class="p">,</span>
<span class="p">});</span>
</pre></div>
<p>creates a new object which will have all the properties of the current <tt class="docutils literal">state</tt> with the exception of the
<tt class="docutils literal">rows</tt> and <tt class="docutils literal">count</tt> attributes which will get their values from the <tt class="docutils literal">action</tt>. This is a common idiom in
redux and you are going to see it all the time so please make sure that you grok it before continuing. Also,
notice that the new state is a new, empty object in which
all the attributes of the new state are copied - this is because
the old state cannot be&nbsp;mutated.</p>
<p>Now we&#8217;ll see the reducer that handles books. Before understanding the actual reducer, I will present
the initial value of the books state&nbsp;slice:</p>
<div class="highlight"><pre><span></span><span class="c1">//http://stackoverflow.com/a/5158301/119071</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">getParameterByName</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;[?&amp;]&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;=([^&amp;]*)&#39;</span><span class="p">).</span><span class="nx">exec</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">match</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\+/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">));</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">BOOKS_INITIAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">rows</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">page</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">    </span><span class="nx">sorting</span><span class="o">:</span><span class="w"> </span><span class="nx">getParameterByName</span><span class="p">(</span><span class="s1">&#39;sorting&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="nx">search</span><span class="o">:</span><span class="w"> </span><span class="nx">getParameterByName</span><span class="p">(</span><span class="s1">&#39;search&#39;</span><span class="p">),</span>
<span class="w">    </span><span class="nx">book</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="p">}</span>
</pre></div>
<p>As we see, the <tt class="docutils literal">BOOK_INITIAL</tt>
constant is used to setup an initial state for the books slice of the global state. The <tt class="docutils literal">BOOKS_INITIAL</tt>
attributs&nbsp;are:</p>
<ul class="simple">
<li><tt class="docutils literal">rows</tt>: The rows of the book&nbsp;table</li>
<li><tt class="docutils literal">count</tt>: The number of rows that are&nbsp;displayed</li>
<li><tt class="docutils literal">page</tt>: The current page we are&nbsp;on</li>
<li><tt class="docutils literal">sorting</tt>: User-defined&nbsp;sorting</li>
<li><tt class="docutils literal">search</tt>: User-search /&nbsp;filtering</li>
<li><tt class="docutils literal">book</tt>: The data of the book to be&nbsp;edited/displayed</li>
</ul>
<p>The <tt class="docutils literal">BOOK_INITIAL</tt> constant
gets the <tt class="docutils literal">sorting</tt> and the <tt class="docutils literal">search</tt> initial values from the <span class="caps">URL</span> to allow these parameters
to be initialized from the <span class="caps">URL</span> (so that using a url like <tt class="docutils literal"><span class="pre">#?search=foo</span></tt> will show all books
containing <tt class="docutils literal">foo</tt>). To get the parameters from the <span class="caps">URL</span> I&#8217;m using the <tt class="docutils literal">getParameterByName</tt>
function. Now, the actual reducer&nbsp;is:</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">books</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="nx">BOOKS_INITIAL</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;SHOW_BOOKS&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">rows</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">results</span><span class="p">,</span>
<span class="w">                </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">count</span><span class="p">,</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;SHOW_BOOK&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">book</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">book</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;CHANGE_PAGE&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">page</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">page</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;TOGGLE_SORTING&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">sorting</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">sorting</span><span class="o">==</span><span class="nx">action</span><span class="p">.</span><span class="nx">sorting</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nx">action</span><span class="p">.</span><span class="nx">sorting</span><span class="p">)</span><span class="o">:</span><span class="nx">action</span><span class="p">.</span><span class="nx">sorting</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;CHANGE_SEARCH&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">search</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">search</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ADD_BOOK&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">book</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">book</span><span class="p">,</span>
<span class="w">                </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="o">+</span><span class="mf">1</span><span class="p">,</span>
<span class="w">                </span><span class="nx">rows</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">...</span><span class="nx">state</span><span class="p">.</span><span class="nx">rows</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">action</span><span class="p">.</span><span class="nx">book</span><span class="p">,</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;UPDATE_BOOK&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="nx">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="nx">idx</span><span class="o">==-</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">book</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">book</span>
<span class="w">                </span><span class="p">});</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">book</span><span class="o">:</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">book</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">rows</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">...</span><span class="nx">state</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">idx</span><span class="p">),</span>
<span class="w">                        </span><span class="nx">action</span><span class="p">.</span><span class="nx">book</span><span class="p">,</span>
<span class="w">                        </span><span class="p">...</span><span class="nx">state</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">idx</span><span class="o">+</span><span class="mf">1</span><span class="p">),</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">});</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;DELETE_BOOK&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="nx">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">findIndex</span><span class="p">(</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">action</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="nx">idx</span><span class="o">==-</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">book</span><span class="o">:</span><span class="w"> </span><span class="kc">undefined</span>
<span class="w">                </span><span class="p">});</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span><span class="w"> </span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">book</span><span class="o">:</span><span class="w"> </span><span class="kc">undefined</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">count</span><span class="o">:</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">rows</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">...</span><span class="nx">state</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">idx</span><span class="p">),</span>
<span class="w">                        </span><span class="p">...</span><span class="nx">state</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">idx</span><span class="o">+</span><span class="mf">1</span><span class="p">),</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">});</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>The books subreducer handles the <tt class="docutils literal">SHOW_BOOKS, SHOW_BOOK, CHANGE_PAGE, TOGGLE_SORTING</tt> and <tt class="docutils literal">CHANGE_SEARCH</tt>
actions by retrieving the paramaters of these actions and returning a new books-state-slice object
with the correct parameters using <tt class="docutils literal">Object.assign</tt>.</p>
<p>The <tt class="docutils literal">ADD_BOOK</tt> action is a little more complicated: This action will be dispached when a new book is added with
the data of that new book as a parameter (<tt class="docutils literal">action.book</tt>). In order to make everything easier, I just append the new
book to the end of the books that are displayed on the
current page and increase the count number (I also set the new book to be the <tt class="docutils literal">book</tt> attribute
of the state). This means that the newly created book will not go to its correct place (based on the ordering) and
that the visible items will be more than the ajax page coun (also notice that if you add another book then the visible
items will also be increased by one more). This is not a problem (for me) since if the user changes page or does a search
everything will fall back to its place. However, if you don&#8217;t like it there are two solutions, one easier and one more&nbsp;difficult:</p>
<ul class="simple">
<li>Easier solution: When adding a book just <em>invalidate</em> (make undefined) the <tt class="docutils literal">books</tt> state attribute. This will result in an ajax call to reload the books and everything will be in place. However the user may not see the newly added book if it does not fall to the currently selected page (and there&#8217;d be an extra, unnecessary ajax&nbsp;call)</li>
<li>Harder solution: Depending on the sorting you may check if the current books should be displayed or not on the current page and push it to its correct place (and remove the last item of <tt class="docutils literal">rows</tt> so that count is not increased). Once again, the newly book may no be displayed at all if it does not belong to the visible&nbsp;page</li>
</ul>
<p>The <tt class="docutils literal">UPDATE_BOOK</tt> and <tt class="docutils literal">DELETE_BOOK</tt> actions are even more complex. I&#8217;ll only explain update, delete is more or less
the same (with the difference that update has the updated book as an action parameter while delete has only its id
as an acton parameter): First of all we check if the updated book is currently displayed (if one of the books of
<tt class="docutils literal">rows</tt> has the same <tt class="docutils literal">id</tt> as the updated book). If the book is not displayed then only the current edited book
is set to the new state. However, if it is displayed then it would need to be updated because the <tt class="docutils literal">rows</tt> array
does not know anything about the updated values of the&nbsp;book!</p>
<p>So, inside the <tt class="docutils literal">else</tt> branch, the <tt class="docutils literal">idx</tt> variable will hold its current index and the
<tt class="docutils literal">rows</tt> attribute of the new state will get the following&nbsp;value:</p>
<div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">...</span><span class="nx">state</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">idx</span><span class="p">),</span>
<span class="w">    </span><span class="nx">action</span><span class="p">.</span><span class="nx">book</span><span class="p">,</span>
<span class="w">    </span><span class="p">...</span><span class="nx">state</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">idx</span><span class="o">+</span><span class="mf">1</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
<p>The <tt class="docutils literal">...</tt> spread operator expands an array so, for example <tt class="docutils literal">[ <span class="pre">...[1,2,3]</span> ]</tt> would be like <tt class="docutils literal">[1,2,3]</tt>
and the <tt class="docutils literal">slice</tt> method gets two parameters and returns a copy of the array elements between them. Using
this knowledge, we can understand that the above code returns an array (<tt class="docutils literal">[]</tt>) that contains the books of
<tt class="docutils literal">rows</tt> from the first to the updated one (not including the updated one), the updated book
object (which we get
from <tt class="docutils literal">action</tt>) and the rest of the books of <tt class="docutils literal">rows</tt> (after the updated&nbsp;one).</p>
<p>The code for the <tt class="docutils literal">authors</tt> and <tt class="docutils literal">categories</tt> sub-reducers does not have any surprises so I won&#8217;t go
into detail about&nbsp;it.</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">AUTHORS_INITIAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="nx">AUTHORS_INITIAL</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">CATEGORIES_INITIAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">categories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">=</span><span class="nx">CATEGORIES_INITIAL</span><span class="p">,</span><span class="w"> </span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
<div class="section" id="the-global-state-tree">
<h4><a class="toc-backref" href="#toc-entry-15">The global state&nbsp;tree</a></h4>
<p>Remember that all the above are sub-reducers, each one taking only a slice
of the global state tree. They are all combined, along with the routing and
form reducers to create the global reducer&nbsp;function.</p>
<p>This also means, that the global state object will be something like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nx">books</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nx">notification</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nx">ui</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nx">categories</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nx">authors</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nx">routing</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">  </span><span class="nx">form</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="p">}</span>
</pre></div>
<p>We won&#8217;t see this object anywhere because each sub-reducer will get its corresponding
slice of that&nbsp;object.</p>
</div>
</div>
<div class="section" id="actions-js">
<h3><a class="toc-backref" href="#toc-entry-16">actions.js</a></h3>
<p>The <tt class="docutils literal">actions.js</tt> module should probably have been named <tt class="docutils literal">action_creators.js</tt> since
it actually contains redux action creators. Also, a common practice is create a folder
named <tt class="docutils literal">actions</tt> and put there individual modules that contain action creators for
the sub-reducers (in our case, for example there would be <tt class="docutils literal">books.js</tt>, <tt class="docutils literal">authors.s</tt> etc).</p>
<p>In any case, for simplicity I chose to just use a module named <tt class="docutils literal">actions.js</tt> and put
everything there. One important thing to keep in mind is that <tt class="docutils literal">actions.js</tt> contains both
normal action creators (i.e functions that return actions and should be &#8220;dispatched&#8221;)
<em>and</em> thunk action creators (i.e
functions that not necessarily return actions but can be &#8220;dispatcher&#8221;) - please see the
discussion about redux-thunk on a previous&nbsp;paragraph.</p>
<p>First of all, there&#8217;s a bunch of some simple action creators that just return
the corresponding action object with the correct parameters. Notice that
the action creators that end in <tt class="docutils literal">*Result</tt> are called when an
(async) ajax request returns, for example <tt class="docutils literal">showBooksResult</tt> will be
called when the book loading has returned and pass its result data to
the reducer. The other action creators change various parts of the state
object, for example <tt class="docutils literal">loadingChanged</tt> will create an action that when
dispatched it will set <tt class="docutils literal">ui.isLoading</tt> attribute
to the action&nbsp;parameter.</p>
<pre class="code literal-block">
showBooksResult(books) for &quot;SHOW_BOOKS&quot;,
showBookResult(book) for &quot;SHOW_BOOK&quot;,
addBookResult(book) for &quot;ADD_BOOK&quot;,
updateBookResult(book) for &quot;UPDATE_BOOK&quot;,
deleteBookResult(id) for &quot;DELETE_BOOK&quot;,

showAuthorsResult(authors) for &quot;SHOW_AUTHORS&quot;,
showAuthorResult(author) for &quot;SHOW_AUTHOR&quot;,
addAuthorResult(author) for &quot;ADD_AUTHOR&quot;,
updateAuthorResult(author) for &quot;UPDATE_AUTHOR&quot;,
deleteAuthorResult(id) &quot;DELETE_AUTHOR&quot;,

showCategoriesResult(categories) for &quot;SHOW_CATEGORIES&quot;,
showSubCategoriesResult(subcategories) for &quot;SHOW_SUBCATEGORIES&quot;,
loadingChanged(isLoading) for &quot;IS_LOADING&quot;,
submittingChanged(isSubmitting) for &quot;IS_SUBMITTING&quot;,
toggleSorting(sorting) for &quot;TOGGLE_SORTING&quot;,
changePage(page) for &quot;CHANGE_PAGE&quot;,
changeSearch(search) for 'CHANGE_SEARCH',
showSuccessNotification(message) for 'SHOW_NOTIFICATION' (type: success),
showErrorNotification(message) for 'SHOW_NOTIFICATION', (type: error)
hideNotification() for 'CLEAR_NOTIFICATION'
</pre>
<p>The following two are thunk action creators that are called when either the
user sorting or the search/filtering parameters of the displayed books are&nbsp;changed:</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">changeSearchAndLoadBooks</span><span class="p">(</span><span class="nx">search</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">changeSearch</span><span class="p">(</span><span class="nx">search</span><span class="p">))</span>
<span class="w">        </span><span class="nx">history</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">search</span><span class="o">:</span><span class="w"> </span><span class="nx">formatUrl</span><span class="p">(</span><span class="nx">getState</span><span class="p">().</span><span class="nx">books</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadBooks</span><span class="p">())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">toggleSortingAndLoadBooks</span><span class="p">(</span><span class="nx">sorting</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">toggleSorting</span><span class="p">(</span><span class="nx">sorting</span><span class="p">))</span>
<span class="w">        </span><span class="nx">history</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">search</span><span class="o">:</span><span class="w"> </span><span class="nx">formatUrl</span><span class="p">(</span><span class="nx">getState</span><span class="p">().</span><span class="nx">books</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadBooks</span><span class="p">())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Notice that these are thunk action creators (they return a function) and
the important thing that they do is that they call two other action creators
(<tt class="docutils literal">toggleSorting</tt> or <tt class="docutils literal">changeSearch</tt> and <tt class="docutils literal">loadBooks</tt>) and update the
<span class="caps">URL</span> using <tt class="docutils literal">history.push</tt>. The <tt class="docutils literal">history</tt> object is the one we had created in
the <tt class="docutils literal">store.js</tt> and its <tt class="docutils literal">push</tt> method changes the displayed <span class="caps">URL</span>. This
method <a class="reference external" href="https://github.com/reactjs/history/blob/master/docs/Location.md#location-descriptors">uses a location descriptor</a> that contains
an attribute for the path name and an attribute for the query parameters
- in or case we just want to update the query parameters (i.e <tt class="docutils literal"><span class="pre">#/url/?search=query1&amp;sorting=query2</span></tt>),
so we pass an obect with only the <tt class="docutils literal">search</tt> attribute. The <tt class="docutils literal">formatUrl</tt> function, to
which the books state slice is passsed, is a rather simple function
that checks if either the sorting or the search should exist in th <span class="caps">URL</span> and
returns the full <span class="caps">URL</span>. This function is contained in the <tt class="docutils literal">util/formatters.s</tt> module.</p>
<p>The following thunk action creators are used for asynchronous, ajax&nbsp;queries:</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadBooks</span><span class="p">(</span><span class="nx">page</span><span class="o">=</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getState</span><span class="p">();</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">page</span><span class="p">,</span><span class="w"> </span><span class="nx">sorting</span><span class="p">,</span><span class="w"> </span><span class="nx">search</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`//127.0.0.1:8000/api/books/?format=json&amp;page=</span><span class="si">${</span><span class="nx">page</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">sorting</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">url</span><span class="o">+=</span><span class="sb">`&amp;ordering=</span><span class="si">${</span><span class="nx">sorting</span><span class="si">}</span><span class="sb">`</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="nx">search</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">url</span><span class="o">+=</span><span class="sb">`&amp;search=</span><span class="si">${</span><span class="nx">search</span><span class="si">}</span><span class="sb">`</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadingChanged</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>
<span class="w">        </span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showBooksResult</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
<span class="w">                </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadingChanged</span><span class="p">(</span><span class="kc">false</span><span class="p">));</span>
<span class="w">            </span><span class="p">},</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>


<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadBookAction</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`//127.0.0.1:8000/api/books/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">/?format=json`</span><span class="p">;</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadingChanged</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>
<span class="w">        </span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showBookResult</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadingChanged</span><span class="p">(</span><span class="kc">false</span><span class="p">));</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadSubCategories</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">category</span><span class="p">));</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadAuthors</span><span class="p">(</span><span class="nx">page</span><span class="o">=</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// similar to loadBooks</span>
<span class="p">}</span>


<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadAuthor</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// similar to loadBook</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadCategories</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// similar to loadBooks</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadSubCategories</span><span class="p">(</span><span class="nx">category</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nx">dispatch</span><span class="p">,</span><span class="w"> </span><span class="nx">getState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">category</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showSubCategoriesResult</span><span class="p">([]));</span>
<span class="w">            </span><span class="k">return</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`//127.0.0.1:8000/api/subcategories/?format=json&amp;category=</span><span class="si">${</span><span class="nx">category</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>

<span class="w">        </span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showSubCategoriesResult</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>The <tt class="docutils literal">loadBooks</tt> thunk action creator creates the <span class="caps">URL</span> parameters that should
be passed to the <span class="caps">REST</span> <span class="caps">API</span> using the <tt class="docutils literal">getState()</tt> method that returns the current state.
It then dispatches the <tt class="docutils literal">loadingChanged</tt> action so that the <tt class="docutils literal">ui.isLoading</tt> will be
changed to true. After that it asynchronously calls the load books <span class="caps">REST</span> <span class="caps">API</span> passing
it the created url and returns.
Since this is a thunk action there&#8217;s no problem that nothing is returned. When the
ajax call returns it will dispatch the <tt class="docutils literal">showBooksResult</tt>, passing the book data to
change the state with the loaded book data and the <tt class="docutils literal">loadingChanged</tt> to hide the loading
spinner. Also, please notice that I&#8217;ve put the return of the ajax call inside a <tt class="docutils literal">setTimeout</tt>
to emulate a 1 second delay and be able to see the loading&nbsp;spinner.</p>
<p>I may have used
setTimeout in some other places to make sure to be able to emulate server-side delays so
<em>please don&#8217;t forget to remove these &#8220;setTimeout&#8220;s from your&nbsp;code!</em></p>
<p>The <tt class="docutils literal">loadBook</tt> is more or less the same - however here only a single book&#8217;s data will
be loaded. When this book is loaded the <tt class="docutils literal">loadSubCategories</tt> action will also be dispatched,
passing it the loaded book&#8217;s category (so that the correct subcategories based on the category
will be displayed to the&nbsp;form).</p>
<p>I won&#8217;t go into any detail about the other thunk action creators, they are simpler than those
we&#8217;ve already described, except <tt class="docutils literal">loadSubCategories</tt>: This one, checks if there&#8217;s a category
and if not it will just set the displayed subcategories to and empty list (by dispatching
<tt class="docutils literal"><span class="pre">showSubCategoriesResult([])</span></tt>). If the category is not empty, it will retrieve asynchronously the
subcategories of the passed&nbsp;category.</p>
</div>
<div class="section" id="components-app-js">
<h3><a class="toc-backref" href="#toc-entry-17">components/app.js</a></h3>
<p>We&#8217;ll now start explaining the actual react components (modified to be used through redux of course).
The parent of all other components is the <tt class="docutils literal">App</tt> which, as we&#8217;ve already seen in <tt class="docutils literal">main.js</tt>
is connected with the parent&nbsp;route:</p>
<div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">App</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">isLoading</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">ui</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>

<span class="w">            </span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">}</span>

<span class="w">            </span><span class="o">&lt;</span><span class="nx">NotificationContainer</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">LoadingContainer</span><span class="w"> </span><span class="nx">isLoading</span><span class="o">=</span><span class="p">{</span><span class="nx">isLoading</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>

<span class="w">            </span><span class="o">&lt;</span><span class="nx">br</span><span class="w"> </span><span class="o">/&gt;</span>

<span class="w">            </span><span class="o">&lt;</span><span class="nx">StatPanel</span><span class="w"> </span><span class="nx">bookLength</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="w"> </span><span class="nx">authorLength</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">authors</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Link</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;button&#39;</span><span class="w"> </span><span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="o">&gt;</span><span class="nx">Books</span><span class="o">&lt;</span><span class="err">/Link&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Link</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;button&#39;</span><span class="w"> </span><span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/authors/&quot;</span><span class="o">&gt;</span><span class="nx">Authors</span><span class="o">&lt;</span><span class="err">/Link&gt;</span>

<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">componentDidMount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">loadBooks</span><span class="p">,</span><span class="w"> </span><span class="nx">loadAuthors</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">loadBooks</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">authors</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">loadAuthors</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">mapStateToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">books</span><span class="o">:</span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span><span class="p">,</span>
<span class="w">    </span><span class="nx">authors</span><span class="o">:</span><span class="nx">state</span><span class="p">.</span><span class="nx">authors</span><span class="p">,</span>
<span class="w">    </span><span class="nx">ui</span><span class="o">:</span><span class="nx">state</span><span class="p">.</span><span class="nx">ui</span><span class="p">,</span>
<span class="p">})</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">mapDispatchToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dispatch</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">bindActionCreators</span><span class="p">({</span>
<span class="w">    </span><span class="nx">loadBooks</span><span class="p">,</span><span class="w"> </span><span class="nx">loadAuthors</span>
<span class="p">},</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">)</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">connect</span><span class="p">(</span><span class="nx">mapStateToProps</span><span class="p">,</span><span class="w"> </span><span class="nx">mapDispatchToProps</span><span class="p">)(</span><span class="nx">App</span><span class="p">);</span>
</pre></div>
<p>As we can see, there&#8217;s an internal component (named <tt class="docutils literal">App</tt>) but we export the <tt class="docutils literal"><span class="pre">connect``ed</span> component.
One interesting thing to notice is that ``App</tt> is an <span class="caps">ES6</span> class based react component (i.e it extends
<tt class="docutils literal">React.Component</tt> &#8212; I&#8217;ll talk a bit about these components while taking a look at
the <tt class="docutils literal">BookSearchPanel</tt> which has some more interesting&nbsp;features).</p>
<p>Concerning the exported,
connected component, it
uses <tt class="docutils literal">mapStateToProps</tt> for defining the state attributes that should be passed as properties
to the componnt (<tt class="docutils literal"><span class="pre">state.{books,</span> authors, ui}</tt>) and <tt class="docutils literal">mapDispatchToProps</tt> for defining the <tt class="docutils literal">props</tt> methods that will
dispatch actions. To make <tt class="docutils literal">mapDispatchToProps</tt> more compact I&#8217;ve used the <tt class="docutils literal">bindActionCreators</tt> method from redux.
This method gets an object whose values are action creators and the <tt class="docutils literal">dispatch</tt> (from store) and returns an object
whose values are the dispatch-enabled corresponding action creators. So, in our case
the returned object would be something&nbsp;like:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nx">loadBooks</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadBooks</span><span class="p">()),</span>
<span class="w">    </span><span class="nx">loadAuthors</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadAuthors</span><span class="p">()),</span>
<span class="p">}</span>
</pre></div>
<p>This object of course could be created by hand, however <tt class="docutils literal">bindActionCreators</tt> would be really useful if we wanted
to dispatch lots of actions in a component (or if we had seperated our action creators to different modules) &#8212;
we could for example do something like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">actions</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../actions&#39;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">mapDispatchToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dispatch</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">bindActionCreators</span><span class="p">(</span><span class="nx">actions</span><span class="p">,</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">)</span>
</pre></div>
<p>The <tt class="docutils literal">import *</tt> statemenet will create an object named item that will have all the exported actions and then
<tt class="docutils literal">bindActionCreators</tt> will return an object that dispatches these actions &#8212; passing this <tt class="docutils literal">mapDispatchToProps</tt>
to connect will allow your component to call every action and automatically dispatch&nbsp;it.</p>
<p>The internal component returns a <tt class="docutils literal">&lt;div /&gt;</tt> containing, among others <tt class="docutils literal">{this.props.children}</tt> - this
will be provided by rendering the child routes. It also renders a <tt class="docutils literal">NotificationContainer</tt> to render the notifications, a
<tt class="docutils literal">LoadingContainer</tt> to display a css &#8220;loading&#8221; spinner and a <tt class="docutils literal">StatPanel</tt> to display some stats about books and
authors. It also renders two Links one for the books table and one for the authors&nbsp;table.</p>
<p>Beyond these, when the component is mounted it checks if the authors and books have been loaded and if not, it
dispatches the <tt class="docutils literal">loadBooks</tt> and <tt class="docutils literal">loadAuthors</tt> actions (remember, because we used <tt class="docutils literal">mapDispatchToProps</tt> by
calling these methods from <tt class="docutils literal">props</tt> they&#8217;ll be automatically dspatched when&nbsp;called).</p>
<p>Let&#8217;s take a quick look at the three small components that are contained in <tt class="docutils literal">App</tt></p>
<div class="section" id="components-notification-js">
<h4><a class="toc-backref" href="#toc-entry-18">components/notification.js</a></h4>
<p>This component is responsible for displaying a notification if there&#8217;s an active one.
It also defines an internal component and exports a connected version of it, passing it the
<tt class="docutils literal">notification</tt> slice of the state tree and an <tt class="docutils literal">onHide</tt> method that dispatches the
<tt class="docutils literal">hidNotification</tt> action.</p>
<p>When the internal component is rendered, it checks to see if the notification should be
displayed (<tt class="docutils literal">isActive</tt> will be true if there&#8217;s an actual message) and select the color
of the background. Finally, it passes this information along with some styling
to the real <tt class="docutils literal">Notification</tt>  component from <tt class="docutils literal"><span class="pre">react-notification</span></tt>.</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">NotificationContainer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="nx">notification_type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">.</span><span class="nx">notification</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">onHide</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">isActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">message</span><span class="o">?</span><span class="kc">true</span><span class="o">:</span><span class="kc">false</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">color</span><span class="p">;</span>

<span class="w">    </span><span class="k">switch</span><span class="p">(</span><span class="nx">notification_type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;SUCCESS&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">colors</span><span class="p">.</span><span class="nx">success</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;ERROR&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">colors</span><span class="p">.</span><span class="nx">danger</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;INFO&#39;</span><span class="o">:</span>
<span class="w">            </span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">colors</span><span class="p">.</span><span class="nx">info</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Notification</span>
<span class="w">        </span><span class="nx">isActive</span><span class="o">=</span><span class="p">{</span><span class="nx">isActive</span><span class="p">}</span>
<span class="w">        </span><span class="nx">message</span><span class="o">=</span><span class="p">{</span><span class="nx">message</span><span class="o">?</span><span class="nx">message</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">}</span>
<span class="w">        </span><span class="nx">dismissAfter</span><span class="o">=</span><span class="p">{</span><span class="mf">5000</span><span class="p">}</span>
<span class="w">        </span><span class="nx">onDismiss</span><span class="o">=</span><span class="p">{</span><span class="w"> </span><span class="p">()=&gt;</span><span class="nx">onHide</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="nx">action</span><span class="o">=</span><span class="s1">&#39;X&#39;</span>
<span class="w">        </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="w"> </span><span class="p">()=&gt;</span><span class="nx">onHide</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="nx">style</span><span class="o">=</span><span class="p">{{</span>
<span class="w">            </span><span class="nx">bar</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">background</span><span class="o">:</span><span class="w"> </span><span class="nx">color</span><span class="p">,</span>
<span class="w">                </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="nx">fontSize</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;2rem&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nx">active</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">left</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;3rem&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#FFCCBC&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="nx">fontSize</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;3rem&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="nx">border</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1 pt solid black&#39;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}}</span>
<span class="w">    </span><span class="o">/&gt;</span>
<span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">mapStateToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">notification</span><span class="o">:</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">notification</span>
<span class="p">})</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">mapDispatchToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dispatch</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">onHide</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">hideNotification</span><span class="p">())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">})</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">connect</span><span class="p">(</span><span class="nx">mapStateToProps</span><span class="p">,</span><span class="w"> </span><span class="nx">mapDispatchToProps</span><span class="p">)(</span><span class="nx">NotificationContainer</span><span class="p">);</span>
</pre></div>
<p>Notice the <tt class="docutils literal"><span class="pre">style={{</span> .. }}</tt> snippet above: The external <tt class="docutils literal">{}</tt> are the Javascript code
inclusion tags of <span class="caps">JSX</span> while the internal <tt class="docutils literal">{}</tt> are for creating a normal javascript object
that defines the styling of the&nbsp;notification.</p>
</div>
<div class="section" id="creating-a-re-usable-notification">
<h4><a class="toc-backref" href="#toc-entry-19">Creating a re-usable&nbsp;notification</a></h4>
<p>Please notice that although I&#8217;ve implemented this as a connected component this is not the only
way to do it! Actually, probably my implementation is less-reusable from the others I will&nbsp;propose&#8230;</p>
<p>In any case, instead of implementing <tt class="docutils literal">NotificationContainer</tt> as a connected component we could
have implemented it as a normal, non connected component that would receive two properties
from its parent:
the <tt class="docutils literal">notification</tt> slice of state and an <tt class="docutils literal">onHide</tt> function that would dispatch
<tt class="docutils literal">hideNotification</tt>. Doing this would be very easy, just change
<tt class="docutils literal">App</tt> so that its <tt class="docutils literal">mapDispatchToProps</tt> would also return the <tt class="docutils literal">notification</tt> slice of
the state - and pass this slice as a property to the <tt class="docutils literal">NotificationContainer</tt>. Also, the
<tt class="docutils literal">onHide</tt> method should have been also defined in the <tt class="docutils literal">mapDispatchToProps</tt> of <tt class="docutils literal">App</tt> and
passed as a property to <tt class="docutils literal">NotificationContainer</tt>. Notice that this makes <tt class="docutils literal">NotificationContainer</tt>
a reusable component since we could pass anything we wanted as the <tt class="docutils literal">notification</tt> object and
<tt class="docutils literal">onHide</tt> method.</p>
<p>Also, if we needed to implement <tt class="docutils literal">NotificationContainer</tt> as a connected object but we still
needed it to be reusable we&#8217;d then export the non-connected <tt class="docutils literal">NotificationContainer</tt>
and create a bunch of <tt class="docutils literal">ConnectedNotificationContainer</tt> that would
define <tt class="docutils literal">mapStateToProps</tt> and <tt class="docutils literal">mapDispatchToProps</tt>
and export the connected component. This way, each <tt class="docutils literal">ConnecteNotificationContainer</tt> would
receive a different state slice and a different <tt class="docutils literal">onHide</tt> method, for example we may had
different notifications for books and different notifications for authors. Notice that this
approach, i.e create a reusable non-connected component and use it to create connected
components by defining their <tt class="docutils literal">mapStateToProps</tt> and <tt class="docutils literal">mapDispatchToProps</tt> is the
approach proposed by react-redux to create&nbsp;components.</p>
<p>Finally, one last comment on this approach that may clarify more
the purpose of  <tt class="docutils literal">mapStateToProps</tt> and
<tt class="docutils literal">mapDispatchToProps</tt> of connected components
is that these two functions are <em>dual</em>&nbsp;(mirror):</p>
<ul class="simple">
<li>Using <tt class="docutils literal">mapStateToProps</tt> we define which parts of the state will actually be passed to the component (= reading the&nbsp;state).</li>
<li>Using <tt class="docutils literal">mapDispatchToProps</tt> we define the actions which will be dispatched by the component (= changing/writing the&nbsp;state)</li>
</ul>
</div>
<div class="section" id="components-loading-js">
<h4><a class="toc-backref" href="#toc-entry-20">components/loading.js</a></h4>
<p>This is a really simple component: If the <tt class="docutils literal">isLoading</tt> parameter is true, display a <tt class="docutils literal">div</tt> with the <tt class="docutils literal">loading</tt> class:</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">({</span><span class="nx">isLoading</span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">    </span><span class="p">{</span><span class="nx">isLoading</span><span class="o">?&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;loading&quot;</span><span class="o">&gt;</span><span class="nx">Loading</span><span class="o">&amp;</span><span class="err">#</span><span class="mf">8230</span><span class="p">;</span><span class="o">&lt;</span><span class="err">/div&gt;:null}</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>
<p>The important thing here is what the <tt class="docutils literal">loading</tt> class does to display the spinner - I&#8217;m leaving it to you to check
it at <tt class="docutils literal">static/cssloader.css</tt> (this is not my css code - I&#8217;ve copied it from <a class="reference external" href="http://codepen.io/MattIn4D/pen/LiKFC">http://codepen.io/MattIn4D/pen/LiKFC</a>&nbsp;).</p>
<p>Also, please notice that in this module we just export a function, taking an object which
has an <tt class="docutils literal">isLoading</tt> attribute as a parameter. That&#8217;s a functional react component: A
function that gets a <tt class="docutils literal">params</tt> object as an input and implements the render method,
returning a&nbsp;component.</p>
<p>Using functional components is recommended for reasons that
are far too obvious (easy to test - just call the function, idemponent - no state
to keep track of, less code to write, easier to the eye, <em>functional</em> )
- you should use class based components only when absolutely
necessary (i.e when the component needs to keep some local state or when it needs
to do stuff on <tt class="docutils literal">componentWillMount</tt>).</p>
</div>
<div class="section" id="components-statpanel-js">
<h4><a class="toc-backref" href="#toc-entry-21">components/StatPanel.js</a></h4>
<p>Another very simple functional component - just display the number of books and authors from the passed&nbsp;parameter.</p>
</div>
</div>
<div class="section" id="components-bookpanel-js">
<h3><a class="toc-backref" href="#toc-entry-22">components/BookPanel.js</a></h3>
<p>Continuing our top-down approach on exploring the project, we&#8217;ll now talk
about the <tt class="docutils literal">BookPanel</tt> component which is displayed by the <tt class="docutils literal">IndexRoute</tt>.
Before talking about the actual component, I&#8217;d like to present
the <tt class="docutils literal">getCols</tt> function that is used to create an array of the columns
that will be displayed by the <tt class="docutils literal">Table</tt> we render in this&nbsp;panel.</p>
<p>As we can see, the <tt class="docutils literal">getCols</tt> gets one parameter which is the sort method &#8212;
this method gets a string and uses it to toggle sorting by this string.
We use a function to create the columns instead of a constant because
that <tt class="docutils literal">sort_function</tt> needs to <tt class="docutils literal">dispatch</tt> an action &#8212; <tt class="docutils literal">dispatch</tt> is available from
the <tt class="docutils literal">props</tt> that the functional <tt class="docutils literal">BookPanel</tt> component receives so the function
will be called from inside that functional&nbsp;component.</p>
<p>Each column, has up to four&nbsp;parameters:</p>
<ul class="simple">
<li>A <tt class="docutils literal">key</tt> which is the attribute  of the <tt class="docutils literal">row</tt> object to&nbsp;display</li>
<li>A <tt class="docutils literal">title</tt> which is the column&nbsp;title</li>
<li>A <tt class="docutils literal">format</tt> (optional) which may be used to display the value of that column&nbsp;and</li>
<li>A <tt class="docutils literal">sorting</tt> (optional) which is a function that will be called when the column title is clicked (so that the sorting is changed ) - this attribute is created using the <tt class="docutils literal">sort_method</tt></li>
</ul>
<p>We&#8217;ll see how these attributes are used by the <tt class="docutils literal">Table</tt> in the corresponding section. Five
columns have been defined: <tt class="docutils literal">id</tt> (which, when clicked will update the book
that&#8217;s where <tt class="docutils literal">format</tt> is used), <tt class="docutils literal">title</tt>, <tt class="docutils literal">category_name</tt>, <tt class="docutils literal">publish_date</tt>
and <tt class="docutils literal">author_name</tt>:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">getCols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sort_method</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ID&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="nx">x</span><span class="p">=&gt;</span><span class="o">&lt;</span><span class="nx">Link</span><span class="w"> </span><span class="nx">to</span><span class="o">=</span><span class="p">{</span><span class="sb">`/book_update/</span><span class="si">${</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">/`</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/Link&gt;,</span>
<span class="w">        </span><span class="nx">sorting</span><span class="o">:</span><span class="w"> </span><span class="nx">sort_method</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Title&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">sorting</span><span class="o">:</span><span class="w"> </span><span class="nx">sort_method</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)},</span>
<span class="w">    </span><span class="p">{</span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;category_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Category&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">sorting</span><span class="o">:</span><span class="w"> </span><span class="nx">sort_method</span><span class="p">(</span><span class="s1">&#39;subcategory__name&#39;</span><span class="p">)},</span>
<span class="w">    </span><span class="p">{</span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;publish_date&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Publish date&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">sorting</span><span class="o">:</span><span class="w"> </span><span class="nx">sort_method</span><span class="p">(</span><span class="s1">&#39;publish_date&#39;</span><span class="p">)},</span>
<span class="w">    </span><span class="p">{</span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;author_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Author&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">sorting</span><span class="o">:</span><span class="w"> </span><span class="nx">sort_method</span><span class="p">(</span><span class="s1">&#39;author__last_name&#39;</span><span class="p">)},</span>
<span class="p">]</span>
</pre></div>
<p>The actual (exported) <tt class="docutils literal">BookPanel</tt> is a connected component - we need to use connect because we can&#8217;t
actually pass properties or <tt class="docutils literal">dispatch</tt> to this component since it is
rendered through a route (and not as a child of another component), so it
must be connected to the store through <tt class="docutils literal">connect</tt> to be able to receive
state attributes and <tt class="docutils literal">dispatch</tt>. We pass the <tt class="docutils literal">books</tt> state
slice as a property using <tt class="docutils literal">mapStateToProps</tt> and use the same techique as
before in <tt class="docutils literal">App</tt>  with
<tt class="docutils literal">bindActionCreators</tt> to create auto-dispatchable&nbsp;actions.</p>
<p>As we can see, after retrieving the needed properties from the <tt class="docutils literal">books</tt> state slice
and the actions to dispatch, we define an <tt class="docutils literal">onSearchChanged</tt> function that will be
passed to the <tt class="docutils literal">BookSearchPanel</tt> to be called when the search query is&nbsp;changed.</p>
<p>Next, the <tt class="docutils literal">sort_method</tt> is defined. This is
a function that gets a <tt class="docutils literal">key</tt> parameter and returns another function that
dispatches <tt class="docutils literal">toggleSortingAndLoadBooks</tt> passing it that <tt class="docutils literal">key</tt>. This is the
parameter that is passed to <tt class="docutils literal">getCols</tt>. So, for example for the <tt class="docutils literal">id</tt>,
the result of the <tt class="docutils literal">sort_method</tt> would be the following function:
<tt class="docutils literal">() =&gt; <span class="pre">toggleSortingAndLoadBooks('id')</span></tt>.</p>
<p>Finally, the <tt class="docutils literal">BookPanel</tt> renders the&nbsp;following:</p>
<ul class="simple">
<li>A <tt class="docutils literal">BookSearchPanel</tt> passing it the <tt class="docutils literal">search</tt> property and the <tt class="docutils literal">onSearchChanged</tt> action</li>
<li>A <tt class="docutils literal">Link</tt> to create a new&nbsp;book</li>
<li>A <tt class="docutils literal">Table</tt> passing it the <tt class="docutils literal">sorting</tt> and <tt class="docutils literal">rows</tt> parameters and the <tt class="docutils literal">cols</tt> constant we just&nbsp;defined</li>
<li>A <tt class="docutils literal">PagingPanel</tt> passing it the total number of books (<tt class="docutils literal">count</tt>), the current page (<tt class="docutils literal">page</tt>) and two methods <tt class="docutils literal">onNextPage</tt> and <tt class="docutils literal">onPreviousPage</tt> that will be called when switch to the next or previous&nbsp;page.</li>
</ul>
<p>As we can see, the <tt class="docutils literal">onNextPage</tt> and <tt class="docutils literal">onPreviousPage</tt> functions dispach the <tt class="docutils literal">changePage</tt> action passing it
the page to change to and reload the books by dispatch <tt class="docutils literal">loadBooks</tt>. Instead of this we could create
a <tt class="docutils literal">changePageAndLoadBooks</tt> thunk action creator that would call these two methods when dispatched
(similarly to how <tt class="docutils literal">changeSearchAndLoadBooks</tt> and <tt class="docutils literal">toggleSortingAndLoadBooks</tt> have been implemented)
- I&#8217;m leaving it like this to show all&nbsp;possibilities:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">BookPanel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">rows</span><span class="p">,</span><span class="w"> </span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">page</span><span class="p">,</span><span class="w"> </span><span class="nx">sorting</span><span class="p">,</span><span class="w"> </span><span class="nx">search</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">.</span><span class="nx">books</span><span class="p">;</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">loadBooks</span><span class="p">,</span><span class="w"> </span><span class="nx">changePage</span><span class="p">,</span><span class="w"> </span><span class="nx">toggleSortingAndLoadBooks</span><span class="p">,</span><span class="w"> </span><span class="nx">changeSearchAndLoadBooks</span><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">onSearchChanged</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">changeSearchAndLoadBooks</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">sort_method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">toggleSortingAndLoadBooks</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">cols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getCols</span><span class="p">(</span><span class="nx">sort_method</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">BookSearchPanel</span><span class="w"> </span><span class="nx">search</span><span class="o">=</span><span class="p">{</span><span class="nx">search</span><span class="p">}</span><span class="w"> </span><span class="nx">onSearchChanged</span><span class="o">=</span><span class="p">{</span><span class="nx">onSearchChanged</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;twelve columns&quot;</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Book</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Link</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;button button-primary&#39;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="nx">fontSize</span><span class="o">:</span><span class="s1">&#39;1em&#39;</span><span class="p">}}</span><span class="w"> </span><span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/book_create/&quot;</span><span class="o">&gt;+&lt;</span><span class="err">/Link&gt;&lt;/h3&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Table</span><span class="w"> </span><span class="nx">sorting</span><span class="o">=</span><span class="p">{</span><span class="nx">sorting</span><span class="p">}</span><span class="w"> </span><span class="nx">cols</span><span class="o">=</span><span class="p">{</span><span class="nx">cols</span><span class="p">}</span><span class="w"> </span><span class="nx">rows</span><span class="o">=</span><span class="p">{</span><span class="nx">rows</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">PagingPanel</span><span class="w"> </span><span class="nx">count</span><span class="o">=</span><span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="w"> </span><span class="nx">page</span><span class="o">=</span><span class="p">{</span><span class="nx">page</span><span class="p">}</span><span class="w"> </span><span class="nx">onNextPage</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">changePage</span><span class="p">(</span><span class="nx">page</span><span class="o">+</span><span class="mf">1</span><span class="p">);</span>
<span class="w">            </span><span class="nx">loadBooks</span><span class="p">()</span>
<span class="w">        </span><span class="p">}}</span><span class="w"> </span><span class="nx">onPreviousPage</span><span class="o">=</span><span class="p">{</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">changePage</span><span class="p">(</span><span class="nx">page</span><span class="o">-</span><span class="mf">1</span><span class="p">);</span>
<span class="w">            </span><span class="nx">loadBooks</span><span class="p">()</span>
<span class="w">        </span><span class="p">}}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">mapStateToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">books</span><span class="o">:</span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span><span class="p">,</span>
<span class="p">})</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">mapDispatchToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">dispatch</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">bindActionCreators</span><span class="p">({</span>
<span class="w">    </span><span class="nx">loadBooks</span><span class="p">,</span><span class="w"> </span><span class="nx">changePage</span><span class="p">,</span><span class="w"> </span><span class="nx">toggleSortingAndLoadBooks</span><span class="p">,</span><span class="w"> </span><span class="nx">changeSearchAndLoadBooks</span>
<span class="p">},</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">)</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">connect</span><span class="p">(</span><span class="nx">mapStateToProps</span><span class="p">,</span><span class="w"> </span><span class="nx">mapDispatchToProps</span><span class="p">)(</span><span class="nx">BookPanel</span><span class="p">);</span>
</pre></div>
<div class="section" id="components-booksearchpanel-js">
<h4><a class="toc-backref" href="#toc-entry-23">components/BookSearchPanel.js</a></h4>
<p>The <tt class="docutils literal">BookSearchPanel</tt> is a component used for searching books. What
is interesting about this component is that it has internal state (i.e
state that is not reflected to the global search tree). Notice that
<tt class="docutils literal">BookSearchPanel</tt> is an <span class="caps">ES6</span> class component. Here are some of its
characteristics as opposed to non-<span class="caps">ES6</span> react&nbsp;components:</p>
<ul class="simple">
<li>It extends <tt class="docutils literal">React.Component</tt> instead of using <tt class="docutils literal">React.CreateClass</tt></li>
<li>It has a constructor that initializes the local state instead of implementing <tt class="docutils literal">getInitialState</tt></li>
<li>It does not automatically bind the methods to <tt class="docutils literal">this</tt> so we do it in the constructor (or else <tt class="docutils literal">this</tt> would be undefined in <tt class="docutils literal">onSearchChange</tt> and <tt class="docutils literal">onClearSearch</tt>) - <em>be very careful with that, its a common&nbsp;problem</em></li>
</ul>
<p>So, what happens
here? We render an <span class="caps">HTML</span> <tt class="docutils literal">input</tt> element and call <tt class="docutils literal">this.onSearchChange</tt>
method. This method retrieves the current value of the input (using <tt class="docutils literal">this.refs</tt>)
and, if the previous change was more than 400 ms ago calls the provided
(through <tt class="docutils literal">props</tt>) <tt class="docutils literal">onSearchChanged</tt> method that will dispatch the
<tt class="docutils literal">changeSearchAndLoadBooks</tt> action with the current value as a parameter
(notice however that <tt class="docutils literal">this.setState</tt> is <em>always</em> called immediately or else the
user keypresses wouldn&#8217;t be reflected to the&nbsp;input).</p>
<p>The whole thing with the <tt class="docutils literal">ths.promise</tt> and <tt class="docutils literal">clearInterval</tt> is to make
sure that the provided <tt class="docutils literal">onSearchChanged</tt> will not be called too often
(i.e it will be called 400 ms after the last&nbsp;keypress):</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">SearchPanel</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">super</span><span class="p">()</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">onSearchChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onSearchChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">onClearSearch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">onClearSearch</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;one-fourth column&quot;</span><span class="o">&gt;</span>
<span class="w">                    </span><span class="nx">Filter</span><span class="o">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">nbsp</span><span class="p">;</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="nx">input</span><span class="w"> </span><span class="nx">ref</span><span class="o">=</span><span class="s1">&#39;search&#39;</span><span class="w"> </span><span class="nx">name</span><span class="o">=</span><span class="s1">&#39;search&#39;</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="w"> </span><span class="nx">defaultValue</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">search</span><span class="p">}</span><span class="w"> </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">search</span><span class="p">}</span><span class="w"> </span><span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">onSearchChange</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                    </span><span class="p">{(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">search</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">search</span><span class="p">)</span><span class="o">?&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">onClearSearch</span><span class="p">}</span><span class="w"> </span><span class="o">&gt;</span><span class="nx">x</span><span class="o">&lt;</span><span class="err">/button&gt;:&#39;&#39;}</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">onSearchChange</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">findDOMNode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">search</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">promise</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">clearInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">promise</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
<span class="w">            </span><span class="nx">search</span><span class="o">:</span><span class="w"> </span><span class="nx">query</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onSearchChanged</span><span class="p">(</span><span class="nx">query</span><span class="p">),</span><span class="w"> </span><span class="mf">400</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">onClearSearch</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
<span class="w">            </span><span class="nx">search</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onSearchChanged</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Let&#8217;s take a closer look at the <tt class="docutils literal">&lt;input&gt;</tt> element:</p>
<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">input</span><span class="w"> </span><span class="nx">ref</span><span class="o">=</span><span class="s1">&#39;search&#39;</span><span class="w"> </span><span class="nx">name</span><span class="o">=</span><span class="s1">&#39;search&#39;</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="w"> </span><span class="nx">defaultValue</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">search</span><span class="p">}</span><span class="w"> </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">search</span><span class="p">}</span><span class="w"> </span><span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">onSearchChange</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>
<p>The <tt class="docutils literal">ref</tt> property is used to reference this element using <tt class="docutils literal">ReactDOM.findDOMNode</tt> - that&#8217;s
one possible way to retrieve the value of this object. Another way would be to add an <tt class="docutils literal">event</tt>
parameter to <tt class="docutils literal">onSearchChange</tt> - this parameter would receive the <span class="caps">DOM</span> event of the change so
the value of the element could be retrieved using <tt class="docutils literal">event.target.value</tt>.</p>
<p>The difference between the <tt class="docutils literal">defaultValue</tt> and <tt class="docutils literal">value</tt> parameters is really important: The
<tt class="docutils literal">defaultValue</tt> is just the initial value of this specific input and it will be equal to
<tt class="docutils literal">props.search</tt> (so that if the user enters a <span class="caps">URL</span> which has a search query parameter this will
be pre-filled here). On the other hand, the <tt class="docutils literal">value</tt> parameter is the current value of
the element and will be equal to the <tt class="docutils literal">state.search</tt>. When the user types in the input,
the <tt class="docutils literal">onSearchChange</tt> will be called which will <em>always</em> change the <tt class="docutils literal">state.search</tt>
and the <tt class="docutils literal">value</tt> will get the correct, new value (or
else the change wouldn&#8217;t be reflected to the&nbsp;user)!</p>
<p>Finally concerning the clear search query button,
when there&#8217;s a search query a  <tt class="docutils literal">x</tt> button will be displayed
if there&#8217;s something to the input field which, when
clicked the search local state will be cleared
and the provided <tt class="docutils literal">onSearchChanged</tt> will be called with an empty&nbsp;query.</p>
</div>
<div class="section" id="components-table-js">
<h4><a class="toc-backref" href="#toc-entry-24">components/Table.js</a></h4>
<p>The <tt class="docutils literal">Table</tt> is a reusable, functional react component that is used for both books and&nbsp;authors.</p>
<p>First of all, we define a formatHeader function that is used to format the
table header: This function gets an object with key and label as parameters (which
is the column to be formated) and a sorting parameter (which is the current table&#8217;s
sorting) and returns the label with a <tt class="docutils literal">'+'</tt> in front of it if the sorting is ascending
by this column or a <tt class="docutils literal"><span class="pre">'-'</span></tt> if the sorting is descending by this column or just the
label if this column is not used for&nbsp;sorting:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">formatHeader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="p">},</span><span class="w"> </span><span class="nx">sorting</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">sorting</span><span class="o">==</span><span class="nx">key</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="o">+</span><span class="nx">label</span><span class="p">)</span><span class="o">:</span><span class="p">(</span>
<span class="w">    </span><span class="p">(</span><span class="nx">sorting</span><span class="o">==</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nx">key</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nx">label</span><span class="p">)</span><span class="o">:</span><span class="nx">label</span>
<span class="p">)</span>
</pre></div>
<p>The <tt class="docutils literal">Table</tt>
uses the props we mentioned before when talking about
<tt class="docutils literal">BookPanel</tt>. When it is rendered, the headers of the table are constructed by
applying a map method on the items of the <tt class="docutils literal">cols</tt> attribute. Remember that map
will apply a function to all items of a list and return a new list with the results.
So this will create a list of correctly formatted <tt class="docutils literal">&lt;th&gt;</tt> elements.</p>
<p>In our case, the mapper
checks if each column has a <tt class="docutils literal">sorting</tt> attribute and if yes it
creates a clickable header that calls <tt class="docutils literal">sorting</tt> when clicked and is
formatted with <tt class="docutils literal">formatHeader</tt> (remember <tt class="docutils literal">sort_method</tt> we talked about
in <tt class="docutils literal">BookPanel</tt>). If there&#8217;s no <tt class="docutils literal">sorting</tt> for that column it just
displays the column&nbsp;header.</p>
<p>The rows of the table are created using two maps, one that maps the <tt class="docutils literal">rows</tt>
which, for each row maps <tt class="docutils literal">cols</tt> to get the individual values for this row and column.
So, for the rows a list of <tt class="docutils literal">&lt;tr&gt;</tt> elements each one including the correct
<tt class="docutils literal">&lt;td&gt;</tt> elements will be&nbsp;created:</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">.</span><span class="nx">cols</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">col</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">th</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">col</span><span class="p">.</span><span class="nx">key</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">col</span><span class="p">.</span><span class="nx">sorting</span><span class="o">?&lt;</span><span class="nx">a</span><span class="w"> </span><span class="nx">href</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">            </span><span class="nx">col</span><span class="p">.</span><span class="nx">sorting</span><span class="p">()</span>
<span class="w">        </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">formatHeader</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span><span class="w"> </span><span class="nx">props</span><span class="p">.</span><span class="nx">sorting</span><span class="p">)}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/a&gt;:col.label</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/th&gt;)</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">rows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">props</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">row</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">tr</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">props</span><span class="p">.</span><span class="nx">cols</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">col</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">td</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">col</span><span class="p">.</span><span class="nx">key</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="p">{(</span><span class="nx">col</span><span class="p">.</span><span class="nx">format</span><span class="o">?</span><span class="nx">col</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span><span class="o">:</span><span class="nx">row</span><span class="p">[</span><span class="nx">col</span><span class="p">.</span><span class="nx">key</span><span class="p">])}</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/td&gt;)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/tr&gt;)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">table</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">thead</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">headers</span><span class="p">}</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/tr&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/thead&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">tbody</span><span class="o">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">rows</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/tbody&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/table&gt;</span>
<span class="p">}</span>
</pre></div>
<p>The <tt class="docutils literal">key</tt> property I am passing to all elements that belong to a list is to
help React identify these child elements - we&#8217;d get a <tt class="docutils literal">Warning: Each
child in an array or iterator should have a unique &quot;key&quot; prop.</tt>
error without this&nbsp;property.</p>
<p>Also, please notice that the <tt class="docutils literal">const headers</tt> and <tt class="docutils literal">rows</tt> we&#8217;ve defined are there just
for clarity - we could instead put them directly inside the returned <tt class="docutils literal">&lt;table&gt;</tt>
and have a cool, totally <em>functional function</em>!</p>
</div>
<div class="section" id="components-pagingpanel-js">
<h4><a class="toc-backref" href="#toc-entry-25">components/PagingPanel.js</a></h4>
<p>Another functional and reusable component - this one has  params with the
attributes <tt class="docutils literal">page</tt>, <tt class="docutils literal">page_size</tt>, <tt class="docutils literal">count</tt>, <tt class="docutils literal">onNextPage</tt>,
<tt class="docutils literal">onPreviousPage</tt> and, after finding out the total number of pages
it renders the current page number and the total pages number along
with two buttons that will execute the <tt class="docutils literal">onNextPage</tt> and <tt class="docutils literal">onPreviousPage</tt>
that are passed as properties (these methods will dispatch the changePage and
loadBooks actions as we&#8217;ve already seen in <tt class="docutils literal">BookPanel</tt>). One thing to notice
here is that the next and previous page buttons will only be rendered if
we are not in the first or last page (so if there&#8217;s only one page you won&#8217;t
see any&nbsp;buttons).</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">({</span><span class="nx">page</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">page_size</span><span class="o">=</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">onNextPage</span><span class="p">,</span><span class="w"> </span><span class="nx">onPreviousPage</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">props</span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">total_pages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">page_size</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">page</span><span class="o">==</span><span class="mf">1</span><span class="o">?</span><span class="kc">null</span><span class="o">:&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">            </span><span class="nx">onPreviousPage</span><span class="p">();</span>
<span class="w">        </span><span class="p">}}</span><span class="o">&gt;&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">&lt;</span><span class="err">/button&gt;}</span>
<span class="w">        </span><span class="o">&amp;</span><span class="nx">nbsp</span><span class="p">;</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="p">{</span><span class="nx">page</span><span class="p">}</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="p">{</span><span class="nx">total_pages</span><span class="p">}</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">nbsp</span><span class="p">;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">page</span><span class="o">==</span><span class="nx">total_pages</span><span class="o">?</span><span class="kc">null</span><span class="o">:&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">            </span><span class="nx">onNextPage</span><span class="p">();</span>
<span class="w">        </span><span class="p">}}</span><span class="o">&gt;&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="o">&lt;</span><span class="err">/button&gt;}</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">}</span>
</pre></div>
<p>The same paging panel could be used for any table we wanted to have paging: Just pass it
the page number, page size, total number of items and what to do when next or previous page
buttons are&nbsp;clicked.</p>
</div>
<div class="section" id="interlude-a-more-functional-component">
<h4><a class="toc-backref" href="#toc-entry-26">Interlude: A more functional&nbsp;component</a></h4>
<p>How could we make <tt class="docutils literal">PagingPanel</tt> more functional (i.e how could we remove the
<tt class="docutils literal">const total_pages</tt> definition) ? The easy way would be to just substitute it
with its definition inside the returned <tt class="docutils literal">&lt;div&gt;</tt> however we&#8217;d need to substitute it <em>two</em> times
so we&#8217;d loose our precious DRYness! So we&#8217;d need to think of another&nbsp;way.</p>
<p>People from the django world will be familiar with the  <a class="reference external" href="https://docs.djangoproject.com/es/1.9/ref/templates/builtins/#with">with template tag</a>. This tag
is used in django templates to assign a complex value to a constant and use this value
instead of the complex value. Something like&nbsp;this</p>
<pre class="code literal-block">
{% with simple=a.complex|calculation %}
    In here I can just use {{ simple }} instead of {{ a.complex|calculation }}!
{% endwith %}
</pre>
<p>Having such a concept in <span class="caps">ES6</span> would be ideal for our case! I am not sure if something
like <tt class="docutils literal">with</tt> actually exists, however we can really easy emulate it with a function
closure, something like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">({</span><span class="nx">page</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">page_size</span><span class="o">=</span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="nx">count</span><span class="p">,</span><span class="w"> </span><span class="nx">onNextPage</span><span class="p">,</span><span class="w"> </span><span class="nx">onPreviousPage</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">props</span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="nx">total_pages</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">page</span><span class="o">==</span><span class="mf">1</span><span class="o">?</span><span class="kc">null</span><span class="o">:&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;&amp;</span><span class="nx">lt</span><span class="p">;</span><span class="o">&lt;</span><span class="err">/button&gt;}</span>
<span class="w">        </span><span class="o">&amp;</span><span class="nx">nbsp</span><span class="p">;</span><span class="w"> </span><span class="nx">Page</span><span class="w"> </span><span class="p">{</span><span class="nx">page</span><span class="p">}</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="p">{</span><span class="nx">total_pages</span><span class="p">}</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">nbsp</span><span class="p">;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">page</span><span class="o">==</span><span class="nx">total_pages</span><span class="o">?</span><span class="kc">null</span><span class="o">:&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;&amp;</span><span class="nx">gt</span><span class="p">;</span><span class="o">&lt;</span><span class="err">/button&gt;}</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="p">)(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">page_size</span><span class="p">))</span>
</pre></div>
<p>We define a function that gets <tt class="docutils literal">total_pages</tt> as a parameter and returns <em>another function</em> (
this one is the actual render method of the <tt class="docutils literal">PagingPanel</tt>) and <em>call the outer function</em>
passing it the value we want to give to <tt class="docutils literal">total_pages</tt>. This way, the <tt class="docutils literal">total_pages</tt> will
have a value in the inner function! Thank you, function&nbsp;closure!!!</p>
<p>Now <tt class="docutils literal">PagingPanel</tt> is also a completely functional function&nbsp;component!</p>
</div>
</div>
<div class="section" id="components-bookform">
<h3><a class="toc-backref" href="#toc-entry-27">components/BookForm</a></h3>
<p>The last book-related component is <tt class="docutils literal">BookForm</tt>. This component is used to both create and update
a book. It also has a delete button for removing books. To decide if this is a create or an
update form, it relies on the parameter passed from the route - remember how the two routes have
been defined in <tt class="docutils literal">main.js</tt>:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">Route</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;/book_create/&quot;</span> <span class="na">component</span><span class="o">=</span><span class="s">{BookForm}</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">Route</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;/book_update/:id&quot;</span> <span class="na">component</span><span class="o">=</span><span class="s">{BookForm}</span> <span class="p">/&gt;</span>
</pre></div>
<p>So, although create and update render the same component, their difference
is that update will contain the <tt class="docutils literal">id</tt> of the book to be
updated in the url. This (along with any other url parameters) is passed by react-router as a property
through an object named <tt class="docutils literal">params</tt> to the <tt class="docutils literal">BookForm</tt> component, so, when updating a book
the <tt class="docutils literal">props.params.id</tt> of <tt class="docutils literal">BookForm</tt>
should have a&nbsp;value.</p>
<p>The <tt class="docutils literal">BookForm</tt> is a connected component (because it needs access to the state slice and dispatch and
is rendered through a route), however because it is also a redux-form, a special
method (<tt class="docutils literal">reduxForm</tt>) is used to connect the component and pass the form-related props to the&nbsp;component:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">mapStateToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">initial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">book</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">book</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">initial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">book</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">book</span><span class="o">:</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">books</span><span class="p">.</span><span class="nx">book</span><span class="p">,</span>
<span class="w">        </span><span class="nx">categories</span><span class="o">:</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">categories</span><span class="p">,</span>
<span class="w">        </span><span class="nx">authors</span><span class="o">:</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">authors</span><span class="p">,</span>
<span class="w">        </span><span class="nx">ui</span><span class="o">:</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">ui</span><span class="p">,</span>
<span class="w">        </span><span class="nx">initialValues</span><span class="o">:</span><span class="w"> </span><span class="nx">initial</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">reduxForm</span><span class="p">({</span>
<span class="w">    </span><span class="nx">form</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bookForm&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">fields</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;category&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;subcategory&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;publish_date&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;author&#39;</span><span class="w"> </span><span class="p">],</span>
<span class="w">    </span><span class="nx">validate</span>
<span class="p">},</span><span class="w"> </span><span class="nx">mapStateToProps</span><span class="p">)(</span><span class="nx">BookForm</span><span class="p">);</span>
</pre></div>
<p>The <tt class="docutils literal">mapStateToProps</tt> contains a bunch of required things from the state (we need
the current <tt class="docutils literal">book</tt> that is edited, the <tt class="docutils literal">categories</tt> to select from, the <tt class="docutils literal">authors</tt> to also
select from and the <tt class="docutils literal">ui</tt> to find out if submitting has finished and render the buttons
as enabled/disabled). Beyond these, we see
that there&#8217;s an <tt class="docutils literal">initialValues</tt> attribute to the object returned from <tt class="docutils literal">mapStateToProps</tt>. This
attribute is used to initialize the form fields. So if our form has
fields named <tt class="docutils literal">title</tt> and <tt class="docutils literal">category</tt>, if the <tt class="docutils literal">initial</tt> object had <tt class="docutils literal">title</tt> and
<tt class="docutils literal">category</tt> attributes the form fields would be initialized by them. In our case, we just
check if the <tt class="docutils literal">props.params.id</tt> method is defined and the to-be-updated book has been loaded
to the state and just assign the to-be-updated <tt class="docutils literal">book</tt> to <tt class="docutils literal">initialValues</tt>.</p>
<p>The <tt class="docutils literal">reduxForm</tt> method is used to <tt class="docutils literal">connect</tt> the form component: Beyond the usual
<tt class="docutils literal">mapStateToProps</tt> and <tt class="docutils literal">mapDispatchToProps</tt> (we don&#8217;t actually use <tt class="docutils literal">mapDispatchToProps</tt> here
because I feel that just getting <tt class="docutils literal">dispatch</tt> is more clear),
it needs a required parameter which is the object used to initialize the redux-form form: This
object should&nbsp;have</p>
<ul class="simple">
<li>A <tt class="docutils literal">form</tt> attribute with the name of the form. This must be unique among all forms in your application and will be used as a parameter to the actions that redux-form will&nbsp;dispatch</li>
<li>A <tt class="docutils literal">fields</tt> string array with the names of the form fields. For each one of them a <tt class="docutils literal">field</tt> will be passed to the <tt class="docutils literal">props.fields</tt> array in the form&nbsp;component</li>
<li>A optional <tt class="docutils literal">validate</tt> attribute that is a function that will be called when the form fields are&nbsp;changed</li>
</ul>
<p>The validate function gets an object with the field names with their corresponding values as attributes and
should return another object with the field names that have an error and the error message. In our case,
we want the <tt class="docutils literal">title</tt> to be required and the date to be valid (if exists), so the <tt class="docutils literal">validate</tt> is:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">validate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">values</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">errors</span><span class="p">.</span><span class="nx">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Required&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">publish_date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">re</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">/^\d{4}-\d{2}-\d{2}$/</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">re</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">publish_date</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">errors</span><span class="p">.</span><span class="nx">publish_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Invalid&#39;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">errors</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>I just used a very simple regular expression to check the validity of
the date (it must be in the format <span class="caps">YYYY</span>-<span class="caps">MM</span>-<span class="caps">DD</span>) - this is just to make
a point, for normal date rendered you should use <a class="reference external" href="http://momentjs.com/">moment.js</a>.</p>
<p>This validate function is called <em>whenever a form field is changed</em> so, depending on the implementation
of course, the error messages will be shown and hidden as the user types in the fields. Please notice
that when the user starts typing in a field in an empty form, this field may be valid but all other
fields will be empty - to avoid displaying an error message for fields that the user has not been yet
been able to modify, we can use the <tt class="docutils literal">touched</tt> property of each field &#8212; only display the
field&#8217;s error message if this field has been <tt class="docutils literal">touched</tt>. When the form is submitted all fields are
changed to <tt class="docutils literal">touched</tt> so all error messages will be&nbsp;displayed.</p>
<p>The internal <tt class="docutils literal">BookForm</tt> is an <span class="caps">ES6</span> class based component that needs to do some things
when the <tt class="docutils literal">componentDidMount</tt> method is&nbsp;called:</p>
<ul class="simple">
<li>Check if the categories have been loaded - if not dispatch the <tt class="docutils literal">loadCategories</tt> action</li>
<li>Check if the this is an update and if yes, check to see if the to-be-updated book needs to be loaded and, if it needs dispatch <tt class="docutils literal">loadBook</tt> with the book&#8217;s&nbsp;id</li>
</ul>
<div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">BookForm</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">componentDidMount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">categories</span><span class="p">.</span><span class="nx">categories</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadCategories</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">book</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadBook</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// New book</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">fields</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">title</span><span class="p">,</span><span class="w"> </span><span class="nx">category</span><span class="p">,</span><span class="w"> </span><span class="nx">subcategory</span><span class="p">,</span><span class="w"> </span><span class="nx">publish_date</span><span class="p">,</span><span class="w"> </span><span class="nx">author</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="nx">handleSubmit</span><span class="p">,</span><span class="w"> </span><span class="nx">dispatch</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">params</span><span class="p">;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">isSubmitting</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">ui</span><span class="p">;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">categories</span><span class="p">,</span><span class="w"> </span><span class="nx">subcategories</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">categories</span><span class="p">;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">authors</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span>

<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">tsubmit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">submit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span><span class="nx">id</span><span class="p">);</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">dsubmit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">del</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">form</span><span class="w"> </span><span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">tsubmit</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;row&#39;</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;six columns&#39;</span><span class="o">&gt;</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="nx">Input</span><span class="w"> </span><span class="nx">label</span><span class="o">=</span><span class="s1">&#39;Title&#39;</span><span class="w"> </span><span class="nx">field</span><span class="o">=</span><span class="p">{</span><span class="nx">title</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;row&#39;</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;six columns&#39;</span><span class="o">&gt;</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="nx">Select</span><span class="w"> </span><span class="nx">label</span><span class="o">=</span><span class="s1">&#39;Category&#39;</span><span class="w"> </span><span class="nx">field</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">}</span><span class="w"> </span><span class="nx">options</span><span class="o">=</span><span class="p">{</span><span class="nx">categories</span><span class="p">}</span><span class="w"> </span><span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nx">category</span><span class="p">.</span><span class="nx">onChange</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
<span class="w">                        </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadSubCategories</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span>
<span class="w">                    </span><span class="p">}}</span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;six columns&#39;</span><span class="o">&gt;</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="nx">Select</span><span class="w"> </span><span class="nx">label</span><span class="o">=</span><span class="s1">&#39;Subcategory&#39;</span><span class="w"> </span><span class="nx">field</span><span class="o">=</span><span class="p">{</span><span class="nx">subcategory</span><span class="p">}</span><span class="w"> </span><span class="nx">options</span><span class="o">=</span><span class="p">{</span><span class="nx">subcategories</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;row&#39;</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;six columns&#39;</span><span class="o">&gt;</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="nx">DatePicker</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;u-full-width&quot;</span><span class="w"> </span><span class="nx">label</span><span class="o">=</span><span class="s1">&#39;Publish Date&#39;</span><span class="w"> </span><span class="nx">field</span><span class="o">=</span><span class="p">{</span><span class="nx">publish_date</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;six columns&#39;</span><span class="o">&gt;</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="nx">Select</span><span class="w"> </span><span class="nx">label</span><span class="o">=</span><span class="s1">&#39;Author&#39;</span><span class="w"> </span><span class="nx">field</span><span class="o">=</span><span class="p">{</span><span class="nx">author</span><span class="p">}</span><span class="w"> </span><span class="nx">options</span><span class="o">=</span><span class="p">{</span>
<span class="w">                        </span><span class="nx">authors</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="o">:</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">a</span><span class="p">.</span><span class="nx">first_name</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">a</span><span class="p">.</span><span class="nx">last_name</span><span class="si">}</span><span class="sb">`</span><span class="p">}))</span>
<span class="w">                    </span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isSubmitting</span><span class="p">}</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;button button-primary&#39;</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">tsubmit</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="nx">Save</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">id</span><span class="o">?&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isSubmitting</span><span class="p">}</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s1">&#39;button&#39;</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;button button-primary&#39;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="nx">danger</span><span class="p">}}</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">dsubmit</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="nx">Delete</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/button&gt;:null}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/form&gt;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
<p>The <tt class="docutils literal">render</tt> method of <tt class="docutils literal">BookForm</tt> defines (for convenience) a bunch of constants which are
attributes of <tt class="docutils literal">props</tt>:</p>
<ul class="simple">
<li>The <tt class="docutils literal">fields</tt> object contains the field attributes of the form which have been defined through the <tt class="docutils literal">reduxForm</tt> function.</li>
<li>The <tt class="docutils literal">handleSubmit</tt> is also provided by <tt class="docutils literal">reduxForm</tt> and is used to submit the form - I&#8217;ll explain it a bit&nbsp;later</li>
<li>The <tt class="docutils literal">dispatch</tt> is provided by <tt class="docutils literal">connect</tt> (remember, <tt class="docutils literal">reduxForm</tt> is a special <tt class="docutils literal">connect</tt>). If you don&#8217;t use <tt class="docutils literal">mapDispatchToProps</tt> then <tt class="docutils literal">connect</tt> will provide <tt class="docutils literal">dispatch</tt> to <tt class="docutils literal">props</tt> to use it as you&nbsp;like</li>
<li>The <tt class="docutils literal">id</tt> is from the route - it will have value when updating and will be undefined when creating a new&nbsp;book</li>
<li>The <tt class="docutils literal">isSubmitting</tt>, <tt class="docutils literal">categories</tt>, <tt class="docutils literal">subcategories</tt> and <tt class="docutils literal">authors</tt> are provided from the state attributes through <tt class="docutils literal">mapStateToProps</tt></li>
<li>The <tt class="docutils literal">tsubmit</tt> and <tt class="docutils literal">dsubmit</tt> are used when the form is submitted or the Delete button is clicked. As we&#8217;ll see the <tt class="docutils literal">tsubmit</tt> is passed as an argument to <tt class="docutils literal">handleSubmit</tt> while the <cite>dsubmit`</cite> is used as it&nbsp;is.</li>
</ul>
<p>Beyond <tt class="docutils literal">fields</tt> and <tt class="docutils literal">handleSubmit</tt> a <tt class="docutils literal">reduxForm</tt> enabled form component has various other
<a class="reference external" href="http://erikras.github.io/redux-form/#/api/props?_k=y5rbd2">properties that you can use</a>, like <tt class="docutils literal">active</tt>, <tt class="docutils literal">dirty</tt>, <tt class="docutils literal">error</tt>, <tt class="docutils literal">pristine</tt> etc.
Each <tt class="docutils literal">field</tt> provided from <tt class="docutils literal">reduxForm</tt> also has a bunch of properties, like
<tt class="docutils literal">active</tt>, <tt class="docutils literal">checked</tt>, <tt class="docutils literal">dirty</tt>, <tt class="docutils literal">error</tt>,
<tt class="docutils literal">onBlur</tt>, <tt class="docutils literal">onChange</tt>, <tt class="docutils literal">onFocus</tt>,
<tt class="docutils literal">pristine</tt>, <tt class="docutils literal">touched</tt>,
<tt class="docutils literal">valid</tt>, <tt class="docutils literal">value</tt>, <tt class="docutils literal">visited</tt>. I won&#8217;t use most of these here however please make sure
that you are familiar with these when using&nbsp;redux-form.</p>
<p>After defining the constants, the <tt class="docutils literal">render</tt> method returns the actual component.
Here we are using a bunch of child components we&#8217;ve defined to render the input
fields, like <tt class="docutils literal">Input</tt>, <tt class="docutils literal">DatePicker</tt> and <tt class="docutils literal">Select</tt> which will be explained
later. For each one of these components we pass the corresponding <tt class="docutils literal">field</tt>
property along with the label we want to show. There are some interesting things
in the parameters we pass to these input&nbsp;components:</p>
<p>All fields except <tt class="docutils literal">category</tt> use their own <tt class="docutils literal">onChange</tt>. For the <tt class="docutils literal">category</tt>
field we pass a custom <tt class="docutils literal">onChange</tt> function that will override the <tt class="docutils literal">field</tt>
onChange in order to dispatch <tt class="docutils literal">loadSubCategories</tt> when the <tt class="docutils literal">category</tt>
is changed (notice that in the custom <tt class="docutils literal">onChange</tt>
I actually call the <tt class="docutils literal">category.onChange</tt> first and then
use <tt class="docutils literal">event.target.value</tt> to get the current value of the dropdown to pass it
to the dispatched <tt class="docutils literal">loadSubCategories</tt>).</p>
<p>The <tt class="docutils literal">Select</tt> fields get an <tt class="docutils literal">options</tt> parameter which should be an array
with <tt class="docutils literal">id/name</tt> objects. For <tt class="docutils literal">authors</tt> we create that array on the fly
using <tt class="docutils literal">map</tt> (since an author object has a <tt class="docutils literal">first_name</tt> and <tt class="docutils literal">last_name</tt>).</p>
<p>The submit and delete buttons will be enabled or disabled depending on the <tt class="docutils literal">isSubmitting</tt> flag,
and will call <tt class="docutils literal">handleClick(tsubmit)</tt> or <tt class="docutils literal">dsubmit</tt> correspondingly. Also, the Delete button will
be hidden if no <tt class="docutils literal">id</tt> is&nbsp;provided.</p>
<p>The <tt class="docutils literal">handleSubmit</tt> method provided by <tt class="docutils literal">reduxForm</tt> will run the <tt class="docutils literal">validate</tt> function passing it
the values from the form (notice that this is synchronous validation, we could also do asynchronous -
on the server- validation for example to immediately check if a username is already used), and if
the validation does not return any errors, it will submit the form.
Submitting the form means that <tt class="docutils literal">handleSubmit</tt> will
either call <tt class="docutils literal">this.props.onSubmit</tt> <em>or</em> will call the argument of <tt class="docutils literal">handleSubmit</tt> (that&#8217;s what
we&#8217;ve done here), passing it the data of the&nbsp;form.</p>
<p>In our case, we want to pass the id of the book to be updated (or undefined when the form
is used to create a book) to the submit function, that&#8217;s why I am assigning
<tt class="docutils literal">submit.bind(undefined,id)</tt> to <tt class="docutils literal">tsubmit</tt> (which is what is passed to <tt class="docutils literal">handleSubmit</tt>) - this
will return a new function with the <tt class="docutils literal">id</tt> as its first argument. The <tt class="docutils literal">handleSubmit</tt> also
passes the <tt class="docutils literal">values</tt> of the form as an object along with the <tt class="docutils literal">dispatch</tt> function, so
<tt class="docutils literal">submit</tt> is a function with three&nbsp;arguments:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">submit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">values</span><span class="p">,</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;//127.0.0.1:8000/api/books/&#39;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`//127.0.0.1:8000/api/books/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">/`</span>
<span class="w">        </span><span class="nx">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;PUT&#39;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">submittingChanged</span><span class="p">(</span><span class="kc">true</span><span class="p">))</span>

<span class="w">    </span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
<span class="w">        </span><span class="nx">type</span><span class="p">,</span>
<span class="w">        </span><span class="nx">url</span><span class="p">,</span>
<span class="w">        </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="nx">values</span><span class="p">,</span>
<span class="w">        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">submittingChanged</span><span class="p">(</span><span class="kc">false</span><span class="p">))</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showSuccessNotification</span><span class="p">(</span><span class="s1">&#39;Success!&#39;</span><span class="p">))</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">updateBookResult</span><span class="p">(</span><span class="nx">d</span><span class="p">))</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">addBookResult</span><span class="p">(</span><span class="nx">d</span><span class="p">))</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">routeActions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">));</span>

<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">submittingChanged</span><span class="p">(</span><span class="kc">false</span><span class="p">))</span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showErrorNotification</span><span class="p">(</span><span class="sb">`Error (</span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb"> - </span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">statusText</span><span class="si">}</span><span class="sb">) while saving: </span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">responseText</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="p">))</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">};</span>
</pre></div>
<p>As we can see it just checks if the <tt class="docutils literal">id</tt> has a value and creates the
url and the <span class="caps">HTTP</span> method for the update (either a <tt class="docutils literal"><span class="caps">POST</span></tt> when creatign a new book or
a <tt class="docutils literal"><span class="caps">PUT</span></tt> when updating an existing one). It will then <tt class="docutils literal">dispatch</tt> the
<tt class="docutils literal">submittingChanged</tt> action to change the <span class="caps">UI</span> (disable the buttons) and do the ajax call. When
the call returns, if everything was ok it will <tt class="docutils literal">dispatch</tt> the <tt class="docutils literal">submittingChanged</tt>
(with false as a parameter), the <tt class="docutils literal">showSuccessNotification</tt> (with success as parameter),
either <tt class="docutils literal">updateBookResult</tt> or <tt class="docutils literal">addBookResult</tt> with the retrieved data as paramater
(depending if there was an <tt class="docutils literal">id</tt>) and finally it will change the <span class="caps">URL</span> to <tt class="docutils literal">/</tt> to display
the books table. If there was an error it will once again dispatch the
<tt class="docutils literal">submittingChanged</tt> action to turn off the submit flag of the state and
<tt class="docutils literal">showErrorNotification</tt> with information on the error. The url won&#8217;t change
so that the user will be able to fix the error and retry&nbsp;submitting.</p>
<p>The <tt class="docutils literal">del</tt> function is a little different. We bind not only with <tt class="docutils literal">id</tt> but also
with <tt class="docutils literal">dispatch</tt> because we don&#8217;t call it through <tt class="docutils literal">handleSubmit</tt>
(since when deleting no validation is actually needed)
but directly as the <tt class="docutils literal">onclick</tt> handler of the delete button
(so we must pass dispatch&nbsp;manually):</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">del</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">dispatch</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`//127.0.0.1:8000/api/books/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">/`</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
<span class="w">        </span><span class="nx">type</span><span class="p">,</span>
<span class="w">        </span><span class="nx">url</span><span class="p">,</span>
<span class="w">        </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showSuccessNotification</span><span class="p">(</span><span class="s1">&#39;Success!&#39;</span><span class="p">))</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">deleteBookResult</span><span class="p">(</span><span class="nx">id</span><span class="p">))</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">routeActions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">));</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showErrorNotification</span><span class="p">(</span><span class="sb">`Error (</span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb"> - </span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">statusText</span><span class="si">}</span><span class="sb">) while saving: </span><span class="si">${</span><span class="nx">d</span><span class="p">.</span><span class="nx">responseText</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="p">))</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">};</span>
</pre></div>
<p>This function sends a <tt class="docutils literal"><span class="caps">DELETE</span></tt> method to the correct url and, if everything
was ok <tt class="docutils literal">dispatches</tt> the <tt class="docutils literal">showSuccessNotification</tt>, <tt class="docutils literal">deleteBookResult</tt> and
<tt class="docutils literal">routeActions.push</tt>, similarly with <tt class="docutils literal">submit</tt>.</p>
<p>One thing that I&#8217;d like to discuss here is the nature of the <tt class="docutils literal">submit</tt> and <tt class="docutils literal">del</tt>
functions: These function do dispatch other actions but they are not implemented
as thunks so, in order
to be able to actually dispatch something they need to retrieve <tt class="docutils literal">dispatch</tt>
as a parameter
(please remember the discussion on the redux-thunk section and the difference
between <tt class="docutils literal">dispatch(actionCreator)</tt> and <tt class="docutils literal">actionCreator(dispatch)</tt> ). The
<tt class="docutils literal">submit</tt> function  receives <tt class="docutils literal">dispatch</tt> from <tt class="docutils literal">handleSubmit</tt> while we pass
dispatch directly (using <tt class="docutils literal">bind</tt>) to the <tt class="docutils literal">del</tt> function.</p>
<p>I could
have implemented them as thunks (and put them to the <tt class="docutils literal">actions</tt> module) however
I feel that leaving them here
will make the <span class="caps">API</span> of the application more compact (since if these functions
had been put in the actions module they would need to be exported so they&#8217;d
be a part of the public <span class="caps">API</span> of this application - however these two are only
called from <tt class="docutils literal">BookForm</tt>) and also their purpose and integration with <tt class="docutils literal">handleSubmit</tt>
is more clear if we leave them as plain functions. This is just my personal
opinion - if for example you wanted to allow deleting a book not only from the <tt class="docutils literal">BookForm</tt>
but also from the <tt class="docutils literal">BookPanel</tt> (by adding a delete button to each book row) then
you&#8217;d definitely need to export <tt class="docutils literal">del</tt> as an action creator (preferably as a thunk action
creator to be consistent with the&nbsp;others).</p>
<div class="section" id="components-input">
<h4><a class="toc-backref" href="#toc-entry-28">components/Input</a></h4>
<p>This is a simple functional component that gets a redux-form
text field and a label as properties and renders a text
input with a <tt class="docutils literal">&lt;label&gt;</tt> and an optional error message.
The error message will only be rendered if the field
has been touched (i.e the user has changed the field or
the form has been submitted) and there&#8217;s an actual&nbsp;error:</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">({</span><span class="nx">field</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">label</span><span class="w"> </span><span class="nx">forHtml</span><span class="o">=</span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">label</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/label&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">input</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;u-full-width&quot;</span><span class="w"> </span><span class="p">{...</span><span class="nx">field</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">touched</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">field</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;white&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="nx">danger</span><span class="p">}}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">error</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;}</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>
<p>One thing I&#8217;d like to explain is the <tt class="docutils literal"><span class="pre">{...field}</span></tt> snippet
I pass to <tt class="docutils literal">&lt;input&gt;</tt>. This is the object spread operator and will
convert each attribute of the <tt class="docutils literal">field</tt> object to a corresponding <tt class="docutils literal">attr=value</tt>
pair,&nbsp;i.e</p>
<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">input</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="nx">name</span><span class="o">=</span><span class="nx">field</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="nx">onChange</span><span class="o">=</span><span class="nx">field</span><span class="p">.</span><span class="nx">onChange</span><span class="w"> </span><span class="nx">value</span><span class="o">=</span><span class="nx">field</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="nx">onBlur</span><span class="o">=</span><span class="nx">field</span><span class="p">.</span><span class="nx">OnBlur</span><span class="w"> </span><span class="nx">etc</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>
</div>
<div class="section" id="components-select">
<h4><a class="toc-backref" href="#toc-entry-29">components/Select</a></h4>
<p>The <tt class="docutils literal">Select</tt> component renders a dropdown (select) input.
It should receive a redux-form field, a label and an array
of objects with <tt class="docutils literal">id</tt> and <tt class="docutils literal">name</tt> attributes that will be
rendered as the options. The <tt class="docutils literal">label</tt> and <tt class="docutils literal">error` will be
rendered similarly to ``Input</tt>:</p>
<div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">({</span><span class="nx">field</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">props</span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">label</span><span class="w"> </span><span class="nx">forHtml</span><span class="o">=</span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">label</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/label&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">select</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;u-full-width&quot;</span><span class="w"> </span><span class="p">{...</span><span class="nx">field</span><span class="p">}</span><span class="w"> </span><span class="p">{...</span><span class="nx">props</span><span class="p">}</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">option</span><span class="o">&gt;&lt;</span><span class="err">/option&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">options</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">c</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">option</span><span class="w"> </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">c</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">c</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="w"> </span><span class="o">&gt;</span><span class="p">{</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/option&gt;)}</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/select&gt;</span>
<span class="w">    </span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">touched</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">field</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;white&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="nx">danger</span><span class="p">}}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">error</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;}</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>
<p>For the options we include an empty option (as a default value) and the other
options are created with the help of a <tt class="docutils literal">map</tt>. Finally, notice that I have
also used <tt class="docutils literal"><span class="pre">...props</span></tt> here in the the function parameter list to capture all parameters not
captured by <tt class="docutils literal">field</tt>, <tt class="docutils literal">label</tt> and <tt class="docutils literal">options</tt> and then pass
both <tt class="docutils literal"><span class="pre">{...field}</span></tt> and <tt class="docutils literal"><span class="pre">{...props}</span></tt> to the <tt class="docutils literal">select</tt> component. This is
to capture the custom <tt class="docutils literal">onChange</tt> (that I pass for the categories <tt class="docutils literal">Select</tt>)
and use that custom <tt class="docutils literal">onChange</tt> when the select value changes. The custom
<tt class="docutils literal">onChange</tt> will override the <tt class="docutils literal">field.onChange</tt> because the {&#8230;props} is
<em>after</em> {&#8230;field}, so the resulting select will be something&nbsp;like:</p>
<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">select</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="nx">onChange</span><span class="o">=</span><span class="nx">field</span><span class="p">.</span><span class="nx">onChange</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="nx">onChange</span><span class="o">=</span><span class="nx">props</span><span class="p">.</span><span class="nx">onChange</span><span class="w"> </span><span class="o">&gt;</span>
</pre></div>
<p>This is
a common idiom for overriding properties of objects that are passed
to components - for example I could pass a <tt class="docutils literal">className</tt> property to
<tt class="docutils literal">&lt;Select&gt;</tt> to override the default one (<tt class="docutils literal"><span class="pre">className=&quot;u-full-width&quot;</span></tt>).</p>
</div>
<div class="section" id="components-datepicker">
<h4><a class="toc-backref" href="#toc-entry-30">components/DatePicker</a></h4>
<p>This component is used to render a jquery-ui datepicker. Similarly
to the other input components it receives a redux-form <tt class="docutils literal">field</tt>
and a <tt class="docutils literal">label</tt>. However, this is a
class based component because it needs to have <tt class="docutils literal">this</tt> for attaching
the <tt class="docutils literal">datepicker</tt> to an input. Beyond the normal rendering, we can
see that we have added a <tt class="docutils literal"><span class="pre">ref='date'</span></tt> to the <tt class="docutils literal">input</tt> to allow
us to refer to it later. This ref is used by <tt class="docutils literal">componentDidMount</tt>
and <tt class="docutils literal">handleChange</tt>:</p>
<div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">DatePicker</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nx">React</span><span class="p">.</span><span class="nx">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">field</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span>
<span class="w">        </span><span class="k">return</span><span class="p">(</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">label</span><span class="w"> </span><span class="nx">forHtml</span><span class="o">=</span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">label</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/label&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">input</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="w"> </span><span class="nx">ref</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;u-full-width&quot;</span><span class="w"> </span><span class="p">{...</span><span class="nx">field</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">touched</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">field</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;white&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="nx">danger</span><span class="p">}}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">field</span><span class="p">.</span><span class="nx">error</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;}</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">componentDidMount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">$</span><span class="p">(</span><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">findDOMNode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">date</span><span class="p">)).</span><span class="nx">datepicker</span><span class="p">({</span><span class="w"> </span><span class="nx">dateFormat</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;yy-mm-dd&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="w">        </span><span class="nx">$</span><span class="p">(</span><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">findDOMNode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">date</span><span class="p">)).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">componentWillUnmount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">handleChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">findDOMNode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">date</span><span class="p">).</span><span class="nx">value</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">onChange</span><span class="p">(</span><span class="nx">date</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>The <tt class="docutils literal">componentDidMount</tt> retrieves the input <span class="caps">DOM</span> element through the <tt class="docutils literal">ref</tt>
and makes it a datepicker. It also sets its <tt class="docutils literal">onchange</tt> method to the
<tt class="docutils literal">handleChange</tt> method (notice the <tt class="docutils literal">bind(this)</tt> part &#8212; this is needed
so that <tt class="docutils literal">this</tt> will be defined correctly inside the <tt class="docutils literal">handleChange</tt>). The
<tt class="docutils literal">handleChange</tt> retrieves the current date (once again from the <tt class="docutils literal">ref</tt>)
and just calls the <tt class="docutils literal">onChange</tt> of the provided <tt class="docutils literal">field</tt>, passing it the
date&nbsp;value.</p>
</div>
<div class="section" id="should-i-create-my-own-input-components">
<h4><a class="toc-backref" href="#toc-entry-31">Should I create my own input&nbsp;components?</a></h4>
<p>As you&#8217;ve seen, I&#8217;ve created my <em>own</em> custom input components. These components
are created with the correct styling for the css framework I use here (<tt class="docutils literal">skeleton.css</tt>) but
of course with small changes could easily be modified to be used with other css frameworks
(I am using <tt class="docutils literal">bootstrap 3</tt> in most of my normal apps and such components work great).
They also have been created for exactly my needs (i.e get the <tt class="docutils literal"><span class="pre">redux-form</span></tt> field as input,
allow overriding onChange&nbsp;etc).</p>
<p>Instead of creating your own components by hand, you could of course use some specific component
libraries like <a class="reference external" href="http://www.material-ui.com/#/">material-ui</a> or <a class="reference external" href="https://react-bootstrap.github.io/">react-bootstrap</a>. These libraries contain components
such as the <tt class="docutils literal">Input</tt> or <tt class="docutils literal">Select</tt> we implemented here with a consistent <span class="caps">API</span> and
styling. Unfortunately, these components are a little more difficult to use than
just creating your&nbsp;own:</p>
<ul class="simple">
<li>You need to learn their <span class="caps">API</span> (the names of the properties they get, their behavior in various conditions&nbsp;etc)</li>
<li>You need to learn their styling <span class="caps">API</span> (most of them make it difficult to customize their&nbsp;appearence)</li>
<li>It is not very easy to integrate them to your existing css framework (if you have one), so you&#8217;ll need to go all the way to use their&nbsp;styles</li>
<li>You may need to use custom components anyway because you want to use a different javascript component that is not provided by these&nbsp;libraries</li>
</ul>
<p>It all boils down to how big is your project and if you already have some styling for
your pages. If you want to build a rather small project or your project already has a consistent
styling then its better to create the required input components by hand. If on the other hand
you want to build a big project from scratch then probably it would be better to bite the
bullet and use a component library, but keep in mind that you may actually need to create
your own&nbsp;components.</p>
</div>
</div>
<div class="section" id="components-authorpanel">
<h3><a class="toc-backref" href="#toc-entry-32">components/AuthorPanel</a></h3>
<p>The <tt class="docutils literal">AuthorPanel</tt> uses <tt class="docutils literal">Table</tt> to list the authors. Since I haven&#8217;t used
pagination or sorting here the component is very&nbsp;simple:</p>
<div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">cols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="nx">x</span><span class="p">=&gt;</span><span class="o">&lt;</span><span class="nx">Link</span><span class="w"> </span><span class="nx">to</span><span class="o">=</span><span class="p">{</span><span class="sb">`/author_update/</span><span class="si">${</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">/`</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/Link&gt;},</span>
<span class="w">    </span><span class="p">{</span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;last_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Last name&#39;</span><span class="p">,},</span>
<span class="w">    </span><span class="p">{</span><span class="nx">key</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;First name&#39;</span><span class="p">,},</span>
<span class="p">]</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">AuthorPanel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;twelve columns&quot;</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Author</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Link</span><span class="w"> </span><span class="nx">className</span><span class="o">=</span><span class="s1">&#39;button button-primary&#39;</span><span class="w"> </span><span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="nx">fontSize</span><span class="o">:</span><span class="s1">&#39;1em&#39;</span><span class="p">}}</span><span class="w"> </span><span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/author_create/&quot;</span><span class="o">&gt;+&lt;</span><span class="err">/Link&gt;&lt;/h3&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Table</span><span class="w"> </span><span class="nx">cols</span><span class="o">=</span><span class="p">{</span><span class="nx">cols</span><span class="p">}</span><span class="w"> </span><span class="nx">rows</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">authors</span><span class="p">.</span><span class="nx">rows</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">mapStateToProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">authors</span><span class="o">:</span><span class="nx">state</span><span class="p">.</span><span class="nx">authors</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
<div class="section" id="components-authorform">
<h3><a class="toc-backref" href="#toc-entry-33">components/AuthorForm</a></h3>
<p>The <tt class="docutils literal">AuthorForm</tt> is similar to <tt class="docutils literal">BookForm</tt> and is used to
create a new author, update or delete an existing one. It uses
the <tt class="docutils literal">Input</tt> component to edit the first and last name
of each author. I won&#8217;t go into more detail about this
component since everything must be clear by&nbsp;now.</p>
</div>
</div>
<div class="section" id="changing-the-ui-when-the-data-is-changed">
<h2><a class="toc-backref" href="#toc-entry-34">Changing the <span class="caps">UI</span> when the data is&nbsp;changed</a></h2>
<p>Commenter Tomas Jacobsen asked for a tutorial on <a class="reference external" href="http://spapas.github.io/2015/09/08/more-complex-react-flux-example/#comment-2667922265">how the <span class="caps">UI</span> will be updated when the data is changed in a different window</a>. Well,
requirements like this is actually the reason for using react and redux I decided to add that capability to this application. If you want
to check it out, please <tt class="docutils literal">git checkout</tt> the tag <tt class="docutils literal"><span class="pre">react-redux-poll-update</span></tt> of the same repository (<a class="reference external" href="https://github.com/spapas/react-tutorial/">https://github.com/spapas/react-tutorial/</a>).</p>
<p>This extra functionality simply checks (using polling) every few seconds if the number of authors has changed and if it has, it will reload the authors
and dispaly a notification. Beyond the <span class="caps">ES6</span> code, I&#8217;ve added a small <span class="caps">REST</span> <span class="caps">API</span> view that returns the number of authors in the database (it just
returns a number) and a django management command that adds an author. So, to test the new functionality, run
the django application and thhen run <tt class="docutils literal">python manage.py add_author</tt> in a different window - after a few seconds you should see that the
authors have been updated along with a&nbsp;notification.</p>
<p>To implement the <span class="caps">UI</span> update in <span class="caps">ES6</span>, I&#8217;ve added a file named <tt class="docutils literal">scheduler.js</tt> with the following&nbsp;contents:</p>
<div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">store</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./store&#39;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">loadAuthors</span><span class="p">,</span><span class="w"> </span><span class="nx">showSuccessNotification</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./actions&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Starting scheduler&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;http://127.0.0.1:8000/api/authors/get_author_number/&#39;</span><span class="p">;</span>
<span class="w">        </span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">realAuthorNumber</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">authorNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">authors</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="nx">authorNumber</span><span class="o">!=</span><span class="nx">realAuthorNumber</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">showSuccessNotification</span><span class="p">(</span><span class="s2">&quot;Authors have changed - reloading ...&quot;</span><span class="p">));</span>
<span class="w">                </span><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">loadAuthors</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">2000</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
<p>and then just import the default function from <tt class="docutils literal">main.js</tt> and call&nbsp;it:</p>
<div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">schedule</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./scheduler&#39;</span><span class="p">;</span>

<span class="nx">schedule</span><span class="p">();</span>
</pre></div>
<p>So, we can see that every 2 seconds we retrieve (using Ajax) the number of authors and,
if their number is different than the current number of authors in the <span class="caps">UI</span> (which we retrieve from
the store using its <tt class="docutils literal">getState</tt> method) display the notification and reload the authors (by
dispatching two actions (which are created through the corresponding actions creators)! That&#8217;s
all that is needed to update the <span class="caps">UI</span>!</p>
<p>Notice that, although I&#8217;ve used ajax and polling to find out when the <span class="caps">UI</span> needs to be updated
you could instead use whatever different method you like, for example&nbsp;WebSockets.</p>
</div>
<div class="section" id="conclusion">
<h2><a class="toc-backref" href="#toc-entry-35">Conclusion</a></h2>
<p>In the above sections we presented and explained
a more or less complete single page react / redux
application, <em>almost</em> ready to be deployed to production.
I tried to explain every concept I came across that&#8217;s why
this article became more fat that I was expecting when I
started writing it! The presented application supports nearly
everything you&#8217;ll want to use when creating your own&nbsp;apps:</p>
<ul class="simple">
<li>Complex&nbsp;forms</li>
<li>Custom&nbsp;components</li>
<li>Asynchronous actions /&nbsp;Ajax</li>
<li>Creating / updating / deleting&nbsp;objects</li>
<li>Client side&nbsp;routing</li>
<li>Result lists with pagination, sorting and&nbsp;filtering</li>
</ul>
<p>The above have been implemented using the following technologies /&nbsp;libraries:</p>
<ul class="simple">
<li>Django /&nbsp;django-rest-framework</li>
<li><span class="caps">ES6</span> with&nbsp;babel</li>
<li>browserify / watchify /&nbsp;babelify</li>
<li>React / redux /&nbsp;react-redux</li>
<li>redux-thunk / redux-form / react-router-redux /&nbsp;react-notification</li>
</ul>
<p>What could be missing from the application we presented&nbsp;here:</p>
<ul class="simple">
<li>Tests!</li>
<li>Integrating <a class="reference external" href="https://github.com/gaearon/redux-devtools">redux-devtools</a></li>
<li>Using envify to seperate development/production client side code (this is needeed if you actually integrate&nbsp;redux-devtools)</li>
<li>Intagration with a component&nbsp;library</li>
</ul>
<p>I advice you to research these subjects a bit - I&#8217;ll also try to
write another (hopefully thinner) post with more info
about&nbsp;these.</p>
<p>Finally, two thing I&#8217;d like to point out and keep in mind are that using
redux/react-redux the flow of the data is <em>crystal</em> and that as you&#8217;ve already
seen by now, writing functional components and reducers is <em>pure fun</em>!</p>
</div>
</div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        Serafeim Papastefanos
    </span>
  </span>
<time datetime="2016-03-02T11:20:00+02:00" pubdate>Wed 02 March 2016</time>  <span class="categories">
    <a class='category' href='https://www.spapas.net/category/javascript.html'>javascript</a>
  </span>
  <span class="categories">
    <a class="category" href="https://www.spapas.net/tag/javascript.html">javascript</a>,    <a class="category" href="https://www.spapas.net/tag/react.html">react</a>,    <a class="category" href="https://www.spapas.net/tag/redux.html">redux</a>,    <a class="category" href="https://www.spapas.net/tag/react-redux.html">react-redux</a>,    <a class="category" href="https://www.spapas.net/tag/django.html">django</a>,    <a class="category" href="https://www.spapas.net/tag/django-rest-framework.html">django-rest-framework</a>,    <a class="category" href="https://www.spapas.net/tag/redux-thunk.html">redux-thunk</a>,    <a class="category" href="https://www.spapas.net/tag/redux-form.html">redux-form</a>,    <a class="category" href="https://www.spapas.net/tag/react-router.html">react-router</a>,    <a class="category" href="https://www.spapas.net/tag/react-router-redux.html">react-router-redux</a>,    <a class="category" href="https://www.spapas.net/tag/react-notification.html">react-notification</a>,    <a class="category" href="https://www.spapas.net/tag/history.html">history</a>,    <a class="category" href="https://www.spapas.net/tag/es6.html">es6</a>,    <a class="category" href="https://www.spapas.net/tag/babel.html">babel</a>,    <a class="category" href="https://www.spapas.net/tag/babelify.html">babelify</a>,    <a class="category" href="https://www.spapas.net/tag/browserify.html">browserify</a>,    <a class="category" href="https://www.spapas.net/tag/watchify.html">watchify</a>,    <a class="category" href="https://www.spapas.net/tag/uglify.html">uglify</a>,    <a class="category" href="https://www.spapas.net/tag/boilerplate.html">boilerplate</a>,    <a class="category" href="https://www.spapas.net/tag/ajax.html">ajax</a>,    <a class="category" href="https://www.spapas.net/tag/tutorial.html">tutorial</a>,    <a class="category" href="https://www.spapas.net/tag/introduction.html">introduction</a>  </span>
</p><div class="sharing">
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="https://www.spapas.net/2016/03/02/react-redux-tutorial/" data-via="" data-counturl="https://www.spapas.net/2016/03/02/react-redux-tutorial/" >Tweet</a>
</div>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  
  <section>
    <br />
    <a href='/feeds/all.atom.xml'>Atom</a>
    |
    <a href='/feeds/all.rss.xml'>RSS</a>
  </section>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- Sidebar unit -->
  <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7673322832689008" data-ad-slot="2720624730"
    data-ad-format="auto" data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>


  <script async src="https://cse.google.com/cse.js?cx=612920e5ca9da850c"></script>
  <div class="gcse-search"></div>

  
  <section>
    <h1>Support me</h1>

    You can show your appreciation for anything useful you've found here by 
    buying me a coffee 
    <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="spapas" data-color="#FFDD00" data-emoji=""  data-font="Lato" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>

    or donating me some bitcoin to this address:
    <small><pre>bc1qx42vp8napheaewhnx0rk0mttdrdrtvw6czvxhl</pre></small>
    <svg shape-rendering="crispEdges" height="200" width="200" viewBox="0 0 29 29" class="qrcode">
      <path fill="#FFFFFF" d="M0,0 h29v29H0z"></path><path fill="#000000" d="M0 0h7v1H0zM9 0h2v1H9zM12 0h1v1H12zM14 0h2v1H14zM18 0h2v1H18zM22,0 h7v1H22zM0 1h1v1H0zM6 1h1v1H6zM8 1h1v1H8zM11 1h1v1H11zM14 1h5v1H14zM22 1h1v1H22zM28,1 h1v1H28zM0 2h1v1H0zM2 2h3v1H2zM6 2h1v1H6zM8 2h4v1H8zM17 2h1v1H17zM22 2h1v1H22zM24 2h3v1H24zM28,2 h1v1H28zM0 3h1v1H0zM2 3h3v1H2zM6 3h1v1H6zM9 3h2v1H9zM14 3h3v1H14zM18 3h1v1H18zM22 3h1v1H22zM24 3h3v1H24zM28,3 h1v1H28zM0 4h1v1H0zM2 4h3v1H2zM6 4h1v1H6zM8 4h1v1H8zM11 4h1v1H11zM13 4h1v1H13zM15 4h2v1H15zM18 4h1v1H18zM22 4h1v1H22zM24 4h3v1H24zM28,4 h1v1H28zM0 5h1v1H0zM6 5h1v1H6zM8 5h2v1H8zM14 5h2v1H14zM19 5h2v1H19zM22 5h1v1H22zM28,5 h1v1H28zM0 6h7v1H0zM8 6h1v1H8zM10 6h1v1H10zM12 6h1v1H12zM14 6h1v1H14zM16 6h1v1H16zM18 6h1v1H18zM20 6h1v1H20zM22,6 h7v1H22zM8 7h2v1H8zM11 7h1v1H11zM15 7h1v1H15zM17 7h2v1H17zM0 8h2v1H0zM3 8h1v1H3zM6 8h2v1H6zM10 8h1v1H10zM12 8h3v1H12zM20 8h1v1H20zM22 8h3v1H22zM26 8h2v1H26zM1 9h1v1H1zM3 9h3v1H3zM8 9h1v1H8zM10 9h1v1H10zM12 9h2v1H12zM16 9h2v1H16zM20 9h1v1H20zM22 9h1v1H22zM25 9h1v1H25zM27,9 h2v1H27zM0 10h1v1H0zM3 10h2v1H3zM6 10h1v1H6zM8 10h3v1H8zM12 10h2v1H12zM16 10h1v1H16zM19 10h1v1H19zM22 10h3v1H22zM27 10h1v1H27zM0 11h1v1H0zM2 11h1v1H2zM4 11h2v1H4zM7 11h1v1H7zM13 11h4v1H13zM18 11h4v1H18zM26 11h2v1H26zM0 12h1v1H0zM2 12h3v1H2zM6 12h1v1H6zM11 12h1v1H11zM13 12h1v1H13zM15 12h3v1H15zM20 12h1v1H20zM22 12h2v1H22zM27,12 h2v1H27zM4 13h1v1H4zM8 13h3v1H8zM12 13h1v1H12zM14 13h1v1H14zM17 13h4v1H17zM25 13h2v1H25zM0 14h1v1H0zM4 14h3v1H4zM8 14h2v1H8zM11 14h3v1H11zM16 14h1v1H16zM21 14h2v1H21zM24,14 h5v1H24zM3 15h3v1H3zM7 15h2v1H7zM10 15h1v1H10zM12 15h2v1H12zM15 15h1v1H15zM17 15h2v1H17zM20 15h2v1H20zM23 15h1v1H23zM1 16h1v1H1zM4 16h1v1H4zM6 16h4v1H6zM16 16h2v1H16zM20 16h1v1H20zM23 16h1v1H23zM25 16h1v1H25zM28,16 h1v1H28zM2 17h1v1H2zM5 17h1v1H5zM7 17h2v1H7zM11 17h3v1H11zM17 17h1v1H17zM22 17h1v1H22zM25 17h1v1H25zM27,17 h2v1H27zM0 18h1v1H0zM3 18h1v1H3zM5 18h4v1H5zM10 18h1v1H10zM12 18h1v1H12zM18 18h1v1H18zM20 18h1v1H20zM22 18h2v1H22zM25,18 h4v1H25zM2 19h3v1H2zM8 19h1v1H8zM16 19h2v1H16zM21 19h1v1H21zM23 19h1v1H23zM25 19h1v1H25zM27 19h1v1H27zM0 20h1v1H0zM2 20h5v1H2zM8 20h2v1H8zM13 20h4v1H13zM19 20h6v1H19zM26 20h1v1H26zM28,20 h1v1H28zM8 21h2v1H8zM12 21h3v1H12zM16 21h1v1H16zM20 21h1v1H20zM24 21h1v1H24zM26,21 h3v1H26zM0 22h7v1H0zM8 22h3v1H8zM17 22h1v1H17zM20 22h1v1H20zM22 22h1v1H22zM24 22h2v1H24zM27 22h1v1H27zM0 23h1v1H0zM6 23h1v1H6zM10 23h2v1H10zM13 23h2v1H13zM19 23h2v1H19zM24,23 h5v1H24zM0 24h1v1H0zM2 24h3v1H2zM6 24h1v1H6zM9 24h2v1H9zM12 24h2v1H12zM17 24h1v1H17zM20 24h6v1H20zM28,24 h1v1H28zM0 25h1v1H0zM2 25h3v1H2zM6 25h1v1H6zM8 25h3v1H8zM12 25h1v1H12zM14 25h1v1H14zM18 25h1v1H18zM22 25h3v1H22zM26 25h1v1H26zM0 26h1v1H0zM2 26h3v1H2zM6 26h1v1H6zM10 26h5v1H10zM16 26h3v1H16zM21 26h1v1H21zM24 26h1v1H24zM26 26h1v1H26zM28,26 h1v1H28zM0 27h1v1H0zM6 27h1v1H6zM8 27h3v1H8zM12 27h4v1H12zM17 27h1v1H17zM20 27h1v1H20zM23 27h2v1H23zM27 27h1v1H27zM0 28h7v1H0zM8 28h3v1H8zM14 28h1v1H14zM16 28h3v1H16zM20 28h1v1H20zM22 28h1v1H22zM24 28h2v1H24zM27 28h1v1H27z"></path>
    </svg>
  </section>
  

  <section>
    <h1>Subscribe</h1>
    Do you want to get notified via email when I post new content?
    <style>
      .subscribe-button {
        /* margin: 10px !important; */
        padding: 10px !important;
        background-color: black;
        display: inline-block;
        color: white !important;
        text-decoration: none;

        line-height: 36px !important;
        height: 37px !important;
        text-decoration: none !important;
        display: inline-block !important;
        color: #ffffff !important;
        background-color: #000000 !important;
        border-radius: 3px !important;
        border: 1px solid transparent !important;
        padding: 1px 9px !important;
        font-size: 23px !important;
        letter-spacing: 0.6px !important;
        box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;
        -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
        margin: 0 auto !important;
        font-family: 'Cookie', cursive !important;
        -webkit-box-sizing: border-box !important;
        box-sizing: border-box !important;
        -o-transition: 0.3s all linear !important;
        -webkit-transition: 0.3s all linear !important;
        -moz-transition: 0.3s all linear !important;
        -ms-transition: 0.3s all linear !important;
        transition: 0.3s all linear !important;

      }
    </style>
    <a class='subscribe-button' target="_blank" href="http://eepurl.com/dxI3PP">Click here to subscribe!</a>
  </section>


  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
        <a href="https://www.spapas.net/2024/08/22/multiple-erl-elixir-windows/">Multiple Erlang/Elixir versions in Windows</a>
      </li>
      <li class="post">
        <a href="https://www.spapas.net/2023/11/29/openid-connect-tutorial/">A simple OpenID connect tutorial</a>
      </li>
      <li class="post">
        <a href="https://www.spapas.net/2023/05/23/simple-django-datatables-integration/">Simple Django - DataTables integration</a>
      </li>
      <li class="post">
        <a href="https://www.spapas.net/2023/05/22/ai-auto-subtitling/">AI auto-subtitling</a>
      </li>
      <li class="post">
        <a href="https://www.spapas.net/2023/05/12/disable-your-forms/">HTML form disable after submit</a>
      </li>
    </ul>
  </section>
  <section>

    <h1>Categories</h1>
    <ul id="recent_posts">
      <li><a href="https://www.spapas.net/category/ai.html">ai</a></li>
      <li><a href="https://www.spapas.net/category/android.html">android</a></li>
      <li><a href="https://www.spapas.net/category/clojure.html">clojure</a></li>
      <li><a href="https://www.spapas.net/category/css.html">css</a></li>
      <li><a href="https://www.spapas.net/category/django.html">django</a></li>
      <li><a href="https://www.spapas.net/category/elixir.html">elixir</a></li>
      <li><a href="https://www.spapas.net/category/flask.html">flask</a></li>
      <li><a href="https://www.spapas.net/category/gaming.html">gaming</a></li>
      <li><a href="https://www.spapas.net/category/git.html">git</a></li>
      <li><a href="https://www.spapas.net/category/html.html">html</a></li>
      <li><a href="https://www.spapas.net/category/javascript.html">javascript</a></li>
      <li><a href="https://www.spapas.net/category/networking.html">networking</a></li>
      <li><a href="https://www.spapas.net/category/pelican.html">pelican</a></li>
      <li><a href="https://www.spapas.net/category/postgresql.html">postgresql</a></li>
      <li><a href="https://www.spapas.net/category/python.html">python</a></li>
      <li><a href="https://www.spapas.net/category/spring.html">spring</a></li>
      <li><a href="https://www.spapas.net/category/unix.html">unix</a></li>
      <li><a href="https://www.spapas.net/category/wagtail.html">wagtail</a></li>
    </ul>
  </section>

  <section>
    <h1>Tags</h1>
    <a href="https://www.spapas.net/tag/erlang.html">erlang</a>,    <a href="https://www.spapas.net/tag/elixir.html">elixir</a>,    <a href="https://www.spapas.net/tag/windows.html">windows</a>,    <a href="https://www.spapas.net/tag/openid.html">openid</a>,    <a href="https://www.spapas.net/tag/openid-connect.html">openid-connect</a>,    <a href="https://www.spapas.net/tag/oidc.html">oidc</a>,    <a href="https://www.spapas.net/tag/http.html">http</a>,    <a href="https://www.spapas.net/tag/keycloak.html">keycloak</a>,    <a href="https://www.spapas.net/tag/python.html">python</a>,    <a href="https://www.spapas.net/tag/django.html">django</a>,    <a href="https://www.spapas.net/tag/jquery.html">jquery</a>,    <a href="https://www.spapas.net/tag/datatables.html">datatables</a>,    <a href="https://www.spapas.net/tag/ai.html">ai</a>,    <a href="https://www.spapas.net/tag/whisper.html">whisper</a>,    <a href="https://www.spapas.net/tag/whispercpp.html">whisper.cpp</a>,    <a href="https://www.spapas.net/tag/subtitles.html">subtitles</a>,    <a href="https://www.spapas.net/tag/video.html">video</a>,    <a href="https://www.spapas.net/tag/auto-subtitling.html">auto-subtitling</a>,    <a href="https://www.spapas.net/tag/subtitiling.html">subtitiling</a>,    <a href="https://www.spapas.net/tag/transcribe.html">transcribe</a>,    <a href="https://www.spapas.net/tag/html.html">html</a>,    <a href="https://www.spapas.net/tag/javascript.html">javascript</a>,    <a href="https://www.spapas.net/tag/media.html">media</a>,    <a href="https://www.spapas.net/tag/storage.html">storage</a>,    <a href="https://www.spapas.net/tag/unpoly.html">unpoly</a>,    <a href="https://www.spapas.net/tag/access.html">access</a>,    <a href="https://www.spapas.net/tag/database.html">database</a>,    <a href="https://www.spapas.net/tag/accdb.html">accdb</a>,    <a href="https://www.spapas.net/tag/mdb.html">mdb</a>,    <a href="https://www.spapas.net/tag/postgresql.html">postgresql</a>,    <a href="https://www.spapas.net/tag/development.html">development</a>,    <a href="https://www.spapas.net/tag/inlines.html">inlines</a>,    <a href="https://www.spapas.net/tag/clojure.html">clojure</a>,    <a href="https://www.spapas.net/tag/cmd.html">cmd</a>,    <a href="https://www.spapas.net/tag/pdf.html">pdf</a>,    <a href="https://www.spapas.net/tag/wkhtmltopdf.html">wkhtmltopdf</a>,    <a href="https://www.spapas.net/tag/forward-proxy.html">forward-proxy</a>,    <a href="https://www.spapas.net/tag/reverse-proxy.html">reverse-proxy</a>,    <a href="https://www.spapas.net/tag/proxy.html">proxy</a>,    <a href="https://www.spapas.net/tag/networking.html">networking</a>,    <a href="https://www.spapas.net/tag/dj-rest-auth.html">dj-rest-auth</a>,    <a href="https://www.spapas.net/tag/rest.html">rest</a>,    <a href="https://www.spapas.net/tag/django-rest-framework.html">django-rest-framework</a>,    <a href="https://www.spapas.net/tag/authentication.html">authentication</a>,    <a href="https://www.spapas.net/tag/tokens.html">tokens</a>,    <a href="https://www.spapas.net/tag/migrations.html">migrations</a>,    <a href="https://www.spapas.net/tag/foreignkey.html">foreignkey</a>,    <a href="https://www.spapas.net/tag/dark-souls.html">dark-souls</a>,    <a href="https://www.spapas.net/tag/dark-souls-2.html">dark-souls-2</a>,    <a href="https://www.spapas.net/tag/dark-souls-3.html">dark-souls-3</a>,    <a href="https://www.spapas.net/tag/autohotkey.html">autohotkey</a>,    <a href="https://www.spapas.net/tag/matplotlib.html">matplotlib</a>,    <a href="https://www.spapas.net/tag/hashids.html">hashids</a>,    <a href="https://www.spapas.net/tag/wagtail.html">wagtail</a>,    <a href="https://www.spapas.net/tag/osmon.html">osmon</a>,    <a href="https://www.spapas.net/tag/phoenix.html">phoenix</a>,    <a href="https://www.spapas.net/tag/os-monitoring.html">os-monitoring</a>,    <a href="https://www.spapas.net/tag/forms.html">forms</a>,    <a href="https://www.spapas.net/tag/django-crispy-forms.html">django-crispy-forms</a>,    <a href="https://www.spapas.net/tag/django-widget-tweaks.html">django-widget-tweaks</a>,    <a href="https://www.spapas.net/tag/ecto.html">ecto</a>,    <a href="https://www.spapas.net/tag/queries.html">queries</a>,    <a href="https://www.spapas.net/tag/declarative.html">declarative</a>,    <a href="https://www.spapas.net/tag/form.html">form</a>,    <a href="https://www.spapas.net/tag/php.html">php</a>,    <a href="https://www.spapas.net/tag/select2.html">select2</a>,    <a href="https://www.spapas.net/tag/autocompelte.html">autocompelte</a>,    <a href="https://www.spapas.net/tag/ajax.html">ajax</a>,    <a href="https://www.spapas.net/tag/android.html">android</a>,    <a href="https://www.spapas.net/tag/kotlin.html">kotlin</a>,    <a href="https://www.spapas.net/tag/adapter.html">adapter</a>,    <a href="https://www.spapas.net/tag/filter.html">filter</a>,    <a href="https://www.spapas.net/tag/async.html">async</a>,    <a href="https://www.spapas.net/tag/tasks.html">tasks</a>,    <a href="https://www.spapas.net/tag/django-rq.html">django-rq</a>,    <a href="https://www.spapas.net/tag/rq.html">rq</a>,    <a href="https://www.spapas.net/tag/du.html">du</a>,    <a href="https://www.spapas.net/tag/unix.html">unix</a>,    <a href="https://www.spapas.net/tag/linux.html">linux</a>,    <a href="https://www.spapas.net/tag/disk-usage.html">disk-usage</a>,    <a href="https://www.spapas.net/tag/cbv.html">cbv</a>,    <a href="https://www.spapas.net/tag/middleware.html">middleware</a>,    <a href="https://www.spapas.net/tag/class-based-views.html">class-based-views</a>,    <a href="https://www.spapas.net/tag/react.html">react</a>,    <a href="https://www.spapas.net/tag/redux.html">redux</a>,    <a href="https://www.spapas.net/tag/hyperapp.html">hyperapp</a>,    <a href="https://www.spapas.net/tag/immutable.html">immutable</a>,    <a href="https://www.spapas.net/tag/es6.html">es6</a>,    <a href="https://www.spapas.net/tag/youtube.html">youtube</a>,    <a href="https://www.spapas.net/tag/youtube-dl.html">youtube-dl</a>,    <a href="https://www.spapas.net/tag/ffmpeg.html">ffmpeg</a>,    <a href="https://www.spapas.net/tag/django-rest-auth.html">django-rest-auth</a>,    <a href="https://www.spapas.net/tag/python-2.html">python-2</a>,    <a href="https://www.spapas.net/tag/python-3.html">python-3</a>,    <a href="https://www.spapas.net/tag/plpgsql.html">plpgsql</a>,    <a href="https://www.spapas.net/tag/component.html">component</a>,    <a href="https://www.spapas.net/tag/ag-grid.html">ag-grid</a>,    <a href="https://www.spapas.net/tag/grid.html">grid</a>,    <a href="https://www.spapas.net/tag/bash.html">bash</a>,    <a href="https://www.spapas.net/tag/cron.html">cron</a>,    <a href="https://www.spapas.net/tag/pandas.html">pandas</a>,    <a href="https://www.spapas.net/tag/scipy.html">scipy</a>,    <a href="https://www.spapas.net/tag/numpy.html">numpy</a>,    <a href="https://www.spapas.net/tag/pivot.html">pivot</a>,    <a href="https://www.spapas.net/tag/pivot_table.html">pivot_table</a>,    <a href="https://www.spapas.net/tag/ipython.html">ipython</a>,    <a href="https://www.spapas.net/tag/jupyter.html">jupyter</a>,    <a href="https://www.spapas.net/tag/notebook.html">notebook</a>,    <a href="https://www.spapas.net/tag/query.html">query</a>,    <a href="https://www.spapas.net/tag/q.html">q</a>,    <a href="https://www.spapas.net/tag/imgur.html">imgur</a>,    <a href="https://www.spapas.net/tag/console.html">console</a>,    <a href="https://www.spapas.net/tag/research.html">research</a>,    <a href="https://www.spapas.net/tag/debug.html">debug</a>,    <a href="https://www.spapas.net/tag/werkzeug.html">werkzeug</a>,    <a href="https://www.spapas.net/tag/django-extensions.html">django-extensions</a>,    <a href="https://www.spapas.net/tag/404.html">404</a>,    <a href="https://www.spapas.net/tag/error.html">error</a>,    <a href="https://www.spapas.net/tag/spring.html">spring</a>,    <a href="https://www.spapas.net/tag/spring-boot.html">spring-boot</a>,    <a href="https://www.spapas.net/tag/java.html">java</a>,    <a href="https://www.spapas.net/tag/ldap.html">ldap</a>,    <a href="https://www.spapas.net/tag/profiles.html">profiles</a>,    <a href="https://www.spapas.net/tag/settings.html">settings</a>,    <a href="https://www.spapas.net/tag/properties.html">properties</a>,    <a href="https://www.spapas.net/tag/yaml.html">yaml</a>,    <a href="https://www.spapas.net/tag/configuration.html">configuration</a>,    <a href="https://www.spapas.net/tag/deploy.html">deploy</a>,    <a href="https://www.spapas.net/tag/initd.html">init.d</a>,    <a href="https://www.spapas.net/tag/react-redux.html">react-redux</a>,    <a href="https://www.spapas.net/tag/redux-thunk.html">redux-thunk</a>,    <a href="https://www.spapas.net/tag/redux-form.html">redux-form</a>,    <a href="https://www.spapas.net/tag/react-router.html">react-router</a>,    <a href="https://www.spapas.net/tag/react-router-redux.html">react-router-redux</a>,    <a href="https://www.spapas.net/tag/react-notification.html">react-notification</a>,    <a href="https://www.spapas.net/tag/history.html">history</a>,    <a href="https://www.spapas.net/tag/babel.html">babel</a>,    <a href="https://www.spapas.net/tag/babelify.html">babelify</a>,    <a href="https://www.spapas.net/tag/browserify.html">browserify</a>,    <a href="https://www.spapas.net/tag/watchify.html">watchify</a>,    <a href="https://www.spapas.net/tag/uglify.html">uglify</a>,    <a href="https://www.spapas.net/tag/boilerplate.html">boilerplate</a>,    <a href="https://www.spapas.net/tag/tutorial.html">tutorial</a>,    <a href="https://www.spapas.net/tag/introduction.html">introduction</a>,    <a href="https://www.spapas.net/tag/fixed-data-tables.html">fixed-data-tables</a>,    <a href="https://www.spapas.net/tag/fixeddatatable.html">FixedDataTable</a>,    <a href="https://www.spapas.net/tag/reportlab.html">reportlab</a>,    <a href="https://www.spapas.net/tag/xhtml2pdf.html">xhtml2pdf</a>,    <a href="https://www.spapas.net/tag/node.html">node</a>,    <a href="https://www.spapas.net/tag/npm.html">npm</a>,    <a href="https://www.spapas.net/tag/generic.html">generic</a>,    <a href="https://www.spapas.net/tag/tables.html">tables</a>,    <a href="https://www.spapas.net/tag/flux.html">flux</a>,    <a href="https://www.spapas.net/tag/jobs.html">jobs</a>,    <a href="https://www.spapas.net/tag/asynchronous.html">asynchronous</a>,    <a href="https://www.spapas.net/tag/scheduling.html">scheduling</a>,    <a href="https://www.spapas.net/tag/redis.html">redis</a>,    <a href="https://www.spapas.net/tag/pusher.html">pusher</a>,    <a href="https://www.spapas.net/tag/auditing.html">auditing</a>,    <a href="https://www.spapas.net/tag/css.html">css</a>,    <a href="https://www.spapas.net/tag/design.html">design</a>,    <a href="https://www.spapas.net/tag/boostrap-material-design.html">boostrap-material-design</a>,    <a href="https://www.spapas.net/tag/less.html">less</a>,    <a href="https://www.spapas.net/tag/nodejs.html">node.js</a>,    <a href="https://www.spapas.net/tag/gmail.html">gmail</a>,    <a href="https://www.spapas.net/tag/security.html">security</a>,    <a href="https://www.spapas.net/tag/google.html">google</a>,    <a href="https://www.spapas.net/tag/flask.html">flask</a>,    <a href="https://www.spapas.net/tag/mongodb.html">mongodb</a>,    <a href="https://www.spapas.net/tag/heroku.html">heroku</a>,    <a href="https://www.spapas.net/tag/spring-security.html">spring-security</a>,    <a href="https://www.spapas.net/tag/git.html">git</a>,    <a href="https://www.spapas.net/tag/github.html">github</a>,    <a href="https://www.spapas.net/tag/branching.html">branching</a>,    <a href="https://www.spapas.net/tag/static-html.html">static-html</a>,    <a href="https://www.spapas.net/tag/githubio.html">github.io</a>,    <a href="https://www.spapas.net/tag/pelican.html">pelican</a>,    <a href="https://www.spapas.net/tag/github-pages.html">github-pages</a>,    <a href="https://www.spapas.net/tag/rst.html">rst</a>  </section>

  <section>
    <h1>Yearly archives</h1>
    <a href="https://www.spapas.net/posts/2013/">2013</a>,    <a href="https://www.spapas.net/posts/2014/">2014</a>,    <a href="https://www.spapas.net/posts/2015/">2015</a>,    <a href="https://www.spapas.net/posts/2016/">2016</a>,    <a href="https://www.spapas.net/posts/2017/">2017</a>,    <a href="https://www.spapas.net/posts/2018/">2018</a>,    <a href="https://www.spapas.net/posts/2019/">2019</a>,    <a href="https://www.spapas.net/posts/2020/">2020</a>,    <a href="https://www.spapas.net/posts/2021/">2021</a>,    <a href="https://www.spapas.net/posts/2022/">2022</a>,    <a href="https://www.spapas.net/posts/2023/">2023</a>,    <a href="https://www.spapas.net/posts/2024/">2024</a>  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/spapas">@spapas</a> on GitHub
    <script  src="//code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script type="text/javascript">
      $(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'https://www.spapas.net/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'spapas',
              count: 5,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="https://www.spapas.net/theme/js/github.js" type="text/javascript"> </script>
  </section>


  <section>
    <a href="https://twitter.com/_serafeim_?ref_src=twsrc%5Etfw" class="twitter-follow-button"
      data-show-count="false">Follow @_serafeim_</a>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2013&ndash;2024  Serafeim Papastefanos &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="https://www.spapas.net/theme/js/modernizr-2.0.js"></script>
  <script src="https://www.spapas.net/theme/js/ender.js"></script>
  <script src="https://www.spapas.net/theme/js/octopress.js" type="text/javascript"></script>
  <script src="https://www.spapas.net/theme/js/ads.js"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-44750952-1', 'auto');

    ga('send', 'pageview');
    </script>

<script defer data-domain="spapas.net" src="https://plausible.hcg.gr/js/script.js"></script>  <script type="text/javascript">
    var disqus_shortname = 'spapas-github-io';
    var disqus_identifier = '/2016/03/02/react-redux-tutorial/';
    var disqus_url = 'https://www.spapas.net/2016/03/02/react-redux-tutorial/';
    var disqus_title = 'A comprehensive react-redux&nbsp;tutorial';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>

</body>

</html>