<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta name="google-site-verification" content="5_8DTmIiEq4gFvNAfxAD6TsGOgrMAjp8lQFQvfA6zZc" />
    <title>/var/</title>
    <meta name="author" content="Serafeim Papastefanos">


    
<style type="text/css">
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .pm { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation.Marker */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
</style>

<style type="text/css">
/* Overrides of notebook CSS for static HTML export */
div.entry-content {
  overflow: visible;
  padding: 8px;
}
.input_area {
  padding: 0.2em;
}

a.heading-anchor {
 white-space: normal;
}

.rendered_html
code {
 font-size: .8em;
}

pre.ipynb {
  color: black;
  background: #f7f7f7;
  border: none;
  box-shadow: none;
  margin-bottom: 0;
  padding: 0;
  margin: 0px;
  font-size: 13px;
}

/* remove the prompt div from text cells */
div.text_cell .prompt {
    display: none;
}

/* remove horizontal padding from text cells, */
/* so it aligns with outer body text */
div.text_cell_render {
    padding: 0.5em 0em;
}

img.anim_icon{padding:0; border:0; vertical-align:middle; -webkit-box-shadow:none; -box-shadow:none}

div.collapseheader {
    width=100%;
    background-color:#d3d3d3;
    padding: 2px;
    cursor: pointer;
    font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;
}
</style>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        displayMath: [['$$','$$'], ["\\[","\\]"]]
    }
});
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script type="text/javascript">
jQuery(document).ready(function($) {
    $("div.collapseheader").click(function () {
    $header = $(this).children("span").first();
    $codearea = $(this).children(".input_area");
    console.log($(this).children());
    $codearea.slideToggle(500, function () {
        $header.text(function () {
            return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
        });
    });
});
});
</script>




    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://spapas.github.io/favicon.png" rel="icon">

    <link href="https://spapas.github.io/theme/css/main.css" media="screen, projection" rel="stylesheet"
      type="text/css">

    <link href="https://spapas.github.io/theme/css/extra_style.css" media="screen, projection" rel="stylesheet"
      type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Fira+Mono|Fira+Sans:400,700&amp;subset=greek" rel="stylesheet">

<style>
#gHPzseYvFrhZ123 {
  padding: 5px !important;
  display: block;
  margin-bottom: 10px !important;
  background: #900;
  color: #fff;
  border-radius: 5px;
  font-size: 1.0rem !important;
}
</style>


  <script>
    
      
  </script>

    <script data-ad-client="ca-pub-7673322832689008" async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
      onerror="adBlockFunction();"></script>
  </head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="https://spapas.github.io/">/var/</a></h1>
    <h2>Various programming stuff</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
      <li >
        <a href="https://spapas.github.io/category/ai.html">Ai</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/android.html">Android</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/clojure.html">Clojure</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/css.html">Css</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/django.html">Django</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/elixir.html">Elixir</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/flask.html">Flask</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/gaming.html">Gaming</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/git.html">Git</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/html.html">Html</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/javascript.html">Javascript</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/networking.html">Networking</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/pelican.html">Pelican</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/postgresql.html">Postgresql</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/python.html">Python</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/spring.html">Spring</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/unix.html">Unix</a>
      </li>
      <li >
        <a href="https://spapas.github.io/category/wagtail.html">Wagtail</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
    <div id="gHPzseYvFrhZ123">
      Hello! If you are using an ad blocker but find something useful here 
      and want to support me please consider disabling your ad blocker for this site. 
      <br />
      <br />
      Thank you,<br />
      Serafeim
      
    </div>
<div class="blog-index">
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://spapas.github.io/2021/07/15/django-choices-to-fk-using-migrations/">Changing choices to a ForeignKey using Django migrations</a>
      </h1>
    <p class="meta">
<time datetime="2021-07-15T09:50:00+03:00" pubdate>Thu 15 July 2021</time>    </p>
</header>

<div class="entry-content"><p>One common requirement I&#8217;ve seen in projects is that a model will start with a
choices CharField but in the future this field will need to be converted to a normal
foreign key to another model. This is such a common requirement that I&#8217;ve concluded that
you need to double think before using choices because there&#8217;s a high possibility that in the
lifetime of your project you&#8217;ll also need to convert it to a foreign&nbsp;key.</p>
<p>For example, let&#8217;s suppose you&#8217;ve got the following&nbsp;model:</p>
<div class="highlight"><pre><span></span><span class="n">CATEGORY_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">(</span><span class="s1">&#39;cat1&#39;</span><span class="p">,</span> <span class="s1">&#39;Category 1 name&#39;</span><span class="p">,),</span>
  <span class="p">(</span><span class="s1">&#39;cat2&#39;</span><span class="p">,</span> <span class="s1">&#39;Category 2 name&#39;</span><span class="p">,),</span>
  <span class="p">(</span><span class="s1">&#39;cat3&#39;</span><span class="p">,</span> <span class="s1">&#39;Category 3 name&#39;</span><span class="p">,),</span>
  <span class="p">(</span><span class="s1">&#39;cat4&#39;</span><span class="p">,</span> <span class="s1">&#39;Category 4 name&#39;</span><span class="p">,),</span>
<span class="p">]</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Sample</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
  <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
  <span class="n">category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">CATEGORY_CHOICES</span><span class="p">)</span>
</pre></div>
<p>You will need to convert it like&nbsp;this</p>
<div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Category</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
  <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

  <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Sample</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
  <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
  <span class="n">category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">PROTECT</span><span class="p">)</span>
</pre></div>
<p>There are various reasons that you may be forced to convert the choices field to a ForeignKey, some&nbsp;are:</p>
<ul class="simple">
<li>Your site administrators may need to sometime change these choices&nbsp;themselves</li>
<li>You may want to add some properties to each choice i.e if a choice is active or&nbsp;not</li>
<li>The choices info is local in your django project. If for some reason you want your data to be used by a different project (for example execute a reporing query directly from the database) you&#8217;ll just get the code for each choice (and not its name) leading you to ugly case statements in your queries to display the name of each choice. Furthermore, if the choices do change you&#8217;ll need to change them in two places (your django project and your reporting&nbsp;queries)</li>
<li>The choice thing, although is very helpful and quick to implement leads to a non-normalized design. The name of each choice will be a string that would be duplicated to each row that has that particular&nbsp;choice.</li>
</ul>
<p>In a <a class="reference external" href="https://spapas.github.io/2017/07/04/postgresql-auto-create-category-column/">previous article</a> I had provided a recipe on how to
properly normalize a database table containing a choices field like this using <span class="caps">PL</span>/pgSQL. This script should work in
this case also but if you have a Django project then you <em>should</em> use migrations to do the&nbsp;conversion.</p>
<p>So let&#8217;s see how to convert our category choices field to a Foreign Key using django&nbsp;migrations!</p>
<p>The proper way to do it is in three distinct&nbsp;steps/migrations:</p>
<ol class="arabic simple">
<li>Create the <tt class="docutils literal">Category</tt> model and add a foreign key to it in the <tt class="docutils literal">Sample</tt> model. <em>You should not remove the existing choices field</em>! So you&#8217;ll need to add another field to <tt class="docutils literal">Sample</tt> for example named <tt class="docutils literal">category_fk</tt>.</li>
<li>Create a data migration to run a python script that will read the existing <tt class="docutils literal">Sample</tt> instances and fill their <tt class="docutils literal">category_fk</tt> field based on their <tt class="docutils literal">category</tt> field.</li>
<li>Remove the <tt class="docutils literal">category</tt> field from <tt class="docutils literal">Sample</tt> model and rename <tt class="docutils literal">category_fk</tt> to <tt class="docutils literal">category</tt>.</li>
</ol>
<p>Let&#8217;s go through the steps one by&nbsp;one:</p>
<p>First we will change our initial models.py like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Category</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
  <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Sample</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
  <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
  <span class="n">category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">CATEGORY_CHOICES</span><span class="p">)</span>
  <span class="n">category_fk</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">PROTECT</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
<p>So I&#8217;ve just added the <tt class="docutils literal">Category</tt> model and the  <tt class="docutils literal">category_fk</tt> field to the <tt class="docutils literal">Sample</tt> model. Notice the <tt class="docutils literal">category</tt> choices field is still there since I need it to fill my <tt class="docutils literal">category_fk</tt>!
Also notice that I&#8217;ve added a <tt class="docutils literal">null=True</tt> to the <tt class="docutils literal">category_fk</tt> so it will allow the field to be added with a null value to the existing. I will fix that later.
We can create and run an automatic migration&nbsp;now:</p>
<pre class="code literal-block">
C:\progr\py3\migrations_tutorial&gt;python manage.py makemigrations
Migrations for 'core':
core\migrations\0002_auto_20210715_0836.py
  - Create model Category
  - Add field category_fk to sample

C:\progr\py3\migrations_tutorial&gt;python manage.py migrate
  Operations to perform:
    Apply all migrations: admin, auth, contenttypes, core, sessions
  Running migrations:
    Applying core.0002_auto_20210715_0836... OK
</pre>
<p>So now all my rows have an empty <tt class="docutils literal">category_fk</tt> field.</p>
<p>For the second step, we will create the data migration that will fill the category_fk field. First of all let&#8217;s create an empty migration (notice my app is called <tt class="docutils literal">core</tt>):</p>
<pre class="code literal-block">
C:\progr\py3\migrations_tutorial&gt;python manage.py makemigrations --empty core
Migrations for 'core':
  core\migrations\0003_auto_20210715_0844.py
</pre>
<p>Let&#8217;s take a look at what Django has created for&nbsp;us:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">migrations</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Migration</span><span class="p">(</span><span class="n">migrations</span><span class="o">.</span><span class="n">Migration</span><span class="p">):</span>

  <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">,</span> <span class="s1">&#39;0002_auto_20210715_0836&#39;</span><span class="p">),</span>
  <span class="p">]</span>

  <span class="n">operations</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">]</span>
</pre></div>
<p>This is an empty migration file, it just says that it will be run after the previous migration we just created. We&#8217;ll need to
add an operation to it that will do the needed work of filling the <tt class="docutils literal">category_fk</tt> field.</p>
<p>This can be done like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">migrations</span>

<span class="k">def</span><span class="w"> </span><span class="nf">fill_category_fk</span><span class="p">(</span><span class="n">apps</span><span class="p">,</span> <span class="n">schema_editor</span><span class="p">):</span>
  <span class="n">Sample</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">,</span> <span class="s1">&#39;Sample&#39;</span><span class="p">)</span>
  <span class="n">Category</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">,</span> <span class="s1">&#39;Category&#39;</span><span class="p">)</span>
  <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">Sample</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">category_fk</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">Category</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">sample</span><span class="o">.</span><span class="n">category</span><span class="p">)</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Migration</span><span class="p">(</span><span class="n">migrations</span><span class="o">.</span><span class="n">Migration</span><span class="p">):</span>

  <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">,</span> <span class="s1">&#39;0002_auto_20210715_0836&#39;</span><span class="p">),</span>
  <span class="p">]</span>

  <span class="n">operations</span> <span class="o">=</span> <span class="p">[</span>
      <span class="n">migrations</span><span class="o">.</span><span class="n">RunPython</span><span class="p">(</span><span class="n">fill_category_fk</span><span class="p">),</span>
  <span class="p">]</span>
</pre></div>
<p>The above should be straight forward. The only thing to notice is that you should use <tt class="docutils literal">migrations.RunPython</tt> to declare that
the migration will need to run some python code. Notice that <tt class="docutils literal">RunPython</tt> takes a second parameter with another function which
will be run during the backwards migration. In our case we don&#8217;t really need it, since we omit it, it will throw an error if
you try to apply this migration&nbsp;backwards.</p>
<p>The <tt class="docutils literal">fill_category_fk</tt> uses the <tt class="docutils literal">apps.get_model</tt> function to have access to the models it needs. You should use this instead
of importing the models directly because the current state of the database models may not be the same as the state that the
migration expects. I&#8217;m just using <tt class="docutils literal">get_or_create</tt> to insert or retrieve the proper <tt class="docutils literal">Category</tt> instance (remember that
<tt class="docutils literal">get_or_create</tt> returns an (instance, created) tuple so we need to use the first&nbsp;element).</p>
<p>Now we can try running the&nbsp;migration:</p>
<div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">progr</span>\<span class="n">py3</span>\<span class="n">migrations_tutorial</span><span class="o">&gt;</span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
<span class="n">Operations</span> <span class="n">to</span> <span class="n">perform</span><span class="p">:</span>
  <span class="n">Apply</span> <span class="nb">all</span> <span class="n">migrations</span><span class="p">:</span> <span class="n">admin</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">contenttypes</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">sessions</span>
<span class="n">Running</span> <span class="n">migrations</span><span class="p">:</span>
  <span class="n">Applying</span> <span class="n">core</span><span class="mf">.0003</span><span class="n">_auto_20210715_0844</span><span class="o">...</span> <span class="n">OK</span>
</pre></div>
<p>If any errors happened you will see the stack trace here and you will need to fix them. Don&#8217;t worry, the state of your database
will not be changed until the migration&nbsp;finishes.</p>
<p>Now our database has both the (old) <tt class="docutils literal">category</tt> and the (new) <tt class="docutils literal">category_fk</tt> fields. Each will have the same&nbsp;value!</p>
<p>Now we need to remove the old <tt class="docutils literal">category</tt> field and rename the existing <tt class="docutils literal">category_fk</tt>. Let&#8217;s do&nbsp;it!</p>
<div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Sample</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
  <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
  <span class="n">category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">PROTECT</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

  <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
<p>And run the&nbsp;migration:</p>
<pre class="code literal-block">
C:\progr\py3\migrations_tutorial&gt;python manage.py makemigrations
Migrations for 'core':
  core\migrations\0004_auto_20210715_0909.py
    - Remove field category_fk from sample
    - Alter field category on sample
</pre>
<p>Uh oh! This does not seem to do what I want. Let&#8217;s take a peek at the generated migration&nbsp;file:</p>
<div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Migration</span><span class="p">(</span><span class="n">migrations</span><span class="o">.</span><span class="n">Migration</span><span class="p">):</span>

  <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">,</span> <span class="s1">&#39;0003_auto_20210715_0844&#39;</span><span class="p">),</span>
  <span class="p">]</span>

  <span class="n">operations</span> <span class="o">=</span> <span class="p">[</span>
      <span class="n">migrations</span><span class="o">.</span><span class="n">RemoveField</span><span class="p">(</span>
          <span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category_fk&#39;</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="n">migrations</span><span class="o">.</span><span class="n">AlterField</span><span class="p">(</span>
          <span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
          <span class="n">field</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">django</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">deletion</span><span class="o">.</span><span class="n">PROTECT</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s1">&#39;core.Category&#39;</span><span class="p">),</span>
      <span class="p">),</span>
  <span class="p">]</span>
</pre></div>
<p>This will remove the <tt class="docutils literal">category_fk</tt> field we just filled from our model and then try to convert the old <tt class="docutils literal">category</tt> field
to a foreign key! If you try to run the migration you&#8217;ll get an exception because the existing <tt class="docutils literal">category</tt> field cannot be
converted to a&nbsp;ForeignKey!</p>
<p>It seems that Django migrations isn&#8217;t so smart after all&#8230; To resolve that we could just create two separate migrations:
One to remove the old <tt class="docutils literal">category</tt> field and the other to rename the <tt class="docutils literal">category_fk</tt> field to <tt class="docutils literal">category</tt>. Django would
know then that we have renamed the <tt class="docutils literal">category_fk</tt> field. This method works fine but if you are using <tt class="docutils literal">category</tt> in your
admin (or forms) django will complain with errors like&nbsp;this:</p>
<p><tt class="docutils literal">&lt;class <span class="pre">'core.admin.SampleAdmin'&gt;:</span> (admin.E108) The value of 'list_display[1]' refers to 'category', which is not a callable, an attribute of 'SampleAdmin', or an attribute or method on 'core.Sample'.</tt></p>
<p>So you&#8217;ll need to rename to fix this before running the migration (and if you actually fix it you may just bite the bullet and use category_fk to avoid re-renaming it back to&nbsp;category).</p>
<p>This is rather a pain so I&#8217;ll give you another way: Edit the created migration file to do exactly what you need, i.e remove the existing
<tt class="docutils literal">category</tt> field and rename <tt class="docutils literal">category_fk</tt> to <tt class="docutils literal">category</tt>. Here&#8217;s the migration&nbsp;file:</p>
<div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Migration</span><span class="p">(</span><span class="n">migrations</span><span class="o">.</span><span class="n">Migration</span><span class="p">):</span>

  <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">,</span> <span class="s1">&#39;0003_auto_20210715_0844&#39;</span><span class="p">),</span>
  <span class="p">]</span>

  <span class="n">operations</span> <span class="o">=</span> <span class="p">[</span>
      <span class="n">migrations</span><span class="o">.</span><span class="n">RemoveField</span><span class="p">(</span>
          <span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="n">migrations</span><span class="o">.</span><span class="n">RenameField</span><span class="p">(</span>
          <span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
          <span class="n">old_name</span><span class="o">=</span><span class="s1">&#39;category_fk&#39;</span><span class="p">,</span>
          <span class="n">new_name</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">,</span>
      <span class="p">),</span>
  <span class="p">]</span>
</pre></div>
<p>So in this migration we first remove the existing <tt class="docutils literal">category</tt> field and then we rename the <tt class="docutils literal">category_fk</tt> field to <tt class="docutils literal">category</tt>. Let&#8217;s try to run&nbsp;it:</p>
<pre class="code literal-block">
C:\progr\py3\migrations_tutorial&gt;python manage.py migrate
Operations to perform:
  Apply all migrations: admin, auth, contenttypes, core, sessions
Running migrations:
  Applying core.0004_auto_20210715_0909... OK
</pre>
<p>Success!</p>
</div>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://spapas.github.io/2021/06/15/dark-souls-saves/">Saving in Dark Souls</a>
      </h1>
    <p class="meta">
<time datetime="2021-06-15T14:20:00+03:00" pubdate>Tue 15 June 2021</time>    </p>
</header>

<div class="entry-content"><div class="section" id="introduction">
<h2>Introduction</h2>
<p>The Dark Souls Trilogy (1-2-3) from FromSoftware is one of the modern gaming classics. The games should
be experienced by everybody because of their excellent gameplay, combat mechanics, atmosphere and
character development. The defining characteristic of the Dark Souls Trilogy and what scares most gamers
is their over the top&nbsp;difficulty.</p>
<p>This great difficulty is increased even more because of the saving mechanism of these games: There&#8217;s a
single save game in the game, if you die you&#8217;ll return to a previous checkpoint (called bonfire). These
checkpoint are sparcely located within the gaming world and they are not always near boss fights, so
if you die in a boss fight you may need to kill enemies for sometime before you reach the boss again to
retry. Also, everything is permanent so if you
screw up somehow (i.e you kill an important <span class="caps">NPC</span>) there&#8217;s no way to &#8220;restore&#8221; your game; you&#8217;ll lose him
(and his items if he&#8217;s a merchant) for the rest of your current&nbsp;game!</p>
<p>If the above seems too difficult for you to even try, fear not! There a particular way to have &#8220;real&#8221; saves in all three
Dark Souls games, even if it is a little cumbersome. It will be much less cumbersome than having to restart
the game because you killed an important <span class="caps">NPC</span>.</p>
</div>
<div class="section" id="disclaimer">
<h2>Disclaimer</h2>
<p>Before describing the technique I&#8217;d like to provide some disclaimer&nbsp;points:</p>
<ul class="simple">
<li>The Dark Souls Trilogy should be experienced as-is. You shouldn&#8217;t use this method because you&#8217;ll make the games easier and not as difficult as it was intented by their publisher. Use it only as a last resort when you are going to abandon the&nbsp;game.</li>
<li>Most other Dark Souls players will mock you and hate you for using these&nbsp;techniques.</li>
<li>You may break your save if you do something wrong so I won&#8217;t be held responsible for losing your&nbsp;progress.</li>
</ul>
</div>
<div class="section" id="how-dark-souls-saves-your-game">
<h2>How Dark Souls saves your&nbsp;game</h2>
<p>All three Dark Souls games have a particular directory in your hard disk where they place their save game. There&#8217;s a single file with your save game that has an extension endingg in&nbsp;.sl2.</p>
<p>From my <span class="caps">PC</span>, the folders and names of each of these games are the&nbsp;following:</p>
<ul class="simple">
<li>Dark Souls Remastered: Folder <tt class="docutils literal"><span class="pre">C:\Users\username\Documents\<span class="caps">NBGI</span>\<span class="caps">DARK</span></span> <span class="caps">SOULS</span> <span class="caps">REMASTERED</span>\1638</tt>, filename: <tt class="docutils literal"><span class="caps">DRAKS0005</span>.sl2</tt></li>
<li>Dark Souls 2: Scholar of the First Sin: <tt class="docutils literal"><span class="pre">C:\Users\username\AppData\Roaming\DarkSoulsII\0110000100000666\</span></tt>, filename: <tt class="docutils literal"><span class="caps">DS2SOFS0000</span>.sl2</tt></li>
<li>Dark Souls 3: <tt class="docutils literal"><span class="pre">C:\Users\username\AppData\Roaming\DarkSoulsIII\0110000100000666\</span></tt>, filename: <tt class="docutils literal"><span class="caps">DS3000</span>.sl2</tt></li>
</ul>
<p>Notice that the username will be your user&#8217;s username while the numbers you see will probably be&nbsp;different.</p>
<p>Now, when some particular action occurs (i.e when you kill an enemy) the game will overwrite the file in the folder with a new one
with the changes. You will see a flame in the top right of your screen when this happens. Notice that this happens on particular moments,
for example if you are just moving without encountering enemies your game won&#8217;t be saved (so if for example you make a difficult jump
the game won&#8217;t be saved right after the jump). Also, Dark Souls will save your game when you quit (so if you do a difficult jump, quit the game
and restart you will be after the&nbsp;jump).</p>
<p>The above description enables you to actually have proper saves: Quit the game (not completely, just display the title screen),
backup the save file in a different location, start the game.
If you die, quit the game (again just display the title screen), copy over from the backup to the save location and start the game again.
Notice that you should always quit the
game before restoring from a save file because Dark Souls reads the saves only then.
If you copy over a backup save while playing the game the
backup will be just overwritten with the new save&nbsp;data.</p>
<p>However you can backup your game without actually quitting: When you&#8217;ve reach a point you feel it needs saving, just alt+tab outside of your game
copy over the save to a backup location (you can even give it a proper name) and continue playing. When you want to load that save you&#8217;ll need to
quit, restore the backup and start the game again. Notice that when you do this the game will show you a warning that you &#8220;did not properly quit
the game&#8221;. From what I can understand, when you quit the game Dark Souls writes some flag to your save game. If you shut down your <span class="caps">PC</span> while
playing (or copy over the save game) then Dark Souls won&#8217;t write that flag to your save game. However from my experience in all three Dark Souls
games this warning doesn&#8217;t mean anything, the game will continue normally without any&nbsp;problems.</p>
</div>
<div class="section" id="making-it-simpler">
<h2>Making it&nbsp;simpler</h2>
<p>Copying over the save game in a different location is cumbersome and makes it easy to do mistakes (i.e copy instead of restoring your backup
save, copy over the current save to your backup). To make this process easier I will give you here a simple autohotkey script that will do
this for you using F7 to backup your save and F8 to restore it (don&#8217;t forget that you can only restore when you have quit the game and see the
title&nbsp;screen).</p>
<p>To use this script you need the excellent <a class="reference external" href="https://www.autohotkey.com/">autohotkey</a> utility. Download and install it and then execute the script by double clicking it (it needs to have an .ahk&nbsp;extension):</p>
<pre class="code literal-block">
#SingleInstance Force
#MaxHotkeysPerInterval 99999
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.


SAVE_FOLDER_DS := &quot;C:\Users\serafeim\AppData\Roaming\DarkSoulsII\0110000100000666\&quot;
SAVE_FILENAME_DS := &quot;DS2SOFS0000.sl2&quot;
BACKUP_FOLDER_DS := &quot;C:\Users\serafeim\Documents\ds2\&quot;


GetFolderMax(f)
{
  MAX := 0
  Loop, Files, %f%\*.*
  {
    NUM_EXT := 1 * A_LoopFileExt

    if (NUM_EXT&gt; MAX)
    {
      MAX := NUM_EXT
    }
  }

  return MAX
}

F7::
{
  ;MsgBox % &quot;F7&quot;
  ;MsgBox % &quot;Will copy &quot; . SAVE_FILENAME_DS . &quot; to &quot; . BACKUP_FOLDER_DS

  MAX_P1 := GetFolderMax(BACKUP_FOLDER_DS) + 1
  ;MsgBox % &quot;Max + 1 is &quot; . MAX_P1

  SOURCE := SAVE_FOLDER_DS . SAVE_FILENAME_DS
  DEST := BACKUP_FOLDER_DS . SAVE_FILENAME_DS . &quot;.&quot; . MAX_P1

  ;MsgBox % &quot;Will copy &quot; . SOURCE . &quot; to &quot; . DEST
  FileCopy, %SOURCE%, %DEST%
  return
}

F8::
{
  ;MsgBox % &quot;F8&quot;
  MAX := GetFolderMax(BACKUP_FOLDER_DS)
  MAX_FILE := BACKUP_FOLDER_DS . SAVE_FILENAME_DS . &quot;.&quot; . MAX
  ;MsgBox % &quot;Maxfile is &quot; . MAX_FILE

  SOURCE := MAX_FILE
  DEST := SAVE_FOLDER_DS . SAVE_FILENAME_DS

  ;MsgBox % &quot;Will copy &quot; . SOURCE . &quot; to &quot; . DEST
  FileCopy, %SOURCE%, %DEST%, 1
  return
}
</pre>
<p>The script is very easy to understand but I&#8217;ll explain it a bit here: First of all you need to define the
<tt class="docutils literal">SAVE_FOLDER_DS, SAVE_FILENAME_DS</tt> and <tt class="docutils literal">BACKUP_FOLDER_DS</tt> variables. The first two are the folder and
filename of your game (in my example I&#8217;m using it for <span class="caps">DS2</span>). The <tt class="docutils literal">BACKUP_FOLDER_DS</tt> is where you want your
backups to be placed. This script will backup your save file in that folder when you press F7. To keep better
backups it will append an increasing number in the end of your filename so when you press F7 you will see
that it will create a file named <tt class="docutils literal"><span class="caps">DS2SOFS0000</span>.sl2.0</tt>, then <tt class="docutils literal"><span class="caps">DS2SOFS0000</span>.sl2.1</tt> etc in the <tt class="docutils literal">BACKUP_FOLDER_DS</tt>.
When you press F8 it will get the file with the biggest number in the end, strip that number and copy it over your
Dark Souls save&nbsp;file.</p>
<p>As you can see there&#8217;s a <tt class="docutils literal">GetFolderMax</tt> function that retrieves the max number from your backup folder. Then,
F7 and F8 will use that function to either copy over your Dark Souls save file in the backup with an increased
number or retrieve the latest one and restore it in your save&nbsp;folder.</p>
<p>The script works independently of the game so if you configure it and press F7 you should see that the backup file
will be created. Also if you delete (or rename) your Dark Souls save file and press F8 you should see that it will
be restore by the&nbsp;backup.</p>
<p>So using the above script, my play workflow is like this: Start Dark Souls, kill an enemy, press F7, kill another
enemy, press F7 (depending on how difficult the enemies are of course). Die from an enemy,
quit the game, press F8, continue my&nbsp;game.</p>
<p>One thing to notice is that in Windows 10 it seems that the hotkeys are not captured from autohotkey when the game
runs in full screen. When I run the games in a window it works fine. Some people say that if you run autohotkey
as administrator it will capture the key-presses but it didn&#8217;t work fine for&nbsp;me.</p>
</div>
</div>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://spapas.github.io/2021/02/08/django-matplotlib/">Using matplotlib to generate graphs in Django</a>
      </h1>
    <p class="meta">
<time datetime="2021-02-08T14:55:00+02:00" pubdate>Mon 08 February 2021</time>    </p>
</header>

<div class="entry-content"><p>Nowadays the most common way to generate graphs in your Django apps (or web apps in general) is to
pass the data as json to the page and use a javascript lib. The big advantage these javascript libs
offer is interactivity: You can hover over points to see their values making studying the graph much&nbsp;easier.</p>
<p>Yet, there are times where you need some simple (or not so simple) graphs and don&#8217;t care about
offering interactivity through javascript nor you want to mess with javascript at all. For these cases
you can generate the graphs server-side using django and the <a class="reference external" href="https://matplotlib.org/">matplotlib</a> plot&nbsp;library.</p>
<p>matplotlib is a very popular library in the scientific cycles. It can be used to create more or less
any kind of graph and has unlimited capabilities! I won&#8217;t go into much detail about matplotlib here
because the subject is huge but I recommend you to take a look at the <a class="reference external" href="https://matplotlib.org/tutorials/index.html">comprehensive tutorials</a> on its&nbsp;homepage.</p>
<p>To install matplotlib on unix you need to do a <tt class="docutils literal">pip install matplotlib</tt> while, for windows,
you can download the proper ready-made binaries from the <a class="reference external" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/">Unofficial Windows Binaries for Python Extension Packages</a>
site that offers pre-compiled versions of almost all python packages! Just make sure to download the correct version
for your python version and architecture (32bit or 64bit). After you&#8217;ve downloaded the file you can install it
for your project using something like <tt class="docutils literal">pip install <span class="pre">matplotlib-3.3.4-cp38-cp38-win32</span></tt> from inside your virtual&nbsp;environment.</p>
<p>Before actually creating a graph I recommend playing a bit with matplotlib to understand the basic concepts. Start a django shell
and do the&nbsp;following:</p>
<pre class="code literal-block">
&gt;&gt;&gt; import matplotlib.pyplot as plt
&gt;&gt;&gt; fig, ax = plt.subplots()
&gt;&gt;&gt; ax.plot([1, 2, 3, 4], [1, 4, 2, 3])
[&lt;matplotlib.lines.Line2D object at 0x0FBF5F58&gt;]
&gt;&gt;&gt; fig.show()
</pre>
<p>The above should open a window and display the graph. This works fine on Window 10 with python 3.8 and matplotlib 3.3.4 but I
can&#8217;t guarantee other versions. If however <tt class="docutils literal">fig.show()</tt> shows an error or does not display the graph, you can just do something&nbsp;like:</p>
<pre class="code literal-block">
&gt;&gt;&gt; fig.savefig('test')
</pre>
<p>that will output the figure in a file named <tt class="docutils literal">test.png</tt> which you can the view. Please notice that the above are with the default
options; there are various ways that matplotlib can be&nbsp;configured.</p>
<p>In any case, after you&#8217;ve played a bit with the shell and generate a nice figure (take a look at the <a class="reference external" href="https://matplotlib.org/3.1.1/gallery/index.html">matplotlib examples</a> for
inspiration) you are ready to integrate matplotlib with&nbsp;Django!</p>
<p>I can think of two ways which you can integrate matplotlib with&nbsp;Django:</p>
<ul class="simple">
<li>Use a special view that would render the graph and just return a <span class="caps">PNG</span> object. Use a normal <tt class="docutils literal">&lt;img&gt;</tt> element pointing to that view in your&nbsp;template.</li>
<li>Put the graph in the context of a normal django view encoded as a base64 object and use a special <tt class="docutils literal">&lt;img&gt;</tt> with an <tt class="docutils literal">src</tt> attribute of <tt class="docutils literal"><span class="pre">data:image/png;base64,{{</span> graph }}</tt> to actually embed the image in the&nbsp;template!</li>
</ul>
<p>I prefer the second approach because it&#8217;s much more flexible since you don&#8217;t need to create a different Django view for each graph you
want to generate. For this reason I will explain this approach right now and give you some hints if you need to follow the dedicated
graph view&nbsp;approach.</p>
<p>Our view&nbsp;should:</p>
<ul class="simple">
<li>Generate the&nbsp;graph</li>
<li>Save it in a BytesIO&nbsp;object</li>
<li>Convert that BytesIO to&nbsp;base64</li>
<li>Put the string value of the base64 encoded graph to the&nbsp;template</li>
</ul>
<p>Then the template will just output that base64 value using the special img we mentioned&nbsp;above.</p>
<p>Here&#8217;s a snippet of a view that does exactly&nbsp;this:</p>
<pre class="code literal-block">
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
import io, base64
from django.db.models.functions import TruncDay
from matplotlib.ticker import LinearLocator

class SampleListView(ListView):
  model = Sample

  def get_context_data(self, **kwargs):

    by_days = get_queryset().annotate(day=TruncDay('created_on')).values('day').annotate(c=Count('id')).order_by('day')
    days = [x['day'] for x in by_days]
    counts = [x['c'] for x in by_days]

    fig, ax = plt.subplots(figsize=(10,4))
    ax.plot(days, counts, '--bo')

    fig.autofmt_xdate()
    ax.fmt_xdata = mdates.DateFormatter('%Y-%m-%d')
    ax.set_title('By date')
    ax.set_ylabel(&quot;Count&quot;)
    ax.set_xlabel(&quot;Date&quot;)
    ax.grid(linestyle=&quot;--&quot;, linewidth=0.5, color='.25', zorder=-10)
    ax.yaxis.set_minor_locator(LinearLocator(25))

    flike = io.BytesIO()
    fig.savefig(flike)
    b64 = base64.b64encode(flike.getvalue()).decode()
    context['chart'] = b64
    return context
</pre>
<p>Please notice that after importing <tt class="docutils literal">matplotlib</tt> I&#8217;m using the <tt class="docutils literal"><span class="pre">matplotlib.use('Agg')</span></tt> command to use
the <tt class="docutils literal">Agg</tt> backend. You can <a class="reference external" href="https://matplotlib.org/faq/usage_faq.html#what-is-a-backend">learn more about backends here</a>, but it should be sufficient for now to
know that using the <tt class="docutils literal">Agg</tt> you&#8217;ll be able to save your graphs in&nbsp;png.</p>
<p>The above code uses some Django <span class="caps">ORM</span> trickery to group values by their created_on day value and then
assings the days and counts to two arrays (<tt class="docutils literal">days</tt>, <tt class="docutils literal">counts</tt>). It then creates a new empty graph
with a specific size using <tt class="docutils literal">fig, ax = <span class="pre">plt.subplots(figsize=(10,4))</span></tt> and plots the data with some
fancy styles with <tt class="docutils literal">ax.plot(days, counts, <span class="pre">'--bo')</span></tt>. After that it sets various options in the graph
like the labels, grid&nbsp;etc.</p>
<p>The save and convert to base64 part follows: A new file like object is created using <tt class="docutils literal">io.BytesIO()</tt> and
the figure is saved there (<tt class="docutils literal">fig.savefig(flike)</tt>). Then it is converted to a base64 string using the
<tt class="docutils literal">b64 = <span class="pre">base64.b64encode(flike.getvalue()).decode()</span></tt>. Finally it is just passed to the context of
the template as <tt class="docutils literal">chart</tt>.</p>
<p>Now, inside the template I&#8217;ve got the following&nbsp;line:</p>
<pre class="code literal-block">
&lt;img src='data:image/png;base64,{{ chart }}'&gt;
</pre>
<p>This will include the data of the chart inline and display it as a png image. If you&#8217;ve followed along
you should be able to see the graph when you load that&nbsp;view!</p>
<p>If instead of including the graphs in your normal django template views you want to use a dedicated
graph-generating view, you can follow my
<a class="reference external" href="https://spapas.github.io/2014/09/15/django-non-html-responses/">Django non-<span class="caps">HTML</span> responses tutorial</a>. You could then
modify the <tt class="docutils literal">render_to_response</tt> method of your view like&nbsp;this:</p>
<pre class="code literal-block">
def render_to_response(self, generator, **response_kwargs):
    response = HttpResponse(content_type='image/png')

    fig, ax = plt.subplots(figsize=(10,4))
    # fill the report here

    fig.savefig(response)
    return response
</pre>
<p>Since <tt class="docutils literal">response</tt> is a file-like object you can save your graph directly&nbsp;there!</p>
</div>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://spapas.github.io/2021/01/07/django-hashids/">Using hashids to hide ids of objects in Django</a>
      </h1>
    <p class="meta">
<time datetime="2021-01-07T12:20:00+02:00" pubdate>Thu 07 January 2021</time>    </p>
</header>

<div class="entry-content"><p>A common pattern in Django urls is to have the following setup for <span class="caps">CRUD</span> operations of your objects. Let&#8217;s suppose we
have a <tt class="docutils literal">Ship</tt> object. It&#8217;s <span class="caps">CRUD</span> urls would be something&nbsp;like:</p>
<ul class="simple">
<li><tt class="docutils literal">/ships/create/</tt> To add a new&nbsp;object</li>
<li><tt class="docutils literal">/ships/list/</tt> To display a list of your&nbsp;objects</li>
<li><tt class="docutils literal">/ships/detail/id/</tt> To display the particular object with that id (primary&nbsp;key)</li>
<li><tt class="docutils literal">/ships/update/id/</tt> To update/edit the particular object with that id (primary&nbsp;key)</li>
<li><tt class="docutils literal">/ships/delete/id/</tt> To delete the particular object with that id (primary&nbsp;key)</li>
</ul>
<p>This is very easy to implement using class based views. For example for the detail view add the following to your&nbsp;views.py:</p>
<pre class="code literal-block">
class ShipDetailView(DetailView):
    model = models.Ship
</pre>
<p>and then in your urls.py add the&nbsp;line:</p>
<pre class="code literal-block">
urlpatterns = [
  # ...
  path(
      &quot;detail/&lt;int:pk&gt;/&quot;,
      login_required(views.ShipDetailView.as_view()),
      name=&quot;ship_detail&quot;,
  ),
</pre>
<p>This path means that it expects an integer (<cite>int</cite>) which will be used as the primary key of the ship (<cite>pk</cite>).</p>
<p>Now, a common requirement if you are using integers as primary keys is to not display them to the public. So you
shouldn&#8217;t allow the users to write something like <tt class="docutils literal">/ships/detail/43</tt> to see the details of ship 43. Even if you
have add proper authorization (each user only sees the ids he has access to) you are opening a window for abuse. Also
you don&#8217;t want the users to be able to estimate how many objects there are in your database (if a user creates a
new ship he&#8217;ll get the latest id and know approximately how many ships are in your&nbsp;database).</p>
<p>One simple requirement is to use some encryption mechanism to encode the ids to some string and display that string
to the public urls. When you receive the string you&#8217;ll then decode it to get the&nbsp;id.</p>
<p>Thankfully, not only there&#8217;s a particular library that makes this whole encode/decode procedure very easy but Django
has functionality to make trivial to integrate this functionality to an existing project with only miniman&nbsp;changes!</p>
<p>The library I propose for this is called <a class="reference external" href="https://github.com/davidaurelio/hashids-python">hashids-python</a>. This is the python branch of the <a class="reference external" href="https://hashids.org/">hashids</a> library that works
for many languages. If you take a look at the documentation you&#8217;ll see that it can be used like&nbsp;this:</p>
<pre class="code literal-block">
from hashids import Hashids
hashids = Hashids()
hashid = hashids.encode(123) # 'Mj3'
ints = hashids.decode('xoz') # (456,)
</pre>
<p>This library offers two useful utilities: Define a random salt so that the generated hashids will be unique for your app
and add a minimum hash length so that the real length of the id will be obfuscated. I&#8217;ve found out that a length of 8 characters
will be more than enough to encode all possible ids up to 99&nbsp;billion:</p>
<pre class="code literal-block">
hashids = Hashids(min_length=8)
len(hashids.encode(99_999_999_999)) # 8
</pre>
<dl class="docutils">
<dt>This is more than enough since by default django will use an integer to store the primary keys which is around 4 billion (you actually&nbsp;can</dt>
<dd>use 7 characters to encode up to 5 billion but I prefer even&nbsp;numbers.</dd>
</dl>
<p>Finally, you can use a different alphabet, for example to use all greek&nbsp;characters:</p>
<pre class="code literal-block">
hashids = Hashids(alphabet='ΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩ')
hashids.encode(123) # 'ΣΝΦ'
</pre>
<p>This isn&#8217;t recommended though for our case because not all characters are&nbsp;url-safe.</p>
<p>To integrate the hashids with Django we are going to use a <a class="reference external" href="https://docs.djangoproject.com/en/3.1/topics/http/urls/#registering-custom-path-converters">custom path converter</a>. The custom path converter
is similar to the <tt class="docutils literal">int</tt> portion of the <tt class="docutils literal"><span class="pre">&quot;detail/&lt;int:pk&gt;/&quot;</span></tt> of the url i.e it will retrieve something and convert it
to a python object. To implement your custom path converter just add a file named utils.py in one of your applications with
the following&nbsp;conents:</p>
<pre class="code literal-block">
from hashids import Hashids
from django.conf import settings

hashids = Hashids(settings.HASHIDS_SALT, min_length=8)


def h_encode(id):
    return hashids.encode(id)


def h_decode(h):
    z = hashids.decode(h)
    if z:
        return z[0]


class HashIdConverter:
    regex = '[a-zA-Z0-9]{8,}'

    def to_python(self, value):
        return h_decode(value)

    def to_url(self, value):
        return h_encode(value)
</pre>
<p>The above will generate a <tt class="docutils literal">hashids</tt> global object with a min length of 8 as discussed above and retrieving
a custom salt from your settings (just add <tt class="docutils literal">HASHIDS_SALT=some_random_string</tt> to your project settings). The
<tt class="docutils literal">HashIdConverter</tt> defines a regex that will match the default aplhabet that hasid uses and two methods to convert
from url to python and vice versa. Notice that <tt class="docutils literal">hashids.decode</tt> returns an array so we&#8217;ll retrieve the first number&nbsp;only.</p>
<p>To use that custom path converter you will need to add the following lines to your urls.py to register your
<tt class="docutils literal">HashIdConverter</tt> as <tt class="docutils literal">hashid</tt>:</p>
<pre class="code literal-block">
from core.utils import HashIdConverter

register_converter(HashIdConverter, &quot;hashid&quot;)
</pre>
<p>and then use it in your urls.py like&nbsp;this:</p>
<pre class="code literal-block">
urlpatterns = [
  # ...
  path(
      &quot;detail/&lt;hashid:pk&gt;/&quot;,
      login_required(views.ShipDetailView.as_view()),
      name=&quot;ship_detail&quot;,
  ),
</pre>
<p>That&#8217;s it! Your CBVs do not need any other changes! The <tt class="docutils literal">hashid</tt> will match the hashid in the url and convert it to
the model&#8217;s pk using the to_python method we defined&nbsp;above!</p>
<p>Of course you should also add the opposite direction (i.e convert from the primary key to the hashid). To do that we&#8217;ll
add a <tt class="docutils literal">get_absolute_url</tt> method to our Ship model, like&nbsp;this:</p>
<pre class="code literal-block">
class Ship(models.Model):
  def get_hashid(self):
      return h_encode(self.id)

  def get_absolute_url(self):
      return reverse(&quot;ship_detail&quot;, args=[self.id])
</pre>
<p>Notice that you just call the <tt class="docutils literal">reverse</tt> function passing <tt class="docutils literal">self.id</tt>; everything else will be done
automatically from the <tt class="docutils literal">hashid</tt> custom path generator <tt class="docutils literal">to_url</tt> method. I&#8217;ve also added a <tt class="docutils literal">get_hashid</tt>
method to my model to have quick access to the id in case I need&nbsp;it.</p>
<p>Now you don&#8217;t have any excuses to not hide your database ids from the&nbsp;public!</p>
</div>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="https://spapas.github.io/2020/09/18/wagtail-add-posts-timeline/">Adding a timeline of your wagtail Posts</a>
      </h1>
    <p class="meta">
<time datetime="2020-09-18T16:20:00+03:00" pubdate>Fri 18 September 2020</time>    </p>
</header>

<div class="entry-content"><div class="section" id="intro">
<h2>Intro</h2>
<p>In this small post I&#8217;ll present a small tutorial on how to add a timelne of your <a class="reference external" href="https://wagtail.io/">Wagtail</a>
posts using the <a class="reference external" href="http://horizontal-timeline.ycodetech.co.uk/">Horizontal Timeline</a> jquery&nbsp;plugin.</p>
<p>This will be a step by step tutorial to help you understand the concepts. As a base
we&#8217;ll use the <cite>bakerydemo</cite> wagtail demo. After you&#8217;ve properly followed the instructions
you&#8217;ll see that this demo site has a &#8220;Blog&#8221; that contains articles about breads. Following
we&#8217;ll add a timeline of these articles grouped by their publish&nbsp;month.</p>
</div>
<div class="section" id="decisions-decisions">
<h2>Decisions,&nbsp;decisions</h2>
<p>For this demo we&#8217;ll include <em>all</em> the &#8220;blog&#8221; pages in the timeline. However we may
wanted to select which pages we want to include in the timeline. This could be done
either by adding an extra field in our blog pages (class <cite>blog.models.BlogPage</cite>) like
<cite>include_in_timeline</cite> or by using the Wagtail <a class="reference external" href="https://docs.wagtail.io/en/latest/reference/contrib/modeladmin/">ModelAdmin</a> functionality. For the ModelAdmin
we&#8217;d create an extra Django model (i.e <cite>BlogTimeLineEntry</cite>) that would contain a link
to the original page. We could enchance this field with extra fields that we may
want to display in the timeline, for example a smaller description. Something like&nbsp;this:</p>
<!-- code

class TimeLineEntry(models.Model):
        description = RichTextField()
        page = models.ForeignKey("blog.BlogPage", on_delete=models.PROTECT)
        panels = [ FieldPanel("description"), PageChooserPanel("page")]

        def pub_date(self):
                return self.page.date_published

        pub_date.admin_order_field = "page__date_published" -->
<p>The other decision is where to actually output the timeline. For the demo we&#8217;ll just put it
in the <cite>BlogIndexPage</cite> page. If we wanted to add the timeline in a number of different
page types then we&#8217;d need to add a template tag that would include it. But since it will be
available only to a single page type we&#8217;ll just need to override the <cite>get_context</cite> method and
the template of that particular&nbsp;type.</p>
</div>
<div class="section" id="overriding-the-get-context">
<h2>Overriding the&nbsp;get_context</h2>
<p>As we described above, we want to group the timeline entries based on their publish month. For
this, we&#8217;ll use the following code in the <tt class="docutils literal">BlogIndexPage.get_context</tt> method:</p>
<div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">BlogIndexPage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">context</span><span class="p">[</span><span class="s1">&#39;posts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">BlogPage</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">descendant_of</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">live</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span>
        <span class="s1">&#39;-date_published&#39;</span><span class="p">)</span>

    <span class="n">entries</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s1">&#39;posts&#39;</span><span class="p">]</span>
    <span class="n">dentries</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
        <span class="n">month</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">date_published</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%m/%Y&quot;</span><span class="p">)</span>
        <span class="n">month_entries</span> <span class="o">=</span> <span class="n">dentries</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">month</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">month_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">dentries</span><span class="p">[</span><span class="n">month</span><span class="p">]</span> <span class="o">=</span> <span class="n">month_entries</span>

    <span class="n">lentries</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;date_small&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">,</span>
                <span class="s2">&quot;date_large&quot;</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">date_published</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%B %Y&quot;</span><span class="p">),</span>
                <span class="s2">&quot;entries&quot;</span><span class="p">:</span> <span class="n">v</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">dentries</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">],</span>
        <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">z</span><span class="p">:</span> <span class="n">z</span><span class="p">[</span><span class="s2">&quot;entries&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">date_published</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">context</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">timeline</span><span class="o">=</span><span class="n">lentries</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">context</span>
</pre></div>
<p>So what&#8217;s the purpose of the above? First of all we use <cite>super</cite> to retrieve the context that
any parent classes may have setup. After that we add a <cite>posts</cite> attribute to the context
that is a queryset of all the published children of the current page (which is the <cite>BlogIndexPage</cite>),
sorted by their published&nbsp;date.</p>
<p>In the <cite>for</cite> loop that follows, do some dict trickery to &#8220;gather&#8221; all entries for a particlular month/year
in a list under that particular key in the <cite>dentries</cite> dict.</p>
<p>Finally, we create the <cite>lentries</cite> list which will be a list of the&nbsp;form:</p>
<div class="highlight"><pre><span></span><span class="p">[{</span>
        <span class="s2">&quot;date_small&quot;</span><span class="p">:</span> <span class="s2">&quot;09/2020&quot;</span>
        <span class="s2">&quot;date_large&quot;</span><span class="p">:</span> <span class="s2">&quot;September 2020&quot;</span>
        <span class="s2">&quot;entries: [BlogPage, BlogPage, BlogPage...]</span>
<span class="p">},</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
<p>This struct will help us in the next step when we implement the timeline&nbsp;template.</p>
</div>
<div class="section" id="fixing-the-template">
<h2>Fixing the&nbsp;template</h2>
<p>To use the horizontal timeline we need to add a couple of css/js dependencies to our template. For this,
we&#8217;ll first go to the bakerydemotemplatesbase.html file and add the following snippet near the end of the file just before
<tt class="docutils literal">&lt;/body&gt;</tt>:</p>
<pre class="code literal-block">
{% block extra_script %}
{% endblock %}
</pre>
<p>The above is required to give us a placeholder for adding some needed js dependencies and&nbsp;code.</p>
<p>After that we&#8217;ll go to the <tt class="docutils literal">bakerydemo\templates\blog\blog_index_page.html</tt> file and add the following just before
<tt class="docutils literal">{% block content %}</tt></p>
<pre class="code literal-block">
{% block head-extra %}
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;//cdn.jsdelivr.net/gh/ycodetech/horizontal-timeline-2.0&#64;2/css/horizontal_timeline.2.0.min.css&quot;&gt;
        &lt;style&gt;

                .timeline .selected {
                        font-size: 24px;
                        font-weight: bold;
                }

                #timeline ol {
                        list-style: none;
                }

                .horizontal-timeline .events-content li {
                        background: #f2f2f2;
                        font-size: .8em;
                }

                #timeline img {
                        width: 200px;
                }
        &lt;/style&gt;

{% endblock head-extra %}
</pre>
<p>And the following at the end of the&nbsp;file</p>
<pre class="code literal-block">
{% block extra_script %}

        &lt;script src=&quot;//cdn.jsdelivr.net/gh/ycodetech/horizontal-timeline-2.0&#64;2/JavaScript/horizontal_timeline.2.0.min.js&quot;&gt;&lt;/script&gt;

        &lt;script&gt;

        $(function() {
                $('#timeline').horizontalTimeline({
                dateIntervals: {
                        &quot;desktop&quot;: 200,
                        &quot;tablet&quot;: 150,
                        &quot;mobile&quot;: 120,
                        &quot;minimal&quot;: true
                }
                });
        })

        &lt;/script&gt;
{% endblock %}
</pre>
<p>Notice that the <tt class="docutils literal"><span class="pre">head-extra</span></tt> block is already there in the base.html file so we don&#8217;t need to add it again. It just has some
styling changes for the timeline to be displayed nice. Also the <tt class="docutils literal">&lt;script&gt;</tt> tags we added just include the needed dependency
and initialize the timeline&nbsp;component.</p>
<p>Of course we haven&#8217;t yet added the actual timeline! To do that, we&#8217;ll  need to add a file named <tt class="docutils literal">timeline_partial.html</tt> under the
<tt class="docutils literal">blog/templates/blog</tt> folder (same folder that <tt class="docutils literal">blog_index_page.html</tt> is) with the&nbsp;following:</p>
<pre class="code literal-block">
{% load wagtailcore_tags wagtailimages_tags %}
&lt;div class=&quot;horizontal-timeline&quot; id=&quot;timeline&quot;&gt;
  &lt;div class=&quot;events-content&quot;&gt;
        &lt;ol&gt;

          {% for month in timeline %}
                &lt;li class=&quot;{% if forloop.last %}selected{% endif %}&quot; data-horizontal-timeline='{&quot;date&quot;: &quot;{{ month.date_small }}&quot;}'&gt;
                  &lt;h3&gt;{{ month.date_large }}&lt;/h3&gt;

                  {% for te in month.entries %}
                        &lt;div class='row'&gt;

                                &lt;div class='col-md-6'&gt;
                                  &lt;h4&gt;&lt;a href='{% pageurl te %}'&gt;{{ te.title }}&lt;/a&gt;&lt;/h4&gt;
                                  &lt;span&gt;{{ te.introduction }}&lt;/span&gt;
                                &lt;/div&gt;
                                &lt;div class='col-md-6'&gt;
                                  {% with img=te.image %}
                                        {% image img width-200 as img_thumb %}
                                        &lt;img class=&quot;&quot; src=&quot;{{ img_thumb.url }}&quot; alt=&quot;{{ img.title }}&quot;&gt;
                                  {% endwith %}
                                &lt;/div&gt;

                        &lt;/div&gt;
                        &lt;div class=&quot;clear bottommargin-sm&quot;&gt;&lt;/div&gt;
                  {% endfor %}
                &lt;/li&gt;
          {% endfor %}

        &lt;/ol&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>
<p>The above will generate a <tt class="docutils literal">&lt;li <span class="pre">data-horizontal-timeline='{&quot;date&quot;:</span> <span class="pre">&quot;01/2020&quot;}&gt;</span></tt> list element for all months and
inside that it will add an <tt class="docutils literal">&lt;h3&gt;</tt> with the full name of the month and a bunch of bootstrap rows, one for the
entries of that particular month (including its title, description and  their image at the side). It should be easy enough to&nbsp;follow.</p>
<p>Finally, we need to incldue the above partial template. So add the line <tt class="docutils literal">{% include &quot;blog/timeline_partial.html&quot; %}</tt>
immediately above the <tt class="docutils literal">&lt;div <span class="pre">class=&quot;row</span> <span class="pre">row-eq-height</span> <span class="pre">blog-list&quot;&gt;</span></tt> line in the file <tt class="docutils literal">blog_index_page.html</tt>.</p>
<p>If you&#8217;ve followed the instructions you should be able to see something like&nbsp;this:</p>
<img alt="The timeline" src="/images/tl-demo.gif" style="width: 640px;" />
</div>
</div>
  		</article>
<div class="pagination">
    <a class="prev" href="https://spapas.github.io/index5.html">&larr; Older</a>

    <a class="next" href="https://spapas.github.io/index3.html">Newer &rarr;</a>
  <br />
</div></div>
<aside class="sidebar">
  
  <section>
    <br />
    <a href='/feeds/all.atom.xml'>Atom</a>
    |
    <a href='/feeds/all.rss.xml'>RSS</a>
  </section>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- Sidebar unit -->
  <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7673322832689008" data-ad-slot="2720624730"
    data-ad-format="auto" data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>


  <script async src="https://cse.google.com/cse.js?cx=612920e5ca9da850c"></script>
  <div class="gcse-search"></div>

  
  <section>
    <h1>Support me</h1>

    You can show your appreciation for anything useful you've found here by 
    buying me a coffee 
    <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="spapas" data-color="#FFDD00" data-emoji=""  data-font="Lato" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>

    or donating me some bitcoin to this address:
    <small><pre>bc1qx42vp8napheaewhnx0rk0mttdrdrtvw6czvxhl</pre></small>
    <svg shape-rendering="crispEdges" height="200" width="200" viewBox="0 0 29 29" class="qrcode">
      <path fill="#FFFFFF" d="M0,0 h29v29H0z"></path><path fill="#000000" d="M0 0h7v1H0zM9 0h2v1H9zM12 0h1v1H12zM14 0h2v1H14zM18 0h2v1H18zM22,0 h7v1H22zM0 1h1v1H0zM6 1h1v1H6zM8 1h1v1H8zM11 1h1v1H11zM14 1h5v1H14zM22 1h1v1H22zM28,1 h1v1H28zM0 2h1v1H0zM2 2h3v1H2zM6 2h1v1H6zM8 2h4v1H8zM17 2h1v1H17zM22 2h1v1H22zM24 2h3v1H24zM28,2 h1v1H28zM0 3h1v1H0zM2 3h3v1H2zM6 3h1v1H6zM9 3h2v1H9zM14 3h3v1H14zM18 3h1v1H18zM22 3h1v1H22zM24 3h3v1H24zM28,3 h1v1H28zM0 4h1v1H0zM2 4h3v1H2zM6 4h1v1H6zM8 4h1v1H8zM11 4h1v1H11zM13 4h1v1H13zM15 4h2v1H15zM18 4h1v1H18zM22 4h1v1H22zM24 4h3v1H24zM28,4 h1v1H28zM0 5h1v1H0zM6 5h1v1H6zM8 5h2v1H8zM14 5h2v1H14zM19 5h2v1H19zM22 5h1v1H22zM28,5 h1v1H28zM0 6h7v1H0zM8 6h1v1H8zM10 6h1v1H10zM12 6h1v1H12zM14 6h1v1H14zM16 6h1v1H16zM18 6h1v1H18zM20 6h1v1H20zM22,6 h7v1H22zM8 7h2v1H8zM11 7h1v1H11zM15 7h1v1H15zM17 7h2v1H17zM0 8h2v1H0zM3 8h1v1H3zM6 8h2v1H6zM10 8h1v1H10zM12 8h3v1H12zM20 8h1v1H20zM22 8h3v1H22zM26 8h2v1H26zM1 9h1v1H1zM3 9h3v1H3zM8 9h1v1H8zM10 9h1v1H10zM12 9h2v1H12zM16 9h2v1H16zM20 9h1v1H20zM22 9h1v1H22zM25 9h1v1H25zM27,9 h2v1H27zM0 10h1v1H0zM3 10h2v1H3zM6 10h1v1H6zM8 10h3v1H8zM12 10h2v1H12zM16 10h1v1H16zM19 10h1v1H19zM22 10h3v1H22zM27 10h1v1H27zM0 11h1v1H0zM2 11h1v1H2zM4 11h2v1H4zM7 11h1v1H7zM13 11h4v1H13zM18 11h4v1H18zM26 11h2v1H26zM0 12h1v1H0zM2 12h3v1H2zM6 12h1v1H6zM11 12h1v1H11zM13 12h1v1H13zM15 12h3v1H15zM20 12h1v1H20zM22 12h2v1H22zM27,12 h2v1H27zM4 13h1v1H4zM8 13h3v1H8zM12 13h1v1H12zM14 13h1v1H14zM17 13h4v1H17zM25 13h2v1H25zM0 14h1v1H0zM4 14h3v1H4zM8 14h2v1H8zM11 14h3v1H11zM16 14h1v1H16zM21 14h2v1H21zM24,14 h5v1H24zM3 15h3v1H3zM7 15h2v1H7zM10 15h1v1H10zM12 15h2v1H12zM15 15h1v1H15zM17 15h2v1H17zM20 15h2v1H20zM23 15h1v1H23zM1 16h1v1H1zM4 16h1v1H4zM6 16h4v1H6zM16 16h2v1H16zM20 16h1v1H20zM23 16h1v1H23zM25 16h1v1H25zM28,16 h1v1H28zM2 17h1v1H2zM5 17h1v1H5zM7 17h2v1H7zM11 17h3v1H11zM17 17h1v1H17zM22 17h1v1H22zM25 17h1v1H25zM27,17 h2v1H27zM0 18h1v1H0zM3 18h1v1H3zM5 18h4v1H5zM10 18h1v1H10zM12 18h1v1H12zM18 18h1v1H18zM20 18h1v1H20zM22 18h2v1H22zM25,18 h4v1H25zM2 19h3v1H2zM8 19h1v1H8zM16 19h2v1H16zM21 19h1v1H21zM23 19h1v1H23zM25 19h1v1H25zM27 19h1v1H27zM0 20h1v1H0zM2 20h5v1H2zM8 20h2v1H8zM13 20h4v1H13zM19 20h6v1H19zM26 20h1v1H26zM28,20 h1v1H28zM8 21h2v1H8zM12 21h3v1H12zM16 21h1v1H16zM20 21h1v1H20zM24 21h1v1H24zM26,21 h3v1H26zM0 22h7v1H0zM8 22h3v1H8zM17 22h1v1H17zM20 22h1v1H20zM22 22h1v1H22zM24 22h2v1H24zM27 22h1v1H27zM0 23h1v1H0zM6 23h1v1H6zM10 23h2v1H10zM13 23h2v1H13zM19 23h2v1H19zM24,23 h5v1H24zM0 24h1v1H0zM2 24h3v1H2zM6 24h1v1H6zM9 24h2v1H9zM12 24h2v1H12zM17 24h1v1H17zM20 24h6v1H20zM28,24 h1v1H28zM0 25h1v1H0zM2 25h3v1H2zM6 25h1v1H6zM8 25h3v1H8zM12 25h1v1H12zM14 25h1v1H14zM18 25h1v1H18zM22 25h3v1H22zM26 25h1v1H26zM0 26h1v1H0zM2 26h3v1H2zM6 26h1v1H6zM10 26h5v1H10zM16 26h3v1H16zM21 26h1v1H21zM24 26h1v1H24zM26 26h1v1H26zM28,26 h1v1H28zM0 27h1v1H0zM6 27h1v1H6zM8 27h3v1H8zM12 27h4v1H12zM17 27h1v1H17zM20 27h1v1H20zM23 27h2v1H23zM27 27h1v1H27zM0 28h7v1H0zM8 28h3v1H8zM14 28h1v1H14zM16 28h3v1H16zM20 28h1v1H20zM22 28h1v1H22zM24 28h2v1H24zM27 28h1v1H27z"></path>
    </svg>
  </section>
  

  <section>
    <h1>Subscribe</h1>
    Do you want to get notified via email when I post new content?
    <style>
      .subscribe-button {
        /* margin: 10px !important; */
        padding: 10px !important;
        background-color: black;
        display: inline-block;
        color: white !important;
        text-decoration: none;

        line-height: 36px !important;
        height: 37px !important;
        text-decoration: none !important;
        display: inline-block !important;
        color: #ffffff !important;
        background-color: #000000 !important;
        border-radius: 3px !important;
        border: 1px solid transparent !important;
        padding: 1px 9px !important;
        font-size: 23px !important;
        letter-spacing: 0.6px !important;
        box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;
        -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
        margin: 0 auto !important;
        font-family: 'Cookie', cursive !important;
        -webkit-box-sizing: border-box !important;
        box-sizing: border-box !important;
        -o-transition: 0.3s all linear !important;
        -webkit-transition: 0.3s all linear !important;
        -moz-transition: 0.3s all linear !important;
        -ms-transition: 0.3s all linear !important;
        transition: 0.3s all linear !important;

      }
    </style>
    <a class='subscribe-button' target="_blank" href="http://eepurl.com/dxI3PP">Click here to subscribe!</a>
  </section>


  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
        <a href="https://spapas.github.io/2024/08/22/multiple-erl-elixir-windows/">Multiple Erlang/Elixir versions in Windows</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2023/11/29/openid-connect-tutorial/">A simple OpenID connect tutorial</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2023/05/23/simple-django-datatables-integration/">Simple Django - DataTables integration</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2023/05/22/ai-auto-subtitling/">AI auto-subtitling</a>
      </li>
      <li class="post">
        <a href="https://spapas.github.io/2023/05/12/disable-your-forms/">HTML form disable after submit</a>
      </li>
    </ul>
  </section>
  <section>

    <h1>Categories</h1>
    <ul id="recent_posts">
      <li><a href="https://spapas.github.io/category/ai.html">ai</a></li>
      <li><a href="https://spapas.github.io/category/android.html">android</a></li>
      <li><a href="https://spapas.github.io/category/clojure.html">clojure</a></li>
      <li><a href="https://spapas.github.io/category/css.html">css</a></li>
      <li><a href="https://spapas.github.io/category/django.html">django</a></li>
      <li><a href="https://spapas.github.io/category/elixir.html">elixir</a></li>
      <li><a href="https://spapas.github.io/category/flask.html">flask</a></li>
      <li><a href="https://spapas.github.io/category/gaming.html">gaming</a></li>
      <li><a href="https://spapas.github.io/category/git.html">git</a></li>
      <li><a href="https://spapas.github.io/category/html.html">html</a></li>
      <li><a href="https://spapas.github.io/category/javascript.html">javascript</a></li>
      <li><a href="https://spapas.github.io/category/networking.html">networking</a></li>
      <li><a href="https://spapas.github.io/category/pelican.html">pelican</a></li>
      <li><a href="https://spapas.github.io/category/postgresql.html">postgresql</a></li>
      <li><a href="https://spapas.github.io/category/python.html">python</a></li>
      <li><a href="https://spapas.github.io/category/spring.html">spring</a></li>
      <li><a href="https://spapas.github.io/category/unix.html">unix</a></li>
      <li><a href="https://spapas.github.io/category/wagtail.html">wagtail</a></li>
    </ul>
  </section>

  <section>
    <h1>Tags</h1>
    <a href="https://spapas.github.io/tag/erlang.html">erlang</a>,    <a href="https://spapas.github.io/tag/elixir.html">elixir</a>,    <a href="https://spapas.github.io/tag/windows.html">windows</a>,    <a href="https://spapas.github.io/tag/openid.html">openid</a>,    <a href="https://spapas.github.io/tag/openid-connect.html">openid-connect</a>,    <a href="https://spapas.github.io/tag/oidc.html">oidc</a>,    <a href="https://spapas.github.io/tag/http.html">http</a>,    <a href="https://spapas.github.io/tag/keycloak.html">keycloak</a>,    <a href="https://spapas.github.io/tag/python.html">python</a>,    <a href="https://spapas.github.io/tag/django.html">django</a>,    <a href="https://spapas.github.io/tag/jquery.html">jquery</a>,    <a href="https://spapas.github.io/tag/datatables.html">datatables</a>,    <a href="https://spapas.github.io/tag/ai.html">ai</a>,    <a href="https://spapas.github.io/tag/whisper.html">whisper</a>,    <a href="https://spapas.github.io/tag/whispercpp.html">whisper.cpp</a>,    <a href="https://spapas.github.io/tag/subtitles.html">subtitles</a>,    <a href="https://spapas.github.io/tag/video.html">video</a>,    <a href="https://spapas.github.io/tag/auto-subtitling.html">auto-subtitling</a>,    <a href="https://spapas.github.io/tag/subtitiling.html">subtitiling</a>,    <a href="https://spapas.github.io/tag/transcribe.html">transcribe</a>,    <a href="https://spapas.github.io/tag/html.html">html</a>,    <a href="https://spapas.github.io/tag/javascript.html">javascript</a>,    <a href="https://spapas.github.io/tag/media.html">media</a>,    <a href="https://spapas.github.io/tag/storage.html">storage</a>,    <a href="https://spapas.github.io/tag/unpoly.html">unpoly</a>,    <a href="https://spapas.github.io/tag/access.html">access</a>,    <a href="https://spapas.github.io/tag/database.html">database</a>,    <a href="https://spapas.github.io/tag/accdb.html">accdb</a>,    <a href="https://spapas.github.io/tag/mdb.html">mdb</a>,    <a href="https://spapas.github.io/tag/postgresql.html">postgresql</a>,    <a href="https://spapas.github.io/tag/development.html">development</a>,    <a href="https://spapas.github.io/tag/inlines.html">inlines</a>,    <a href="https://spapas.github.io/tag/clojure.html">clojure</a>,    <a href="https://spapas.github.io/tag/cmd.html">cmd</a>,    <a href="https://spapas.github.io/tag/pdf.html">pdf</a>,    <a href="https://spapas.github.io/tag/wkhtmltopdf.html">wkhtmltopdf</a>,    <a href="https://spapas.github.io/tag/forward-proxy.html">forward-proxy</a>,    <a href="https://spapas.github.io/tag/reverse-proxy.html">reverse-proxy</a>,    <a href="https://spapas.github.io/tag/proxy.html">proxy</a>,    <a href="https://spapas.github.io/tag/networking.html">networking</a>,    <a href="https://spapas.github.io/tag/dj-rest-auth.html">dj-rest-auth</a>,    <a href="https://spapas.github.io/tag/rest.html">rest</a>,    <a href="https://spapas.github.io/tag/django-rest-framework.html">django-rest-framework</a>,    <a href="https://spapas.github.io/tag/authentication.html">authentication</a>,    <a href="https://spapas.github.io/tag/tokens.html">tokens</a>,    <a href="https://spapas.github.io/tag/migrations.html">migrations</a>,    <a href="https://spapas.github.io/tag/foreignkey.html">foreignkey</a>,    <a href="https://spapas.github.io/tag/dark-souls.html">dark-souls</a>,    <a href="https://spapas.github.io/tag/dark-souls-2.html">dark-souls-2</a>,    <a href="https://spapas.github.io/tag/dark-souls-3.html">dark-souls-3</a>,    <a href="https://spapas.github.io/tag/autohotkey.html">autohotkey</a>,    <a href="https://spapas.github.io/tag/matplotlib.html">matplotlib</a>,    <a href="https://spapas.github.io/tag/hashids.html">hashids</a>,    <a href="https://spapas.github.io/tag/wagtail.html">wagtail</a>,    <a href="https://spapas.github.io/tag/osmon.html">osmon</a>,    <a href="https://spapas.github.io/tag/phoenix.html">phoenix</a>,    <a href="https://spapas.github.io/tag/os-monitoring.html">os-monitoring</a>,    <a href="https://spapas.github.io/tag/forms.html">forms</a>,    <a href="https://spapas.github.io/tag/django-crispy-forms.html">django-crispy-forms</a>,    <a href="https://spapas.github.io/tag/django-widget-tweaks.html">django-widget-tweaks</a>,    <a href="https://spapas.github.io/tag/ecto.html">ecto</a>,    <a href="https://spapas.github.io/tag/queries.html">queries</a>,    <a href="https://spapas.github.io/tag/declarative.html">declarative</a>,    <a href="https://spapas.github.io/tag/form.html">form</a>,    <a href="https://spapas.github.io/tag/php.html">php</a>,    <a href="https://spapas.github.io/tag/select2.html">select2</a>,    <a href="https://spapas.github.io/tag/autocompelte.html">autocompelte</a>,    <a href="https://spapas.github.io/tag/ajax.html">ajax</a>,    <a href="https://spapas.github.io/tag/android.html">android</a>,    <a href="https://spapas.github.io/tag/kotlin.html">kotlin</a>,    <a href="https://spapas.github.io/tag/adapter.html">adapter</a>,    <a href="https://spapas.github.io/tag/filter.html">filter</a>,    <a href="https://spapas.github.io/tag/async.html">async</a>,    <a href="https://spapas.github.io/tag/tasks.html">tasks</a>,    <a href="https://spapas.github.io/tag/django-rq.html">django-rq</a>,    <a href="https://spapas.github.io/tag/rq.html">rq</a>,    <a href="https://spapas.github.io/tag/du.html">du</a>,    <a href="https://spapas.github.io/tag/unix.html">unix</a>,    <a href="https://spapas.github.io/tag/linux.html">linux</a>,    <a href="https://spapas.github.io/tag/disk-usage.html">disk-usage</a>,    <a href="https://spapas.github.io/tag/cbv.html">cbv</a>,    <a href="https://spapas.github.io/tag/middleware.html">middleware</a>,    <a href="https://spapas.github.io/tag/class-based-views.html">class-based-views</a>,    <a href="https://spapas.github.io/tag/react.html">react</a>,    <a href="https://spapas.github.io/tag/redux.html">redux</a>,    <a href="https://spapas.github.io/tag/hyperapp.html">hyperapp</a>,    <a href="https://spapas.github.io/tag/immutable.html">immutable</a>,    <a href="https://spapas.github.io/tag/es6.html">es6</a>,    <a href="https://spapas.github.io/tag/youtube.html">youtube</a>,    <a href="https://spapas.github.io/tag/youtube-dl.html">youtube-dl</a>,    <a href="https://spapas.github.io/tag/ffmpeg.html">ffmpeg</a>,    <a href="https://spapas.github.io/tag/django-rest-auth.html">django-rest-auth</a>,    <a href="https://spapas.github.io/tag/python-2.html">python-2</a>,    <a href="https://spapas.github.io/tag/python-3.html">python-3</a>,    <a href="https://spapas.github.io/tag/plpgsql.html">plpgsql</a>,    <a href="https://spapas.github.io/tag/component.html">component</a>,    <a href="https://spapas.github.io/tag/ag-grid.html">ag-grid</a>,    <a href="https://spapas.github.io/tag/grid.html">grid</a>,    <a href="https://spapas.github.io/tag/bash.html">bash</a>,    <a href="https://spapas.github.io/tag/cron.html">cron</a>,    <a href="https://spapas.github.io/tag/pandas.html">pandas</a>,    <a href="https://spapas.github.io/tag/scipy.html">scipy</a>,    <a href="https://spapas.github.io/tag/numpy.html">numpy</a>,    <a href="https://spapas.github.io/tag/pivot.html">pivot</a>,    <a href="https://spapas.github.io/tag/pivot_table.html">pivot_table</a>,    <a href="https://spapas.github.io/tag/ipython.html">ipython</a>,    <a href="https://spapas.github.io/tag/jupyter.html">jupyter</a>,    <a href="https://spapas.github.io/tag/notebook.html">notebook</a>,    <a href="https://spapas.github.io/tag/query.html">query</a>,    <a href="https://spapas.github.io/tag/q.html">q</a>,    <a href="https://spapas.github.io/tag/imgur.html">imgur</a>,    <a href="https://spapas.github.io/tag/console.html">console</a>,    <a href="https://spapas.github.io/tag/research.html">research</a>,    <a href="https://spapas.github.io/tag/debug.html">debug</a>,    <a href="https://spapas.github.io/tag/werkzeug.html">werkzeug</a>,    <a href="https://spapas.github.io/tag/django-extensions.html">django-extensions</a>,    <a href="https://spapas.github.io/tag/404.html">404</a>,    <a href="https://spapas.github.io/tag/error.html">error</a>,    <a href="https://spapas.github.io/tag/spring.html">spring</a>,    <a href="https://spapas.github.io/tag/spring-boot.html">spring-boot</a>,    <a href="https://spapas.github.io/tag/java.html">java</a>,    <a href="https://spapas.github.io/tag/ldap.html">ldap</a>,    <a href="https://spapas.github.io/tag/profiles.html">profiles</a>,    <a href="https://spapas.github.io/tag/settings.html">settings</a>,    <a href="https://spapas.github.io/tag/properties.html">properties</a>,    <a href="https://spapas.github.io/tag/yaml.html">yaml</a>,    <a href="https://spapas.github.io/tag/configuration.html">configuration</a>,    <a href="https://spapas.github.io/tag/deploy.html">deploy</a>,    <a href="https://spapas.github.io/tag/initd.html">init.d</a>,    <a href="https://spapas.github.io/tag/react-redux.html">react-redux</a>,    <a href="https://spapas.github.io/tag/redux-thunk.html">redux-thunk</a>,    <a href="https://spapas.github.io/tag/redux-form.html">redux-form</a>,    <a href="https://spapas.github.io/tag/react-router.html">react-router</a>,    <a href="https://spapas.github.io/tag/react-router-redux.html">react-router-redux</a>,    <a href="https://spapas.github.io/tag/react-notification.html">react-notification</a>,    <a href="https://spapas.github.io/tag/history.html">history</a>,    <a href="https://spapas.github.io/tag/babel.html">babel</a>,    <a href="https://spapas.github.io/tag/babelify.html">babelify</a>,    <a href="https://spapas.github.io/tag/browserify.html">browserify</a>,    <a href="https://spapas.github.io/tag/watchify.html">watchify</a>,    <a href="https://spapas.github.io/tag/uglify.html">uglify</a>,    <a href="https://spapas.github.io/tag/boilerplate.html">boilerplate</a>,    <a href="https://spapas.github.io/tag/tutorial.html">tutorial</a>,    <a href="https://spapas.github.io/tag/introduction.html">introduction</a>,    <a href="https://spapas.github.io/tag/fixed-data-tables.html">fixed-data-tables</a>,    <a href="https://spapas.github.io/tag/fixeddatatable.html">FixedDataTable</a>,    <a href="https://spapas.github.io/tag/reportlab.html">reportlab</a>,    <a href="https://spapas.github.io/tag/xhtml2pdf.html">xhtml2pdf</a>,    <a href="https://spapas.github.io/tag/node.html">node</a>,    <a href="https://spapas.github.io/tag/npm.html">npm</a>,    <a href="https://spapas.github.io/tag/generic.html">generic</a>,    <a href="https://spapas.github.io/tag/tables.html">tables</a>,    <a href="https://spapas.github.io/tag/flux.html">flux</a>,    <a href="https://spapas.github.io/tag/jobs.html">jobs</a>,    <a href="https://spapas.github.io/tag/asynchronous.html">asynchronous</a>,    <a href="https://spapas.github.io/tag/scheduling.html">scheduling</a>,    <a href="https://spapas.github.io/tag/redis.html">redis</a>,    <a href="https://spapas.github.io/tag/pusher.html">pusher</a>,    <a href="https://spapas.github.io/tag/auditing.html">auditing</a>,    <a href="https://spapas.github.io/tag/css.html">css</a>,    <a href="https://spapas.github.io/tag/design.html">design</a>,    <a href="https://spapas.github.io/tag/boostrap-material-design.html">boostrap-material-design</a>,    <a href="https://spapas.github.io/tag/less.html">less</a>,    <a href="https://spapas.github.io/tag/nodejs.html">node.js</a>,    <a href="https://spapas.github.io/tag/gmail.html">gmail</a>,    <a href="https://spapas.github.io/tag/security.html">security</a>,    <a href="https://spapas.github.io/tag/google.html">google</a>,    <a href="https://spapas.github.io/tag/flask.html">flask</a>,    <a href="https://spapas.github.io/tag/mongodb.html">mongodb</a>,    <a href="https://spapas.github.io/tag/heroku.html">heroku</a>,    <a href="https://spapas.github.io/tag/spring-security.html">spring-security</a>,    <a href="https://spapas.github.io/tag/git.html">git</a>,    <a href="https://spapas.github.io/tag/github.html">github</a>,    <a href="https://spapas.github.io/tag/branching.html">branching</a>,    <a href="https://spapas.github.io/tag/static-html.html">static-html</a>,    <a href="https://spapas.github.io/tag/githubio.html">github.io</a>,    <a href="https://spapas.github.io/tag/pelican.html">pelican</a>,    <a href="https://spapas.github.io/tag/github-pages.html">github-pages</a>,    <a href="https://spapas.github.io/tag/rst.html">rst</a>  </section>

  <section>
    <h1>Yearly archives</h1>
    <a href="https://spapas.github.io/posts/2013/">2013</a>,    <a href="https://spapas.github.io/posts/2014/">2014</a>,    <a href="https://spapas.github.io/posts/2015/">2015</a>,    <a href="https://spapas.github.io/posts/2016/">2016</a>,    <a href="https://spapas.github.io/posts/2017/">2017</a>,    <a href="https://spapas.github.io/posts/2018/">2018</a>,    <a href="https://spapas.github.io/posts/2019/">2019</a>,    <a href="https://spapas.github.io/posts/2020/">2020</a>,    <a href="https://spapas.github.io/posts/2021/">2021</a>,    <a href="https://spapas.github.io/posts/2022/">2022</a>,    <a href="https://spapas.github.io/posts/2023/">2023</a>,    <a href="https://spapas.github.io/posts/2024/">2024</a>  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/spapas">@spapas</a> on GitHub
    <script  src="//code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script type="text/javascript">
      $(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'https://spapas.github.io/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'spapas',
              count: 5,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="https://spapas.github.io/theme/js/github.js" type="text/javascript"> </script>
  </section>


  <section>
    <a href="https://twitter.com/_serafeim_?ref_src=twsrc%5Etfw" class="twitter-follow-button"
      data-show-count="false">Follow @_serafeim_</a>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2013&ndash;2024  Serafeim Papastefanos &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="https://spapas.github.io/theme/js/modernizr-2.0.js"></script>
  <script src="https://spapas.github.io/theme/js/ender.js"></script>
  <script src="https://spapas.github.io/theme/js/octopress.js" type="text/javascript"></script>
  <script src="https://spapas.github.io/theme/js/ads.js"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-44750952-1', 'auto');

    ga('send', 'pageview');
    </script>

<script defer data-domain="spapas.github.io" src="https://plausible.hcg.gr/js/script.js"></script>  <script type="text/javascript">
    var disqus_shortname = 'spapas-github-io';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>

</body>

</html>